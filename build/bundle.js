var app=function(){"use strict";function e(){}function t(e,t){for(const s in t)e[s]=t[s];return e}function s(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(s)}function o(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function l(t,...s){if(null==t)return e;const n=t.subscribe(...s);return n.unsubscribe?()=>n.unsubscribe():n}function a(e){let t;return l(e,(e=>t=e))(),t}function c(e,t,s){e.$$.on_destroy.push(l(t,s))}function u(e,t,s,n){if(e){const r=p(e,t,s,n);return e[0](r)}}function p(e,s,n,r){return e[1]&&r?t(n.ctx.slice(),e[1](r(s))):n.ctx}function h(e,t,s,n,r,o,i){const l=function(e,t,s,n){if(e[2]&&n){const r=e[2](n(s));if(void 0===t.dirty)return r;if("object"==typeof r){const e=[],s=Math.max(t.dirty.length,r.length);for(let n=0;n<s;n+=1)e[n]=t.dirty[n]|r[n];return e}return t.dirty|r}return t.dirty}(t,n,r,o);if(l){const r=p(t,s,n,i);e.p(r,l)}}function d(e){const t={};for(const s in e)"$"!==s[0]&&(t[s]=e[s]);return t}function f(e,t){const s={};t=new Set(t);for(const n in e)t.has(n)||"$"===n[0]||(s[n]=e[n]);return s}function g(e){return null==e?"":e}function m(t){return t&&o(t.destroy)?t.destroy:e}function $(e,t){e.appendChild(t)}function v(e,t,s){e.insertBefore(t,s||null)}function y(e){e.parentNode.removeChild(e)}function x(e,t){for(let s=0;s<e.length;s+=1)e[s]&&e[s].d(t)}function w(e){return document.createElement(e)}function b(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function _(e){return document.createTextNode(e)}function L(){return _(" ")}function k(){return _("")}function E(e,t,s,n){return e.addEventListener(t,s,n),()=>e.removeEventListener(t,s,n)}function z(e){return function(t){return t.preventDefault(),e.call(this,t)}}function I(e,t,s){null==s?e.removeAttribute(t):e.getAttribute(t)!==s&&e.setAttribute(t,s)}function A(e,t){const s=Object.getOwnPropertyDescriptors(e.__proto__);for(const n in t)null==t[n]?e.removeAttribute(n):"style"===n?e.style.cssText=t[n]:"__value"===n?e.value=e[n]=t[n]:s[n]&&s[n].set?e[n]=t[n]:I(e,n,t[n])}function S(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function M(e,t,s,n){e.style.setProperty(t,s,n?"important":"")}function C(e,t){for(let s=0;s<e.options.length;s+=1){const n=e.options[s];if(n.__value===t)return void(n.selected=!0)}}function P(e,t,s){e.classList[s?"add":"remove"](t)}let T;function N(e){T=e}function R(){if(!T)throw new Error("Function called outside component initialization");return T}function D(e){R().$$.on_mount.push(e)}function j(e){R().$$.on_destroy.push(e)}function O(){const e=R();return(t,s)=>{const n=e.$$.callbacks[t];if(n){const r=function(e,t){const s=document.createEvent("CustomEvent");return s.initCustomEvent(e,!1,!1,t),s}(t,s);n.slice().forEach((t=>{t.call(e,r)}))}}}function B(e,t){const s=e.$$.callbacks[t.type];s&&s.slice().forEach((e=>e(t)))}const F=[],H=[],q=[],K=[],G=Promise.resolve();let J=!1;function U(){J||(J=!0,G.then(Q))}function W(){return U(),G}function Y(e){q.push(e)}function X(e){K.push(e)}let V=!1;const Z=new Set;function Q(){if(!V){V=!0;do{for(let e=0;e<F.length;e+=1){const t=F[e];N(t),ee(t.$$)}for(N(null),F.length=0;H.length;)H.pop()();for(let e=0;e<q.length;e+=1){const t=q[e];Z.has(t)||(Z.add(t),t())}q.length=0}while(F.length);for(;K.length;)K.pop()();J=!1,V=!1,Z.clear()}}function ee(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Y)}}const te=new Set;let se;function ne(){se={r:0,c:[],p:se}}function re(){se.r||r(se.c),se=se.p}function oe(e,t){e&&e.i&&(te.delete(e),e.i(t))}function ie(e,t,s,n){if(e&&e.o){if(te.has(e))return;te.add(e),se.c.push((()=>{te.delete(e),n&&(s&&e.d(1),n())})),e.o(t)}}const le="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function ae(e,t){e.d(1),t.delete(e.key)}function ce(e,t){ie(e,1,1,(()=>{t.delete(e.key)}))}function ue(e,t,s,n,r,o,i,l,a,c,u,p){let h=e.length,d=o.length,f=h;const g={};for(;f--;)g[e[f].key]=f;const m=[],$=new Map,v=new Map;for(f=d;f--;){const e=p(r,o,f),l=s(e);let a=i.get(l);a?n&&a.p(e,t):(a=c(l,e),a.c()),$.set(l,m[f]=a),l in g&&v.set(l,Math.abs(f-g[l]))}const y=new Set,x=new Set;function w(e){oe(e,1),e.m(l,u),i.set(e.key,e),u=e.first,d--}for(;h&&d;){const t=m[d-1],s=e[h-1],n=t.key,r=s.key;t===s?(u=t.first,h--,d--):$.has(r)?!i.has(n)||y.has(n)?w(t):x.has(r)?h--:v.get(n)>v.get(r)?(x.add(n),w(t)):(y.add(r),h--):(a(s,i),h--)}for(;h--;){const t=e[h];$.has(t.key)||a(t,i)}for(;d;)w(m[d-1]);return m}function pe(e,t){const s={},n={},r={$$scope:1};let o=e.length;for(;o--;){const i=e[o],l=t[o];if(l){for(const e in i)e in l||(n[e]=1);for(const e in l)r[e]||(s[e]=l[e],r[e]=1);e[o]=l}else for(const e in i)r[e]=1}for(const e in n)e in s||(s[e]=void 0);return s}function he(e){return"object"==typeof e&&null!==e?e:{}}function de(e,t,s){const n=e.$$.props[t];void 0!==n&&(e.$$.bound[n]=s,s(e.$$.ctx[n]))}function fe(e){e&&e.c()}function ge(e,t,n){const{fragment:i,on_mount:l,on_destroy:a,after_update:c}=e.$$;i&&i.m(t,n),Y((()=>{const t=l.map(s).filter(o);a?a.push(...t):r(t),e.$$.on_mount=[]})),c.forEach(Y)}function me(e,t){const s=e.$$;null!==s.fragment&&(r(s.on_destroy),s.fragment&&s.fragment.d(t),s.on_destroy=s.fragment=null,s.ctx=[])}function $e(t,s,o,i,l,a,c=[-1]){const u=T;N(t);const p=s.props||{},h=t.$$={fragment:null,ctx:null,props:a,update:e,not_equal:l,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:n(),dirty:c,skip_bound:!1};let d=!1;if(h.ctx=o?o(t,p,((e,s,...n)=>{const r=n.length?n[0]:s;return h.ctx&&l(h.ctx[e],h.ctx[e]=r)&&(!h.skip_bound&&h.bound[e]&&h.bound[e](r),d&&function(e,t){-1===e.$$.dirty[0]&&(F.push(e),U(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),s})):[],h.update(),d=!0,r(h.before_update),h.fragment=!!i&&i(h.ctx),s.target){if(s.hydrate){const e=function(e){return Array.from(e.childNodes)}(s.target);h.fragment&&h.fragment.l(e),e.forEach(y)}else h.fragment&&h.fragment.c();s.intro&&oe(t.$$.fragment),ge(t,s.target,s.anchor),Q()}N(u)}class ve{$destroy(){me(this,1),this.$destroy=e}$on(e,t){const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(t),()=>{const e=s.indexOf(t);-1!==e&&s.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ye=[];function xe(t,s=e){let n;const r=[];function o(e){if(i(t,e)&&(t=e,n)){const e=!ye.length;for(let e=0;e<r.length;e+=1){const s=r[e];s[1](),ye.push(s,t)}if(e){for(let e=0;e<ye.length;e+=2)ye[e][0](ye[e+1]);ye.length=0}}}return{set:o,update:function(e){o(e(t))},subscribe:function(i,l=e){const a=[i,l];return r.push(a),1===r.length&&(n=s(o)||e),i(t),()=>{const e=r.indexOf(a);-1!==e&&r.splice(e,1),0===r.length&&(n(),n=null)}}}}function we(t,s,n){const i=!Array.isArray(t),a=i?[t]:t,c=s.length<2;return{subscribe:xe(n,(t=>{let n=!1;const u=[];let p=0,h=e;const d=()=>{if(p)return;h();const n=s(i?u[0]:u,t);c?t(n):h=o(n)?n:e},f=a.map(((e,t)=>l(e,(e=>{u[t]=e,p&=~(1<<t),n&&d()}),(()=>{p|=1<<t}))));return n=!0,d(),function(){r(f),h()}})).subscribe}}const be=e=>{var t,s,n=e[0]/255,r=e[1]/255,o=e[2]/255,i=Math.max(n,r,o),l=Math.min(n,r,o),a=(i+l)/2;if(i==l)t=s=0;else{var c=i-l;switch(s=a>.5?c/(2-i-l):c/(i+l),i){case n:t=(r-o)/c+(r<o?6:0);break;case r:t=(o-n)/c+2;break;case o:t=(n-r)/c+4}t/=6}return new Array(360*t,100*s,100*a)},_e=[{hex:"00",rgb:[124,124,124]},{hex:"01",rgb:[0,0,252]},{hex:"02",rgb:[0,0,188]},{hex:"03",rgb:[68,40,188]},{hex:"04",rgb:[148,0,132]},{hex:"05",rgb:[168,0,32]},{hex:"06",rgb:[168,16,0]},{hex:"07",rgb:[136,20,0]},{hex:"08",rgb:[80,48,0]},{hex:"09",rgb:[0,120,0]},{hex:"0A",rgb:[0,104,0]},{hex:"0B",rgb:[0,88,0]},{hex:"0C",rgb:[0,64,88]},{hex:"0D",rgb:[0,0,0]},{hex:"0E",rgb:[0,0,0]},{hex:"0F",rgb:[0,0,0]},{hex:"10",rgb:[188,188,188]},{hex:"11",rgb:[0,120,248]},{hex:"12",rgb:[0,88,248]},{hex:"13",rgb:[104,68,252]},{hex:"14",rgb:[216,0,204]},{hex:"15",rgb:[228,0,88]},{hex:"16",rgb:[248,56,0]},{hex:"17",rgb:[228,92,16]},{hex:"18",rgb:[172,124,0]},{hex:"19",rgb:[0,184,0]},{hex:"1A",rgb:[0,168,0]},{hex:"1B",rgb:[0,168,68]},{hex:"1C",rgb:[0,136,136]},{hex:"1D",rgb:[0,0,0]},{hex:"1E",rgb:[0,0,0]},{hex:"1F",rgb:[0,0,0]},{hex:"20",rgb:[248,248,248]},{hex:"21",rgb:[60,188,252]},{hex:"22",rgb:[104,136,252]},{hex:"23",rgb:[152,120,248]},{hex:"24",rgb:[248,120,248]},{hex:"25",rgb:[248,88,152]},{hex:"26",rgb:[248,120,88]},{hex:"27",rgb:[252,160,68]},{hex:"28",rgb:[248,184,0]},{hex:"29",rgb:[184,248,24]},{hex:"2A",rgb:[88,216,84]},{hex:"2B",rgb:[88,248,152]},{hex:"2C",rgb:[0,232,216]},{hex:"2D",rgb:[120,120,120]},{hex:"2E",rgb:[0,0,0]},{hex:"2F",rgb:[0,0,0]},{hex:"30",rgb:[252,252,252]},{hex:"31",rgb:[164,228,252]},{hex:"32",rgb:[184,184,248]},{hex:"33",rgb:[216,184,248]},{hex:"34",rgb:[248,184,248]},{hex:"35",rgb:[248,164,192]},{hex:"36",rgb:[240,208,176]},{hex:"37",rgb:[252,224,168]},{hex:"38",rgb:[248,216,120]},{hex:"39",rgb:[216,248,120]},{hex:"3A",rgb:[184,248,184]},{hex:"3B",rgb:[184,248,216]},{hex:"3C",rgb:[0,252,252]},{hex:"3D",rgb:[216,216,216]},{hex:"3E",rgb:[0,0,0]},{hex:"3F",rgb:[0,0,0]}],Le=_e.map(((e,t)=>({rgb:be(e.rgb),index:t}))).sort(((e,t)=>t.rgb[0]-e.rgb[0]||e.rgb[2]-t.rgb[2])).map((e=>_e[e.index]));class ke{constructor(e,t){this.hex=e,this.rgb=t,Object.freeze(this)}}const Ee=Le.map((e=>new ke(e.hex,e.rgb))),ze=(()=>{const e=xe([]),{subscribe:t,update:s}=e;return{subscribe:t,push(e){if(e instanceof ErrorEvent){const t=new Date,n=`${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}:${String(t.getSeconds()).padStart(2,"0")}`;e.date=n,s((t=>(t.length>20&&(t=[]),t.push(e),t)))}}}})(),Ie=(()=>{const{subscribe:e,set:t,update:s}=xe({name:void 0,saved:null});return{subscribe:e,name:e=>{if("string"!=typeof e)throw new Error("Invalid project name.");s((t=>({...t,name:e})))},save:e=>{console.log("saving to location:",e)}}})();window.addEventListener("contextmenu",(e=>e.preventDefault())),window.addEventListener("error",(function(e){ze.push(e)})),window.addEventListener("keydown",(e=>{}));class Ae extends Number{constructor(e,t){if("number"!=typeof e||"string"!=typeof t)throw new Error("Invalid Enumerable arguments");super(e),this.key=t,this.value=e,Object.freeze(this)}}class Se extends Map{constructor(...e){super(),e.forEach(((e,t)=>{if(this.has(e))throw new Error(`enum key : '${e}' already exists`);if("string"!=typeof e)throw new Error(`Invalid key. Expecting string, got : [${typeof e}](${e})`);const s=new Ae(t+1,e);this.set(e,s)})),Object.freeze(this)}}const Me=new class{constructor(...e){this.__actions=this.define(...e),this.__binds=new Map}define(...e){const t=new Se(...e);return this.__actions=t,t}action(e){if(!this.__actions.has(e))throw new Error(`Action is not defined for key '${e}'`);return this.__actions.get(e)}register(e,t){if("string"!=typeof e){if(!(e instanceof Ae))throw new Error(`Invalid key value '${e}'. Expecting instance of 'Enum'`);if(this.__binds.has(e))throw new Error(`Action already defined : [${e.key}]`);if("function"!=typeof t)throw new Error("Invalid callback function");this.__binds.set(e,t)}else this.register(this.action(e),t)}exist(e){return this.__binds.has(e)}call(e,...t){if("string"!=typeof e){if(!(e instanceof Ae))throw new Error(`Invalid key '${e}'. Expecting 'Enum'`);if(!this.__binds.has(e))throw new Error(`Action for '${e}' does not exist`);return new Promise(((s,n)=>{try{s(this.__binds.get(e).call(null,...t))}catch(e){n(e.message)}}))}this.call(this.action(e),...t)}execute(...e){return this.call(...e)}}("noop","application_log","window_close","window_minimize","window_maximize","window_toggle_fullscreen","external_link","project_create","project_open","project_save","project_save_as","palette_clear","palette_create","palette_remove","palette_clone_layer","palette_clone_active_layer","palette_make_layer_active","palette_swap_layers","palette_update_layer_label","palette_focus_rename_active_layer","palette_export","palette_import","palette_active_color","spritesheet_clear","spritesheet_create","spritesheet_remove","spritesheet_clone_layer","spritesheet_clone_active_layer","spritesheet_update_layer_label","spritesheet_make_layer_active","spritesheet_swap_layers","spritesheet_focus_rename_active_layer","spritesheet_zoom","spritesheet_zoom_in","spritesheet_zoom_out","spritesheet_zoom_reset","spritesheet_set_active_tool","spritesheet_import","spritesheet_export","spritesheet_import_chr","spritesheet_export_chr","spritesheet_export_png","spritesheet_undo","spritesheet_redo","tool_action","toggle_theme","light_theme","dark_theme");var Ce="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var Pe,Te=(function(e,t){!function(){function t(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function s(e,t,s){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){l(n.response,t,s)},n.onerror=function(){console.error("could not download file")},n.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function r(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(s){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof Ce&&Ce.global===Ce?Ce:void 0,i=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(e,t,i){var l=o.URL||o.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener","string"==typeof e?(a.href=e,a.origin===location.origin?r(a):n(a.href)?s(e,t,i):r(a,a.target="_blank")):(a.href=l.createObjectURL(e),setTimeout((function(){l.revokeObjectURL(a.href)}),4e4),setTimeout((function(){r(a)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,o,i){if(o=o||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,i),o);else if(n(e))s(e,o,i);else{var l=document.createElement("a");l.href=e,l.target="_blank",setTimeout((function(){r(l)}))}}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof e)return s(e,t,n);var l="application/octet-stream"===e.type,a=/constructor/i.test(o.HTMLElement)||o.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||l&&a||i)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=e:location=e,r=null},u.readAsDataURL(e)}else{var p=o.URL||o.webkitURL,h=p.createObjectURL(e);r?r.location=h:location.href=h,r=null,setTimeout((function(){p.revokeObjectURL(h)}),4e4)}});o.saveAs=l.saveAs=l,e.exports=l}()}(Pe={exports:{}},Pe.exports),Pe.exports);const Ne=(e,t)=>{const s=new Date;return`${`${String(s.getFullYear())}_${String(s.getMonth()).padStart(2,"0")}_${String(s.getDay()).padStart(2,"0")}`}_${e}.${t}`},Re=(e=[],t=(e=>e),s={readAs:"text"})=>{if(!Array.isArray(e))throw new Error("Invalid 'fileDialog' accept. Expecting array of file extentions");if("function"!=typeof t)throw new Error("Invalid 'fileDialog' callback function");const n=document.createElement("input");n.type="file",n.accept=e.map((e=>e.startsWith(".")?e:"."+e)).join(","),n.addEventListener("change",(e=>{const n=e.target.files[0],r=new FileReader;switch(s.readAs){case"binary":r.readAsBinaryString(n);break;case"arraybuffer":r.readAsArrayBuffer(n);break;case"text":default:r.readAsText(n,s.encoding||"utf-8")}r.addEventListener("load",(e=>{t.call(null,e.target.result)}))})),n.click()},De=(e,t,s={})=>{const n=new Blob([t],{type:s.type||"application/json;charset=utf-8"});Te.saveAs(n,e)},je={startPage:"/graphics/spritesheets"};var Oe={project:{save:{mimetype:"nesbit/project",extension:"nesbitproject",version:2}},palettes:{save:{mimetype:"nesbit/palette",extension:"nesbitpalette",version:2},export:{mimetype:"text/plain",extension:"",version:1}},spritesheets:{save:{mimetype:"nesbit/spritesheet",extension:"nesbitspritesheet",version:1},export:{mimetype:"text/plain",extension:"",version:1}},settings:{save:{mimetype:"nesbit/settings",extension:"nesbitsettings",version:2}}};const Be=e=>JSON.parse(JSON.stringify(Ee.find((t=>t.hex==e)))),Fe=Be("0F");let He=1;class qe{constructor(e,t){if(this.label=e||"",this.colors=[],this.uuid=++He,Array.isArray(t)&&4==t.length)for(const e of t)this.addColor(e.hex);else this.colors=[...Array(4).fill("").map((e=>({...Fe})))]}addColor(e){if(!(this.colors.length<4))throw new Error("Max 4 colors per 'ColorPaletteGroup'");const t=Be(e);t&&this.colors.push({...t})}}const Ke=(()=>{const e=xe({activeLayer:void 0,layers:[],selectedColor:0}),{subscribe:t,set:s,update:n}=e,r={subscribe:t,getActiveLayer:()=>a(e).activeLayer,setSelectedColor(e){if(!Number.isInteger(e))throw new Error("Invalid 'setSelectedColor' value. Expecting 'Integer'");if(!(e>=0&&e<=4))throw new Error("Invalid 'setSelectedColor' number range. Expecting number between '0-4'");n((t=>(t.selectedColor=e,t)))},create({label:e,colors:t}={}){n((s=>{e=e||"palette_"+(s.layers.length+1);const n=new qe(e,t);return s.layers.push(n),s.activeLayer||r.makeActive(n),s}))},clear(){s({activeLayer:void 0,layers:[],selectedColor:0})},layerIndexFromSource:e=>a(Ke).layers.indexOf(e),getActiveColorIndex:()=>a(Ke).selectedColor,getActiveColor(e){const t=a(Ke);return t.activeLayer.colors[e>=0&&e<=4?e:t.selectedColor]},makeActive(t){t!=a(e).activeLayer&&n((e=>{const s=e.layers.indexOf(t);return e.activeLayer=e.layers[s],e}))},remove(e){n((t=>{const s=t.layers.indexOf(e);return t.layers[s]==t.activeLayer&&(t.layers[s+1]?r.makeActive(t.layers[s+1]):t.layers[s-1]?r.makeActive(t.layers[s-1]):t.activeLayer=void 0),t.layers.splice(s,1),t}))},swapLayers(e,t){n((s=>{const n=[...s.layers];return[n[e],n[t]]=[n[t],n[e]],s.layers=[...n],s}))},clone(t){if(!t)return;const s=a(e),o=s.layers.indexOf(t);s.layers[o]==t&&n((e=>{let s=t.label+" copy";const n=new qe(s);for(const e in t.colors)n.colors[e]={...Be(t.colors[e].hex)};return e.layers.push(n),r.makeActive(n),e}))},updateHeading(e,t){n((s=>{const n=s.layers.indexOf(e);return s.layers[n].label=t,s}))},swapColors(e){n((t=>{const s=t.layers[e.layerIndex].colors,n=t.layers[e.to.layerIndex].colors;let o=s[e.colorIndex],i=n[e.to.colorIndex];return s[e.colorIndex]={...Be(i.hex)},n[e.to.colorIndex]={...Be(o.hex)},e.layerIndex!=e.to.layerIndex&&r.makeActive(t.layers[e.to.layerIndex]),t}))},replaceColor(e){n((t=>{const s=t.layers[e.layerIndex],n=Be(e.hex);return s.colors[e.colorIndex]={hex:n.hex,rgb:n.rgb},r.makeActive(t.layers[e.layerIndex]),t}))},export(e){let t={version:Oe.palettes.save.version,data:[...a(Ke).layers]};return e&&(t=JSON.stringify(t)),t},import(e){const t=JSON.parse(e);if(t.version==Oe.palettes.save.version)for(const e of t.data)r.create({...e})}};return r})();Ke.import('{"version":2,"data":[{"label":"fire","colors":[{"hex":"0F","rgb":[0,0,0]},{"hex":"27","rgb":[252,160,68]},{"hex":"06","rgb":[168,16,0]},{"hex":"07","rgb":[136,20,0]}]},{"label":"purple","colors":[{"hex":"0F","rgb":[0,0,0]},{"hex":"16","rgb":[248,56,0]},{"hex":"13","rgb":[104,68,252]},{"hex":"03","rgb":[68,40,188]}]},{"label":"teal","colors":[{"hex":"0F","rgb":[0,0,0]},{"hex":"31","rgb":[164,228,252]},{"hex":"1C","rgb":[0,136,136]},{"hex":"0C","rgb":[0,64,88]}]},{"label":"blue steele","colors":[{"hex":"0F","rgb":[0,0,0]},{"hex":"12","rgb":[0,88,248]},{"hex":"01","rgb":[0,0,252]},{"hex":"02","rgb":[0,0,188]}]}]}');const Ge=(e,t)=>{const s=xe(e);let n={...s,get:e=>a(s)};return t&&(n={...n,...t.call(null,{value:e,store:s,get:n.get}||{...n})}),Object.freeze(n)},Je=e=>{const t=Ee.find((t=>t.hex==e));if(t)return t},Ue=Je("0F");let We=1;class Ye{constructor(e,t){if(this.label=e||"",this.colors=[],this.uuid=++We,Array.isArray(t)&&4==t.length)for(const e of t)this.addColor(e.hex);else this.colors=[...Array(4).fill("").map((e=>({...Ue})))]}addColor(e){if(!(this.colors.length<4))throw new Error("Max 4 colors per 'ColorPaletteGroup'");const t=Je(e);t&&this.colors.push({...t})}}const Xe=Ge(0,(({store:e,get:t})=>({setActiveColorIndex(t){if(!Number.isInteger(t))throw new Error("Invalid 'setActiveColorIndex' value. Expecting 'Integer'");if(!(t>=0&&t<=4))throw new Error("Invalid 'setActiveColorIndex' number range. Expecting number between '0-4'");e.set(t)},getActiveColorValue(e){const s=Ze.stores.activeLayer.get();if(!s)throw new Error("No 'activeLayer' selected");return Number.isInteger(e)||(e=t()),s.colors[e]}}))),Ve=Ge([],(({store:e,value:t,get:s,update:n})=>({clear(){Ze.stores.activeLayer.set(void 0),e.set([])},swapLayers(t,s){e.update((e=>e[t]&&e[s]?([e[t],e[s]]=[e[s],e[t]],Ze.stores.activeLayer.set(e[s]),e):e))},replaceColor(t){e.update((e=>{const s=e[t.layerIndex],n=Je(t.hex);return s.colors[t.colorIndex]={hex:n.hex,rgb:n.rgb},Ze.makeLayerActive(e[t.layerIndex]),e}))},swapColors(t){e.update((e=>{Ze.update();const s=e[t.layerIndex].colors,n=e[t.to.layerIndex].colors;let r=s[t.colorIndex],o=n[t.to.colorIndex];return s[t.colorIndex]={...Je(o.hex)},n[t.to.colorIndex]={...Je(r.hex)},Ze.makeLayerActive(e[t.to.layerIndex]),e}))}}))),Ze=Ge({selectedColor:Xe,activeLayer:Ge(),layers:Ve},(({store:e,value:t,get:s})=>({lastChanged:Ge(),stores:t,update(){Ze.lastChanged.set(Math.random()+Date.now())},createLayer({label:e,colors:s}={},n=!1){t.layers.update((t=>{e=e||"palette_"+(t.length+1);const r=new Ye(e,s);return t=n?[...t,r]:[r,...t],Ze.makeLayerActive(r),t}))},removeLayer(e){t.layers.update((s=>{const n=s.indexOf(e);return e==t.activeLayer.get()&&(s[n+1]?Ze.makeLayerActive(s[n+1]):s[n-1]?Ze.makeLayerActive(s[n-1]):t.activeLayer.set(void 0)),s.splice(n,1),s}))},cloneLayer(e){t.layers.update((t=>{let{label:s,colors:n}=e;s+=" copy";const r=new Ye(s,n);return t=[r,...t],Ze.makeLayerActive(r),t}))},cloneActiveLayer(){const e=t.activeLayer.get();e?Ze.cloneLayer(e):Ze.createLayer()},makeLayerActive(e){if(!(e instanceof Ye))throw new Error("Invalid 'ColorPaletteGroupInstance' while setting 'activeLayer'");t.activeLayer.set(e)},layerIndexFromSource(e){if(!(e instanceof Ye))throw new Error("Invalid 'ColorPaletteGroupInstance' in 'layerIndexFromSource'");return t.layers.get().indexOf(e)},updateLayerLabel(e,s){t.layers.update((t=>(e.label=s,Ze.makeLayerActive(e),t)))},import(e,t){const s=Ze.stores.layers.get().length<=0,n=t?e:JSON.parse(e);if(n.version==Oe.palettes.save.version)for(const e of n.data)Ze.createLayer({...e},!0);s&&Ze.stores.layers.length&&Ze.makeLayerActive(Ze.stores.layers.get()[0])},export(e){const t=Ze.stores.layers.get();let s={version:Oe.palettes.save.version,data:[...t]};return e&&(s=JSON.stringify(s)),s},clear(){Ze.stores.activeLayer.set(void 0),Ze.stores.layers.set([])}})));Ze.import('{"version":2,"data":[{"label":"fire","colors":[{"hex":"0F","rgb":[0,0,0]},{"hex":"27","rgb":[252,160,68]},{"hex":"06","rgb":[168,16,0]},{"hex":"07","rgb":[136,20,0]}]},{"label":"purple","colors":[{"hex":"0F","rgb":[0,0,0]},{"hex":"16","rgb":[248,56,0]},{"hex":"13","rgb":[104,68,252]},{"hex":"03","rgb":[68,40,188]}]},{"label":"teal","colors":[{"hex":"0F","rgb":[0,0,0]},{"hex":"31","rgb":[164,228,252]},{"hex":"1C","rgb":[0,136,136]},{"hex":"0C","rgb":[0,64,88]}]},{"label":"blue steele","colors":[{"hex":"0F","rgb":[0,0,0]},{"hex":"12","rgb":[0,88,248]},{"hex":"01","rgb":[0,0,252]},{"hex":"02","rgb":[0,0,188]}]}]}');const Qe=(e,t)=>{const s=e?e.length:0;if(s<1)return[];const n=new Array(Math.ceil(s/t));let r=0,o=0;for(;r<s;)n[o++]=e.slice(r,r+=t);return n},et=e=>(e=Number(e>>>0).toString(2),"00000000".substring(e.length)+e);function tt(e,t){let s=Number(e);return Number(t)&&(s=2),Number(e)+Number(t)>1&&(s=3),s}class st{constructor(){this.future=[],this.past=[],this.present}get last(){return this.present}setPresent(e){this.future=[],this.present=JSON.parse(JSON.stringify(e))}push(e){this.past.push(JSON.parse(JSON.stringify(e)))}undo(){if(this.past.length){const e=this.past.pop();this.future.push(this.present),this.present=e}return this.present}redo(){if(this.future.length){const e=this.future.pop();this.push(this.present),this.present=e}return this.present}}class nt{constructor({label:e,width:t,height:s,data:n}={}){this._isInitialized=!1,this.uuid=Math.random()+Date.now(),this.width=t||128,this.height=s||128,this.label=e||"",this.element=document.createElement("canvas"),this.element.width=this.width,this.element.height=this.height,this.context=this.element.getContext("2d"),this.image=document.createElement("img"),this.data=n,this.history=new st,this.data?this._isInitialized||this.drawFromSource(Ze.stores.activeLayer.get()):this.data=new Array(16).fill().map((e=>new Array(16).fill().map((e=>new Array(8).fill().map((e=>new Array(8).fill().map((e=>0))))))))}updateImageSource(){return this.image.src=this.element.toDataURL("image/png",.1)}setPresent(e){this.history.setPresent(e||this.data)}forceUpdate(){this.drawFromSource(Ze.stores.activeLayer.get())}async toDataURL(e="image/png",t){return await fetch(this.element.toDataURL(e,t)).then((e=>e.blob()))}colorIndexAtPosition(e,t){const s=this.data,n=Math.floor(e/8),r=e%8,o=t%8;return s[Math.floor(t/8)][n][o][r]}setColorIndexAtPosition(e,t,s){const n=this.data,r=Math.floor(e/8),o=e%8,i=t%8;n[Math.floor(t/8)][r][i][o]=s}saveHistory(){this.history.push(this.data)}undo(){const e=this.history.undo();e&&(this.data=e,this.drawFromSource(Ze.stores.activeLayer.get()))}redo(){const e=this.history.redo();e&&(this.data=e,this.drawFromSource(Ze.stores.activeLayer.get()))}drawFromSource(e){e&&(this._isInitialized||(this._isInitialized=!0),this.data.map(((t,s)=>{t.map(((t,n)=>{this.context.save(),this.context.translate(8*n,8*s),t.map(((t,s)=>{this.context.save(),this.context.translate(0,s),t.map(((t,s)=>{this.context.save(),this.context.translate(s,0);let n=e.colors[t];n&&(this.context.fillStyle=`rgb(${n.rgb})`,this.context.fillRect(0,0,1,1),this.context.restore())})),this.context.restore()})),this.context.restore()}))})))}clear(){this.context.clearRect(0,0,this.element.width,this.element.height)}}const rt=Ge([],(({store:e,value:t,get:s})=>({swapLayers(t,s){e.update((e=>e[t]&&e[s]?([e[t],e[s]]=[e[s],e[t]],it.stores.activeLayer.set(e[s]),e):e))}}))),ot=Ge(void 0),it=Ge({activeLayer:ot,layers:rt},(({store:e,value:t,get:s})=>({data:{width:128,height:128},stores:t,createLayer({label:e,data:t}={}){it.stores.layers.update((s=>{e=e||"spritesheet_"+(s.length+1);const n=new nt({label:e,data:t}),r=[n,...s];return it.makeLayerActive(n),r}))},removeLayer(e){it.stores.layers.update((t=>{let s=[...t];const n=s.indexOf(e);return e==it.stores.activeLayer.get()&&(s[n+1]?it.makeLayerActive(s[n+1]):s[n-1]?it.makeLayerActive(s[n-1]):it.stores.activeLayer.set(void 0)),s=s.filter((t=>t!=e)),s}))},cloneLayer(e){it.stores.layers.update((t=>{let{width:s,height:n,label:r,data:o}=e;Array.isArray(o)&&(o=JSON.parse(JSON.stringify(o))),r+=" copy";const i=new nt({width:s,height:n,label:r,data:o});return t=[i,...t],it.makeLayerActive(i),t}))},cloneActiveLayer(){const e=it.stores.activeLayer.get();e?it.cloneLayer(e):it.createLayer()},makeLayerActive(e){if(!(e instanceof nt))throw new Error("Invalid 'CanvasLayerInstance' while setting 'activeLayer'");it.stores.activeLayer.set(e)},updateLayerLabel(e,t){it.stores.layers.update((s=>(e.label=t,s)))},import(e,t){const s=t?e:JSON.parse(e);if(s.version==Oe.spritesheets.save.version)for(const e of s.data)it.createLayer({...e})},export(e){const t=JSON.parse(JSON.stringify(it.stores.layers.get())).map((e=>({label:e.label,data:e.data})));console.log(t);let s={version:Oe.spritesheets.save.version,data:[...t]};return e&&(s=JSON.stringify(s)),s},importCHR(e){(e=>{const t=Qe(new Uint8Array(e),16);let s=[];for(let e of t){let t,n,r=[];for(let s=8;s<16;s++){t=et(e[s-8]),n=et(e[s]);const o=[];for(let e=0;e<8;e++){const s=tt(t[e],n[e]);o.push(s)}r.push(o)}s.push(r)}return s=Qe(s,16),Qe(s,16)})(e).forEach((e=>it.createLayer({data:e})))},exportCHR(){const e=it.stores.activeLayer.get();if(!e||!e.data)throw new Error("Unable to export CHR. No 'activeLayer'");const t=(e=>{const t=[0,85,170,255],s=new ArrayBuffer(4096),n=new Uint8Array(s);let r="";for(let s of e)for(let e of s){let s="",n="";for(let r of e)for(let e of r){const r=t[e];s+=1&r,n+=r>>1&1}r+=s+n}return r.match(/.{8}/g).map(((e,t)=>n[t]=parseInt(e,2))),n})(e.data);return{label:e.label,data:t}},exportAsImage(e,t="image/png",s=1){const n=it.stores.activeLayer.get();if(!(n instanceof nt))throw new Error("Unable to export Image. No 'activeLayer'");return{label:n.label,image:n.element.toBlob((r=>{e.call(null,{blob:r,label:n.label,options:{mimetype:t,quality:s}})}),t,s),options:{type:t}}},clear(){it.stores.activeLayer.set(void 0),it.stores.layers.set([])}})));it.import('\n{"version":1,"data":[{"label":"spritesheet_1","data":[[[[0,0,1,1,1,0,0,0],[0,1,0,0,1,1,0,0],[1,1,0,0,0,1,1,0],[1,1,0,0,0,1,1,0],[1,1,0,0,0,1,1,0],[0,1,1,0,0,1,0,0],[0,0,1,1,1,0,0,0],[0,0,0,0,0,0,0,0]],[[0,0,0,1,1,0,0,0],[0,0,1,1,1,0,0,0],[0,0,0,1,1,0,0,0],[0,0,0,1,1,0,0,0],[0,0,0,1,1,0,0,0],[0,0,0,1,1,0,0,0],[0,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0]],[[0,1,1,1,1,1,0,0],[1,1,0,0,0,1,1,0],[0,0,0,0,1,1,1,0],[0,0,1,1,1,1,0,0],[0,1,1,1,1,0,0,0],[1,1,1,0,0,0,0,0],[1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0]],[[0,1,1,1,1,1,1,0],[0,0,0,0,1,1,0,0],[0,0,0,1,1,0,0,0],[0,0,1,1,1,1,0,0],[0,0,0,0,0,1,1,0],[1,1,0,0,0,1,1,0],[0,1,1,1,1,1,0,0],[0,0,0,0,0,0,0,0]],[[0,0,0,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,1,1,0,1,1,0,0],[1,1,0,0,1,1,0,0],[1,1,1,1,1,1,1,0],[0,0,0,0,1,1,0,0],[0,0,0,0,1,1,0,0],[0,0,0,0,0,0,0,0]],[[1,1,1,1,1,1,0,0],[1,1,0,0,0,0,0,0],[1,1,1,1,1,1,0,0],[0,0,0,0,0,1,1,0],[0,0,0,0,0,1,1,0],[1,1,0,0,0,1,1,0],[0,1,1,1,1,1,0,0],[0,0,0,0,0,0,0,0]],[[0,0,1,1,1,1,0,0],[0,1,1,0,0,0,0,0],[1,1,0,0,0,0,0,0],[1,1,1,1,1,1,0,0],[1,1,0,0,0,1,1,0],[1,1,0,0,0,1,1,0],[0,1,1,1,1,1,0,0],[0,0,0,0,0,0,0,0]],[[1,1,1,1,1,1,1,0],[1,1,0,0,0,1,1,0],[0,0,0,0,1,1,0,0],[0,0,0,1,1,0,0,0],[0,0,1,1,0,0,0,0],[0,0,1,1,0,0,0,0],[0,0,1,1,0,0,0,0],[0,0,0,0,0,0,0,0]],[[0,1,1,1,1,1,0,0],[1,1,0,0,0,1,1,0],[1,1,0,0,0,1,1,0],[0,1,1,1,1,1,0,0],[1,1,0,0,0,1,1,0],[1,1,0,0,0,1,1,0],[0,1,1,1,1,1,0,0],[0,0,0,0,0,0,0,0]],[[0,1,1,1,1,1,0,0],[1,1,0,0,0,1,1,0],[1,1,0,0,0,1,1,0],[0,1,1,1,1,1,1,0],[0,0,0,0,0,1,1,0],[0,0,0,0,1,1,0,0],[0,1,1,1,1,0,0,0],[0,0,0,0,0,0,0,0]],[[0,0,1,1,1,0,0,0],[0,1,1,0,1,1,0,0],[1,1,0,0,0,1,1,0],[1,1,0,0,0,1,1,0],[1,1,1,1,1,1,1,0],[1,1,0,0,0,1,1,0],[1,1,0,0,0,1,1,0],[0,0,0,0,0,0,0,0]],[[1,1,1,1,1,1,0,0],[1,1,0,0,0,1,1,0],[1,1,0,0,0,1,1,0],[1,1,1,1,1,1,0,0],[1,1,0,0,0,1,1,0],[1,1,0,0,0,1,1,0],[1,1,1,1,1,1,0,0],[0,0,0,0,0,0,0,0]],[[0,0,1,1,1,1,0,0],[0,1,1,0,0,1,1,0],[1,1,0,0,0,0,0,0],[1,1,0,0,0,0,0,0],[1,1,0,0,0,0,0,0],[0,1,1,0,0,1,1,0],[0,0,1,1,1,1,0,0],[0,0,0,0,0,0,0,0]],[[1,1,1,1,1,0,0,0],[1,1,0,0,1,1,0,0],[1,1,0,0,0,1,1,0],[1,1,0,0,0,1,1,0],[1,1,0,0,0,1,1,0],[1,1,0,0,1,1,0,0],[1,1,1,1,1,0,0,0],[0,0,0,0,0,0,0,0]],[[1,1,1,1,1,1,1,0],[1,1,0,0,0,0,0,0],[1,1,0,0,0,0,0,0],[1,1,1,1,1,1,0,0],[1,1,0,0,0,0,0,0],[1,1,0,0,0,0,0,0],[1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0]],[[1,1,1,1,1,1,1,0],[1,1,0,0,0,0,0,0],[1,1,0,0,0,0,0,0],[1,1,1,1,1,1,0,0],[1,1,0,0,0,0,0,0],[1,1,0,0,0,0,0,0],[1,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]],[[[0,0,1,1,1,1,1,0],[0,1,1,0,0,0,0,0],[1,1,0,0,0,0,0,0],[1,1,0,0,1,1,1,0],[1,1,0,0,0,1,1,0],[0,1,1,0,0,1,1,0],[0,0,1,1,1,1,1,0],[0,0,0,0,0,0,0,0]],[[1,1,0,0,0,1,1,0],[1,1,0,0,0,1,1,0],[1,1,0,0,0,1,1,0],[1,1,1,1,1,1,1,0],[1,1,0,0,0,1,1,0],[1,1,0,0,0,1,1,0],[1,1,0,0,0,1,1,0],[0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,1],[0,1,0,0,0,0,0,1],[0,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1],[0,1,0,0,0,0,0,1],[0,1,0,0,0,0,0,1],[0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0],[0,0,1,1,1,1,1,0],[0,1,1,0,0,0,1,1],[0,1,1,0,0,0,1,1],[0,1,1,0,0,0,0,0],[0,1,1,0,0,0,0,0],[0,1,1,0,0,0,0,0],[0,1,1,1,1,0,0,0]],[[0,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1],[0,0,0,1,1,0,0,0],[0,0,1,1,1,1,0,0],[0,1,1,1,0,1,1,0],[0,1,1,0,0,0,1,1],[0,1,0,0,0,0,0,1],[0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1],[0,1,0,0,0,0,0,0],[0,1,0,0,0,0,0,0],[0,1,0,0,0,0,0,0],[0,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],[[1,1,0,0,0,1,1,0],[1,1,1,0,1,1,1,0],[1,1,1,1,1,1,1,0],[1,1,1,1,1,1,1,0],[1,1,0,1,0,1,1,0],[1,1,0,0,0,1,1,0],[1,1,0,0,0,1,1,0],[0,0,0,0,0,0,0,0]],[[1,1,0,0,0,1,1,0],[1,1,1,0,0,1,1,0],[1,1,1,1,0,1,1,0],[1,1,1,1,1,1,1,0],[1,1,0,1,1,1,1,0],[1,1,0,0,1,1,1,0],[1,1,0,0,0,1,1,0],[0,0,0,0,0,0,0,0]],[[0,1,1,1,1,1,0,0],[1,1,0,0,0,1,1,0],[1,1,0,0,0,1,1,0],[1,1,0,0,0,1,1,0],[1,1,0,0,0,1,1,0],[1,1,0,0,0,1,1,0],[0,1,1,1,1,1,0,0],[0,0,0,0,0,0,0,0]],[[1,1,1,1,1,1,0,0],[1,1,0,0,0,1,1,0],[1,1,0,0,0,1,1,0],[1,1,0,0,0,1,1,0],[1,1,1,1,1,1,0,0],[1,1,0,0,0,0,0,0],[1,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],[[0,1,1,1,1,1,0,0],[1,1,0,0,0,1,1,0],[1,1,0,0,0,1,1,0],[1,1,0,0,0,1,1,0],[1,1,0,1,1,1,1,0],[1,1,0,0,1,1,0,0],[0,1,1,1,1,0,1,0],[0,0,0,0,0,0,0,0]],[[1,1,1,1,1,1,0,0],[1,1,0,0,0,1,1,0],[1,1,0,0,0,1,1,0],[1,1,0,0,1,1,1,0],[1,1,1,1,1,0,0,0],[1,1,0,1,1,1,0,0],[1,1,0,0,1,1,1,0],[0,0,0,0,0,0,0,0]],[[0,1,1,1,1,0,0,0],[1,1,0,0,1,1,0,0],[1,1,0,0,0,0,0,0],[0,1,1,1,1,1,0,0],[0,0,0,0,0,1,1,0],[1,1,0,0,0,1,1,0],[0,1,1,1,1,1,0,0],[0,0,0,0,0,0,0,0]],[[0,1,1,1,1,1,1,0],[0,0,0,1,1,0,0,0],[0,0,0,1,1,0,0,0],[0,0,0,1,1,0,0,0],[0,0,0,1,1,0,0,0],[0,0,0,1,1,0,0,0],[0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0]],[[1,1,0,0,0,1,1,0],[1,1,0,0,0,1,1,0],[1,1,0,0,0,1,1,0],[1,1,0,0,0,1,1,0],[1,1,0,0,0,1,1,0],[1,1,0,0,0,1,1,0],[0,1,1,1,1,1,0,0],[0,0,0,0,0,0,0,0]],[[1,1,0,0,0,1,1,0],[1,1,0,0,0,1,1,0],[1,1,0,0,0,1,1,0],[1,1,1,0,1,1,1,0],[0,1,1,1,1,1,0,0],[0,0,1,1,1,0,0,0],[0,0,0,1,0,0,0,0],[0,0,0,0,0,0,0,0]]],[[[1,1,0,0,0,1,1,0],[1,1,0,0,0,1,1,0],[1,1,0,1,0,1,1,0],[1,1,1,1,1,1,1,0],[1,1,1,1,1,1,1,0],[1,1,1,0,1,1,1,0],[1,1,0,0,0,1,1,0],[0,0,0,0,0,0,0,0]],[[1,1,0,0,0,1,1,0],[1,1,1,0,1,1,1,0],[0,1,1,1,1,1,0,0],[0,0,1,1,1,0,0,0],[0,1,1,1,1,1,0,0],[1,1,1,0,1,1,1,0],[1,1,0,0,0,1,1,0],[0,0,0,0,0,0,0,0]],[[0,1,1,0,0,1,1,0],[0,1,1,0,0,1,1,0],[0,1,1,0,0,1,1,0],[0,0,1,1,1,1,0,0],[0,0,0,1,1,0,0,0],[0,0,0,1,1,0,0,0],[0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0]],[[1,1,1,1,1,1,1,0],[0,0,0,0,1,1,1,0],[0,0,0,1,1,1,0,0],[0,0,1,1,1,0,0,0],[0,1,1,1,0,0,0,0],[1,1,1,0,0,0,0,0],[1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],[[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1]],[[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2]],[[3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3]],[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,0],[0,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,1,0,0,0,1,0,0],[0,0,1,0,1,0,0,0],[0,0,0,1,0,0,0,0],[0,0,1,0,1,0,0,0],[0,1,0,0,0,1,0,0],[0,0,0,0,0,0,0,0]],[[1,3,3,3,3,3,3,3],[1,3,3,3,3,3,3,3],[1,3,3,3,3,3,3,3],[1,3,3,3,3,3,3,3],[1,3,3,3,3,3,3,3],[1,3,3,3,3,3,3,3],[1,3,3,3,3,3,3,3],[1,3,3,3,3,3,3,3]],[[0,0,0,1,1,0,0,0],[0,0,1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,0,1,1,0,0,0],[0,0,0,1,1,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,1,1,0,0,0]],[[1,2,2,2,2,2,1,1],[1,1,2,2,2,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,2],[1,1,1,1,1,1,1,2],[1,1,1,1,1,1,1,2],[1,1,1,1,1,1,1,2],[3,3,3,3,3,3,3,3]],[[1,2,2,2,2,2,2,2],[1,2,2,2,2,2,2,2],[1,2,2,2,2,2,2,2],[1,1,2,2,2,2,2,1],[1,1,1,2,2,2,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[3,3,3,3,3,3,3,3]],[[0,0,1,1,3,0,0,0],[0,1,1,1,1,3,0,0],[0,1,1,1,1,3,0,0],[0,1,1,1,1,3,0,0],[0,1,1,1,1,3,0,0],[0,1,1,1,1,3,0,0],[0,0,1,1,3,0,0,0],[0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,3,3],[0,0,0,0,0,3,1,2],[0,0,0,0,3,1,2,2],[0,0,0,0,3,1,2,2],[0,0,0,0,3,2,2,2],[0,0,0,0,3,2,2,2],[0,0,0,0,0,3,2,2],[0,0,0,0,0,0,3,3]]],[[[0,0,0,0,0,0,0,3],[0,0,0,0,0,0,3,2],[0,0,0,0,0,3,2,2],[0,0,0,0,3,2,2,2],[0,0,0,3,2,2,2,2],[0,0,3,2,2,2,2,2],[0,3,2,2,2,2,2,2],[3,2,2,2,2,2,2,2]],[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,3,3,3],[0,0,3,3,3,2,2,2],[3,3,2,2,2,2,2,2]],[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[3,3,3,0,0,0,0,0],[2,2,2,3,3,3,0,0],[2,2,2,2,2,2,3,3]],[[3,0,0,0,0,0,0,0],[2,3,0,0,0,0,0,0],[2,2,3,0,0,0,0,0],[2,2,2,3,0,0,0,0],[2,2,2,2,3,0,0,0],[2,2,2,2,2,3,0,0],[2,2,2,2,2,2,3,0],[2,2,2,2,2,2,2,3]],[[2,2,2,2,2,3,2,2],[2,2,2,2,3,3,3,2],[2,2,2,2,3,3,3,2],[2,2,2,2,3,3,3,2],[2,3,3,2,3,3,3,2],[2,3,3,2,2,3,2,2],[2,3,3,2,2,2,2,2],[2,3,3,2,2,2,2,2]],[[0,0,0,0,0,3,3,3],[0,0,0,0,3,1,1,1],[0,0,0,3,1,1,1,1],[0,0,0,1,1,1,1,1],[0,3,3,1,1,1,1,1],[3,1,1,1,1,1,1,1],[3,1,1,1,1,1,1,1],[0,3,1,1,1,1,1,1]],[[0,0,0,0,0,0,3,3],[0,0,0,0,0,3,1,1],[0,0,0,3,3,1,1,1],[0,0,3,1,1,1,1,1],[0,0,3,1,1,1,1,1],[0,0,3,1,1,1,1,1],[0,3,1,1,1,2,2,1],[3,1,1,1,2,1,1,1]],[[1,1,1,1,1,1,1,3],[1,1,2,1,1,1,1,3],[1,2,1,1,1,1,3,0],[1,1,1,1,3,3,0,0],[1,1,1,3,0,0,0,0],[1,1,1,1,3,0,0,0],[1,1,1,3,0,0,0,0],[3,3,3,0,0,0,0,0]],[[3,0,0,3,0,0,0,0],[3,0,3,1,3,0,0,0],[1,3,1,1,3,0,0,0],[1,1,1,1,3,0,3,0],[1,1,1,1,1,3,1,3],[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,3,0]],[[0,0,3,1,1,2,1,1],[0,0,0,3,1,1,2,1],[0,0,0,0,3,1,1,2],[0,0,0,0,3,1,1,1],[0,0,0,0,0,3,3,3],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],[[0,0,3,1,1,2,1,1],[0,3,1,1,1,2,2,1],[0,3,1,1,2,2,1,1],[3,1,1,1,2,1,1,1],[3,1,1,2,2,1,1,1],[3,1,1,2,2,1,1,1],[0,3,1,1,2,2,1,1],[0,0,3,1,2,2,1,1]],[[1,2,1,1,1,1,1,1],[2,1,1,1,1,1,1,1],[2,2,1,1,1,1,2,1],[1,2,2,2,2,2,1,1],[1,1,2,2,2,1,1,1],[1,1,1,1,1,1,1,1],[3,3,1,1,1,1,3,3],[0,0,3,3,3,3,0,0]],[[1,1,1,1,1,3,0,0],[1,1,1,1,1,1,3,0],[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,1,0],[1,1,1,1,1,3,3,0],[3,1,1,3,3,0,0,0],[0,3,3,0,0,0,0,0],[0,0,0,0,0,0,0,0]],[[3,3,0,0,0,0,0,0],[2,2,3,0,0,0,0,0],[2,2,2,3,0,0,0,0],[2,2,2,3,0,0,0,0],[2,2,2,3,0,0,0,0],[2,2,2,3,0,0,0,0],[2,2,3,0,0,0,0,0],[3,3,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,1,1,1,1,1,1],[0,1,1,1,1,1,1,1],[1,1,1,2,2,2,0,0],[1,1,2,2,2,2,2,0]],[[1,2,2,2,3,2,2,2],[1,2,2,3,3,3,2,2],[1,2,2,2,3,2,2,2],[1,0,2,2,2,2,2,0],[1,0,0,2,2,2,0,0],[1,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0]]],[[[3,3,3,3,3,3,3,2],[3,3,3,3,3,3,3,2],[3,3,3,3,3,3,3,2],[3,3,3,3,3,3,3,2],[3,3,3,3,3,3,3,2],[3,3,3,3,3,3,3,2],[3,3,3,3,3,3,3,2],[3,3,3,3,3,3,3,2]],[[0,0,0,0,1,0,0,0],[0,0,0,1,2,1,0,0],[0,0,1,2,2,1,0,0],[1,1,2,2,2,1,0,0],[2,2,2,2,2,2,1,1],[2,1,2,2,2,2,2,2],[1,2,1,2,2,2,2,1],[2,2,1,2,2,1,1,2]],[[3,1,1,1,1,1,1,3],[3,1,1,1,1,1,1,3],[3,1,1,1,1,1,1,3],[3,1,1,1,1,1,1,3],[2,1,1,1,1,1,1,3],[2,1,1,1,1,1,1,3],[2,1,1,1,1,1,1,3],[2,1,1,1,1,1,1,3]],[[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,1,3]],[[0,1,1,1,1,1,1,1],[1,2,2,2,2,2,2,2],[1,2,2,2,2,2,2,2],[1,2,2,1,1,2,2,2],[1,2,2,1,1,3,2,2],[1,2,2,2,3,3,2,2],[1,2,2,2,2,2,2,2],[1,2,2,2,2,2,2,2]],[[1,1,1,1,1,1,1,1],[2,2,2,2,2,2,2,3],[2,2,2,2,2,2,2,3],[3,3,3,3,3,3,3,3],[2,2,2,3,2,2,2,2],[2,2,2,3,2,2,2,2],[2,2,2,3,2,2,2,2],[3,3,3,3,3,3,3,3]],[[1,2,2,2,2,2,2,2],[1,2,2,2,2,2,2,2],[1,2,2,2,2,2,2,2],[1,2,2,2,2,2,2,2],[1,2,2,2,2,2,2,2],[1,2,2,2,2,2,2,2],[1,2,2,2,2,2,2,2],[1,2,2,2,2,2,2,2]],[[2,2,2,2,2,2,2,3],[2,2,2,2,2,2,2,3],[2,2,2,2,2,2,2,3],[3,3,3,3,3,3,3,3],[2,2,2,3,2,2,2,2],[2,2,2,3,2,2,2,2],[2,2,2,3,2,2,2,2],[3,3,3,3,3,3,3,3]],[[2,2,2,2,2,2,2,1],[2,2,2,2,2,2,2,1],[2,2,2,2,2,2,2,1],[2,2,2,2,2,2,2,1],[2,2,2,2,2,2,2,1],[2,2,2,2,2,2,2,1],[2,2,2,2,2,2,2,1],[2,2,2,2,2,2,2,1]],[[1,1,1,1,1,1,1,0],[2,2,2,2,2,2,2,3],[2,2,2,2,2,2,2,3],[2,2,2,1,1,2,2,3],[2,2,2,1,1,3,2,3],[2,2,2,2,3,3,2,3],[2,2,2,2,2,2,2,3],[2,2,2,2,2,2,2,3]],[[2,2,2,2,2,2,2,3],[2,2,2,2,2,2,2,3],[2,2,2,2,2,2,2,3],[2,2,2,2,2,2,2,3],[2,2,2,2,2,2,2,3],[2,2,2,2,2,2,2,3],[2,2,2,2,2,2,2,3],[2,2,2,2,2,2,2,3]],[[0,0,3,3,3,3,3,3],[0,3,3,1,1,1,1,1],[0,3,1,1,1,1,1,1],[3,3,1,1,1,1,1,1],[3,1,1,1,1,1,1,1],[3,1,1,1,1,1,1,1],[3,1,1,1,1,1,1,1],[3,1,1,1,1,1,1,1]],[[3,1,1,1,1,1,1,1],[3,1,1,1,1,1,1,1],[3,1,1,1,1,1,1,1],[3,1,1,1,1,1,1,1],[3,1,1,1,1,1,1,1],[3,1,1,1,1,1,1,3],[0,3,1,1,1,1,3,0],[0,0,3,3,3,3,0,0]],[[3,3,3,3,3,3,3,3],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1]],[[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,3],[3,1,1,1,1,1,3,0],[0,3,3,3,3,3,0,0]],[[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,3],[3,1,1,1,1,1,3,2],[2,3,3,3,3,3,2,2]]],[[[3,3,3,3,3,0,0,0],[1,1,1,1,1,3,0,0],[1,1,1,1,1,1,3,0],[1,1,1,1,1,1,3,0],[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,1,3]],[[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,1,3],[3,1,1,1,1,1,1,3],[0,3,1,1,1,1,3,0],[0,0,3,3,3,3,0,0]],[[2,2,2,2,2,2,2,2],[2,2,2,2,3,2,2,2],[2,2,2,2,3,2,2,2],[2,2,2,2,3,2,2,2],[2,2,2,3,2,2,2,2],[2,2,2,3,2,2,2,2],[2,2,2,3,2,2,2,2],[2,2,2,2,2,2,2,2]],[[0,2,2,2,2,2,2,2],[2,1,1,1,1,1,1,1],[2,1,3,1,1,1,1,1],[2,1,1,1,1,2,2,2],[2,1,1,1,2,2,3,3],[2,1,1,1,2,2,3,1],[2,1,1,1,2,2,3,1],[2,1,1,1,1,3,3,1]],[[2,2,2,2,2,2,2,0],[1,1,1,1,1,1,1,3],[1,1,1,1,1,3,1,3],[2,2,1,1,1,1,1,3],[3,2,2,1,1,1,1,3],[1,2,2,3,1,1,1,3],[1,2,2,3,1,1,1,3],[2,2,2,3,1,1,1,3]],[[2,1,1,1,1,1,1,2],[2,1,1,1,1,1,1,2],[2,1,1,1,1,1,1,1],[2,1,1,1,1,1,1,2],[2,1,1,1,1,1,1,2],[2,1,3,1,1,1,1,1],[2,1,1,1,1,1,1,1],[3,3,3,3,3,3,3,3]],[[2,3,3,3,1,1,1,3],[2,3,1,1,1,1,1,3],[3,3,1,1,1,1,1,3],[2,1,1,1,1,1,1,3],[2,3,1,1,1,1,1,3],[3,3,1,1,1,3,1,3],[1,1,1,1,1,1,1,3],[3,3,3,3,3,3,3,3]],[[0,3,3,3,3,3,3,3],[3,2,2,2,2,2,2,2],[3,2,3,2,2,2,2,2],[3,2,2,2,2,2,2,2],[3,2,2,2,2,2,2,2],[3,2,2,2,2,2,2,2],[3,2,2,2,2,2,2,2],[3,2,2,2,2,2,2,2]],[[3,3,3,3,3,3,3,0],[2,2,2,2,2,2,2,3],[2,2,2,2,2,3,2,3],[2,2,2,2,2,2,2,3],[2,2,2,2,2,2,2,3],[2,2,2,2,2,2,2,3],[2,2,2,2,2,2,2,3],[2,2,2,2,2,2,2,3]],[[3,2,2,2,2,2,2,2],[3,2,2,2,2,2,2,2],[3,2,2,2,2,2,2,2],[3,2,2,2,2,2,2,2],[3,2,2,2,2,2,2,2],[3,2,3,2,2,2,2,2],[3,2,2,2,2,2,2,2],[0,3,3,3,3,3,3,3]],[[2,2,2,2,2,2,2,3],[2,2,2,2,2,2,2,3],[2,2,2,2,2,2,2,3],[2,2,2,2,2,2,2,3],[2,2,2,2,2,2,2,3],[2,2,2,2,2,3,2,3],[2,2,2,2,2,2,2,3],[3,3,3,3,3,3,3,0]],[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[1,1,1,1,1,1,0,0],[1,1,1,1,1,1,1,0],[0,0,2,2,2,1,1,1],[0,2,2,2,2,2,1,1]],[[2,2,2,3,2,2,2,1],[2,2,3,3,3,2,2,1],[2,2,2,3,2,2,2,1],[0,2,2,2,2,2,0,1],[0,0,2,2,2,0,0,1],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,1]],[[1,1,3,0,1,1,1,1],[2,2,3,0,1,2,2,2],[2,2,3,0,1,2,2,2],[2,2,3,0,1,2,2,2],[2,2,3,0,1,2,2,2],[2,2,3,0,1,2,2,2],[3,3,3,0,3,3,3,3],[0,0,0,0,0,0,0,0]],[[1,1,1,1,1,1,3,0],[1,2,2,2,2,2,3,0],[1,2,2,2,2,2,3,0],[1,2,2,2,2,2,3,0],[1,2,2,2,2,2,3,0],[1,2,2,2,2,2,3,0],[3,3,3,3,3,3,3,0],[0,0,0,0,0,0,0,0]],[[1,2,2,2,2,2,2,2],[1,2,2,2,2,2,2,2],[1,2,2,2,2,2,2,2],[1,2,2,1,1,2,2,2],[1,2,2,1,1,3,2,2],[1,2,2,2,3,3,2,2],[1,2,2,2,2,2,2,2],[0,3,3,3,3,3,3,3]]],[[[3,3,3,3,3,3,3,3],[3,1,1,1,1,1,1,1],[3,2,2,2,2,2,1,1],[3,1,1,1,2,2,1,1],[3,1,1,1,2,2,1,1],[3,1,1,1,2,2,1,1],[3,1,1,1,2,2,1,1],[3,1,1,1,2,2,1,1]],[[3,3,3,3,3,3,3,3],[1,1,1,1,1,1,1,1],[1,1,1,1,2,2,2,2],[1,1,1,1,2,1,1,2],[1,1,1,1,2,1,1,2],[1,1,1,1,2,1,1,2],[1,1,1,1,2,1,1,2],[1,1,1,1,2,1,1,2]],[[3,3,3,3,3,3,3,3],[1,1,1,1,1,1,1,1],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2]],[[3,3,3,3,3,3,3,3],[1,1,1,1,1,1,1,3],[2,2,2,2,2,2,2,3],[2,1,2,1,2,1,1,3],[2,2,1,2,1,1,1,3],[2,1,2,1,2,1,1,3],[2,2,1,2,1,1,1,3],[2,1,2,1,2,1,1,3]],[[3,1,1,1,2,2,1,1],[3,1,1,1,2,2,1,1],[3,1,1,1,2,2,1,1],[3,1,1,1,2,2,1,1],[3,1,1,1,2,2,1,1],[3,1,1,1,2,2,1,1],[3,3,3,3,3,3,3,3],[0,0,3,3,3,3,3,3]],[[1,1,1,1,2,1,1,2],[1,1,1,1,2,1,1,2],[1,1,1,1,2,1,1,2],[1,1,1,1,2,1,1,2],[1,1,1,1,2,1,1,2],[1,1,1,1,2,1,1,2],[3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3]],[[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3]],[[2,2,1,2,1,1,1,3],[2,1,2,1,2,1,1,3],[2,2,1,2,1,1,1,3],[2,1,2,1,2,1,1,3],[2,2,1,2,1,1,1,3],[2,1,2,1,2,1,1,3],[3,3,3,3,3,3,3,3],[3,3,3,3,3,3,0,0]],[[0,0,3,1,1,1,2,2],[0,0,3,1,1,1,2,2],[0,0,3,1,1,1,2,2],[0,0,3,1,1,1,2,2],[0,0,3,1,1,1,2,2],[0,0,3,1,1,1,2,2],[0,0,3,1,1,1,2,2],[0,0,3,1,1,1,2,2]],[[1,1,1,1,1,2,1,1],[1,1,1,1,1,2,1,1],[1,1,1,1,1,2,1,1],[1,1,1,1,1,2,1,1],[1,1,1,1,1,2,1,1],[1,1,1,1,1,2,1,1],[1,1,1,1,1,2,1,1],[1,1,1,1,1,2,1,1]],[[1,2,1,1,1,3,0,0],[2,1,2,1,1,3,0,0],[1,2,1,1,1,3,0,0],[2,1,2,1,1,3,0,0],[1,2,1,1,1,3,0,0],[2,1,2,1,1,3,0,0],[1,2,1,1,1,3,0,0],[2,1,2,1,1,3,0,0]],[[0,0,0,3,3,3,3,3],[0,0,3,2,2,2,2,2],[0,3,2,2,2,2,2,2],[0,3,2,2,2,2,2,2],[3,2,2,2,2,2,2,2],[3,2,2,2,2,2,2,2],[3,2,2,2,2,2,2,2],[3,2,2,2,2,2,2,1]],[[3,3,3,3,3,3,3,3],[1,2,2,2,2,2,2,2],[1,2,2,2,2,2,2,2],[1,1,2,2,2,2,2,2],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,2],[1,1,1,1,1,1,1,2]],[[3,3,3,3,3,3,3,3],[2,1,1,1,1,1,1,1],[2,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[2,2,2,2,2,1,1,1],[2,2,2,2,2,2,1,1],[2,2,2,2,2,2,1,1]],[[3,3,3,3,3,3,3,3],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[1,2,2,2,2,2,2,1],[1,1,2,2,2,2,1,1],[1,1,1,1,1,1,1,1]],[[3,3,3,3,3,0,0,0],[1,1,1,1,1,3,0,0],[1,1,1,1,1,1,3,0],[1,1,1,1,1,1,3,0],[1,1,1,2,2,2,1,3],[1,1,2,2,2,2,2,3],[1,2,2,2,2,2,2,3],[1,2,2,2,2,2,2,3]]],[[[3,2,2,2,2,2,1,1],[3,1,1,1,1,1,1,1],[3,1,1,1,1,1,1,1],[3,1,1,1,1,1,1,1],[3,1,1,1,1,1,1,1],[3,1,1,1,1,1,1,1],[0,3,3,1,1,1,1,1],[0,0,0,3,3,3,3,3]],[[1,1,1,1,1,1,2,2],[1,1,1,1,1,1,2,2],[1,1,1,1,1,1,2,2],[1,1,1,1,1,1,2,2],[1,1,1,1,1,1,1,2],[1,1,1,1,1,1,1,2],[1,1,1,1,1,1,1,1],[3,3,3,3,3,3,3,3]],[[2,2,2,2,2,2,2,1],[2,2,2,2,2,2,2,1],[2,2,2,2,2,2,2,1],[2,2,2,2,2,2,2,1],[2,2,2,2,2,2,1,1],[2,2,2,2,2,2,1,1],[2,2,2,2,2,1,1,1],[3,3,3,3,3,3,3,3]],[[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[3,3,3,3,3,3,3,3]],[[1,2,2,2,2,2,2,3],[1,1,2,2,2,2,2,3],[1,1,1,2,2,2,1,3],[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,3,3],[3,3,3,3,3,3,3,0]],[[3,1,1,1,1,1,1,1],[3,1,1,1,1,1,1,1],[3,1,1,1,1,1,1,1],[3,1,1,1,1,1,1,1],[3,1,1,1,1,1,1,1],[3,1,1,1,1,2,1,1],[3,2,1,1,2,1,2,1],[3,1,2,2,1,1,1,2]],[[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,1,3],[1,1,2,1,1,1,1,3],[1,2,1,2,1,1,2,3],[2,1,1,1,2,2,1,3]],[[0,1,1,1,0,1,1,1],[0,1,1,1,0,1,1,1],[0,1,1,1,0,1,1,1],[0,1,1,1,0,1,1,1],[0,3,3,3,0,3,3,3],[2,3,3,3,2,3,3,3],[2,3,3,3,2,3,3,3],[2,3,3,3,2,3,3,3]],[[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[3,3,3,3,3,3,3,3]],[[2,3,3,3,2,3,3,3],[2,3,3,3,2,3,3,3],[2,3,3,3,2,3,3,3],[0,3,3,3,0,3,3,3],[0,2,2,2,0,2,2,2],[0,2,2,2,0,2,2,2],[0,2,2,2,0,2,2,2],[0,2,2,2,0,2,2,2]],[[2,2,2,2,2,2,2,3],[2,2,2,2,2,2,2,3],[2,2,2,2,2,2,2,3],[2,2,2,1,1,2,2,3],[2,2,2,1,1,3,2,3],[2,2,2,2,3,3,2,3],[2,2,2,2,2,2,2,3],[3,3,3,3,3,3,3,0]],[[0,0,1,0,0,0,0,0],[0,1,3,1,1,0,0,2],[0,1,3,1,1,1,1,3],[1,3,1,1,1,1,1,2],[1,3,1,1,1,1,1,2],[1,3,1,1,1,1,1,2],[1,3,1,1,1,1,1,2],[1,3,1,1,1,1,1,2]],[[0,0,0,0,0,1,0,0],[3,0,0,1,1,0,1,0],[3,1,1,1,1,0,1,0],[3,1,1,1,1,1,0,1],[3,1,1,1,1,1,0,1],[3,1,1,1,1,1,0,1],[3,1,1,1,1,1,0,1],[3,1,1,1,1,1,0,1]],[[0,1,3,1,1,1,1,2],[0,0,3,1,1,0,0,2],[0,0,1,0,0,0,0,3],[0,0,0,0,0,0,0,2],[0,0,0,0,0,0,0,3],[0,0,0,0,0,0,0,2],[0,0,0,0,0,0,0,3],[0,0,0,0,0,0,0,2]],[[3,1,1,1,1,0,1,0],[3,0,0,0,1,0,1,0],[3,0,0,0,0,1,0,0],[3,0,0,0,0,0,0,0],[3,0,0,0,0,0,0,0],[3,0,0,0,0,0,0,0],[3,0,0,0,0,0,0,0],[3,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,1,2],[0,0,0,0,0,1,0,2],[0,0,0,0,0,2,2,0],[0,0,0,1,2,0,0,0],[0,0,0,2,2,0,0,0],[0,1,2,0,0,0,0,0],[1,0,2,0,0,0,0,0],[2,2,0,0,0,0,0,0]]],[[[0,0,0,0,1,2,1,1],[0,0,0,0,1,2,1,1],[2,2,1,1,1,2,1,1],[2,2,2,2,1,2,1,1],[3,3,3,3,1,2,1,1],[0,0,0,0,1,2,1,1],[0,0,0,0,1,2,1,1],[0,0,0,0,1,2,1,2]],[[1,2,2,3,0,0,0,0],[2,2,2,3,0,0,0,0],[2,2,2,3,1,1,1,1],[2,2,2,3,2,2,2,2],[2,2,2,3,3,3,3,3],[2,2,2,3,0,0,0,0],[2,2,2,3,0,0,0,0],[1,2,2,3,0,0,0,0]],[[2,2,1,1,1,1,1,1],[2,1,1,1,1,2,2,2],[1,1,1,2,2,1,1,1],[3,1,2,2,1,1,1,1],[2,3,2,1,1,2,2,2],[2,3,2,1,1,2,2,2],[2,3,2,1,2,2,2,2],[3,2,2,1,2,2,2,2]],[[1,2,3,1,2,2,2,2],[1,3,1,1,1,1,2,2],[1,3,1,2,2,2,1,2],[1,1,2,2,2,2,2,3],[1,1,2,2,2,2,2,3],[1,2,2,2,2,2,3,3],[1,2,2,2,3,3,3,3],[2,3,3,3,3,3,3,2]],[[1,1,1,1,1,1,3,2],[2,2,2,2,2,2,3,3],[2,2,2,2,1,1,1,3],[1,2,2,1,2,2,2,1],[2,3,1,1,2,2,2,2],[2,3,1,2,2,2,2,2],[2,2,3,2,2,2,2,2],[2,2,3,3,2,2,2,3]],[[2,2,3,3,3,3,1,3],[2,2,3,3,3,1,3,3],[2,2,2,3,3,1,2,3],[2,2,3,3,1,2,2,3],[2,3,3,3,1,2,3,3],[1,1,1,1,2,2,3,3],[1,2,2,2,2,3,3,2],[3,3,3,3,3,3,3,2]],[[3,3,3,3,3,3,3,3],[3,1,1,1,1,1,1,1],[3,1,1,1,1,1,1,1],[3,1,1,1,1,1,1,1],[3,1,1,1,1,1,1,1],[3,2,2,2,2,2,2,2],[3,2,2,2,2,2,2,2],[3,1,1,1,1,1,1,1]],[[3,3,3,3,3,3,3,0],[1,1,1,1,1,1,3,3],[1,1,1,1,1,1,3,3],[1,1,1,1,1,1,3,3],[1,1,1,1,1,1,3,3],[2,2,2,2,2,2,3,3],[2,2,2,2,2,2,3,3],[1,1,1,1,1,1,3,3]],[[0,0,0,0,0,0,0,0],[3,3,3,3,3,3,3,3],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2]],[[0,0,3,1,1,1,2,2],[3,3,3,3,1,1,2,2],[1,1,1,1,3,1,2,2],[1,1,1,1,3,1,2,2],[1,1,1,1,3,1,2,2],[1,1,1,1,1,3,2,2],[2,2,2,2,2,3,2,2],[2,2,2,2,2,3,2,2]],[[3,1,1,1,1,1,1,1],[3,1,1,1,1,1,1,1],[3,1,1,1,1,1,1,1],[3,1,1,1,1,1,1,1],[3,2,2,2,2,2,2,2],[3,1,1,1,1,1,1,1],[3,1,1,1,1,1,1,1],[3,1,1,1,1,1,1,1]],[[1,1,1,1,1,1,3,3],[1,1,1,1,1,1,3,3],[1,1,1,1,1,1,3,3],[1,1,1,1,1,1,3,3],[2,2,2,2,2,2,3,3],[1,1,1,1,1,1,3,3],[1,1,1,1,1,1,3,3],[1,1,1,1,1,1,3,3]],[[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[2,2,2,2,2,2,2,2],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1]],[[1,1,1,1,1,3,2,2],[1,1,1,1,1,3,2,2],[1,1,1,1,1,1,3,2],[1,1,1,1,1,1,3,2],[1,1,1,1,1,1,3,2],[2,2,2,2,2,2,3,2],[1,1,1,1,1,1,3,2],[1,1,1,1,1,1,3,2]],[[3,1,1,1,1,1,1,1],[3,2,2,2,2,2,2,2],[3,2,2,2,2,2,2,2],[3,2,2,2,2,2,2,2],[3,2,2,2,2,2,2,2],[3,2,2,2,2,2,2,2],[3,2,2,2,2,2,2,2],[3,2,2,2,2,2,2,2]],[[1,1,1,1,1,1,3,3],[2,2,2,2,2,2,3,3],[2,2,2,2,2,2,3,3],[2,2,2,2,2,2,3,3],[2,2,2,2,2,2,3,3],[2,2,2,2,2,2,3,3],[2,2,2,2,2,2,3,3],[2,2,2,2,2,2,3,3]]],[[[2,2,2,2,2,2,3,2],[2,2,2,2,2,2,3,2],[2,2,2,2,2,2,3,2],[2,2,2,2,2,2,3,2],[2,2,2,2,2,2,3,2],[2,2,2,2,2,2,3,2],[2,2,2,2,2,3,2,2],[2,2,2,2,2,3,2,2]],[[3,2,2,2,2,2,2,2],[3,2,2,2,2,2,2,2],[3,2,1,2,1,2,1,2],[3,1,2,1,2,1,2,1],[3,2,1,2,1,2,1,2],[3,1,1,1,1,1,1,1],[3,1,1,1,1,1,1,1],[3,3,3,3,3,3,3,3]],[[2,2,2,2,2,2,3,3],[2,2,2,2,2,2,3,3],[1,2,1,2,1,2,3,3],[2,1,2,1,2,1,3,3],[1,2,1,2,1,2,3,3],[1,1,1,1,1,1,3,3],[1,1,1,1,1,1,3,3],[3,3,3,3,3,3,3,0]],[[2,2,2,2,2,2,2,2],[2,1,2,1,2,1,2,1],[1,2,1,2,1,2,1,2],[2,1,2,1,2,1,2,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[3,3,3,3,3,3,3,3],[0,0,0,0,0,0,0,0]],[[2,2,2,2,2,3,2,2],[2,1,2,1,2,3,2,2],[1,2,1,2,1,3,2,2],[2,1,2,1,3,1,2,2],[1,1,1,1,3,1,2,2],[1,1,1,1,3,1,2,2],[3,3,3,3,1,1,2,2],[0,0,3,1,1,1,2,2]],[[2,2,3,3,3,3,3,3],[2,2,3,3,3,3,3,3],[2,2,3,3,3,3,3,3],[2,2,3,3,3,3,3,3],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[3,3,3,3,3,3,3,3]],[[2,3,3,3,3,3,3,2],[2,3,3,3,3,3,2,2],[2,3,3,3,3,3,2,2],[2,3,3,3,3,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[3,3,3,3,3,3,3,3]],[[2,2,2,3,3,3,3,3],[2,2,2,2,3,3,3,3],[2,2,2,2,3,3,3,3],[2,2,2,2,2,3,3,3],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[3,3,3,3,3,3,3,3]],[[3,3,3,3,3,3,3,2],[3,3,3,3,3,3,2,2],[3,3,3,3,3,3,2,2],[3,3,3,3,3,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[3,3,3,3,3,3,3,3]],[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],[[0,0,0,1,1,0,0,0],[0,0,0,1,1,0,0,0],[0,0,0,1,1,0,0,0],[0,0,0,1,1,0,0,0],[0,0,0,1,1,0,0,0],[0,0,0,1,1,0,0,0],[0,0,0,1,1,0,0,0],[0,0,0,1,1,0,0,0]],[[2,2,2,2,2,3,3,3],[2,2,2,3,3,3,3,3],[2,2,3,3,3,3,3,3],[3,3,3,3,3,3,3,3],[2,3,3,3,3,3,3,3],[2,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3]],[[3,3,3,2,2,2,2,3],[3,3,3,3,3,2,2,3],[3,3,3,3,3,3,2,3],[3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,2],[3,3,3,3,3,3,3,2],[3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3]],[[1,1,1,1,0,0,0,0],[2,2,2,1,0,0,0,0],[2,2,2,1,0,0,0,0],[2,2,2,1,0,0,0,0],[2,2,2,1,0,0,0,0],[2,2,2,1,0,0,0,0],[2,2,2,1,0,0,0,0],[3,3,3,1,1,1,1,1]],[[0,0,0,1,1,1,1,1],[0,0,0,1,2,2,2,2],[0,0,0,1,2,2,2,2],[0,0,0,1,2,2,2,2],[0,0,0,1,2,2,2,2],[0,0,0,1,2,2,2,2],[0,0,0,1,2,2,2,2],[1,1,1,1,3,3,3,3]],[[1,2,0,1,2,0,1,0],[1,2,0,1,2,0,1,0],[1,2,2,1,2,2,1,0],[1,1,1,1,1,1,1,0],[1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0],[2,2,2,2,2,2,2,0],[0,0,0,0,0,0,0,0]]],[[[0,0,0,0,1,2,1,2],[0,0,0,0,1,2,1,2],[2,2,1,1,1,2,1,2],[2,2,2,2,1,2,1,2],[3,3,3,3,1,2,1,1],[0,0,0,0,1,2,1,1],[0,0,0,0,1,2,1,1],[0,0,0,0,1,2,1,1]],[[1,2,2,3,0,0,0,0],[1,2,2,3,0,0,0,0],[1,2,2,3,1,1,1,1],[1,2,2,3,2,2,2,2],[1,2,2,3,3,3,3,3],[1,2,2,3,0,0,0,0],[1,2,2,3,0,0,0,0],[1,2,2,3,0,0,0,0]],[[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,1]],[[1,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0]],[[2,2,2,2,3,2,2,2],[3,2,2,2,3,2,2,2],[3,2,2,3,2,2,2,3],[3,3,2,3,2,2,2,3],[2,3,2,3,2,2,3,3],[2,3,2,3,2,2,3,1],[2,1,3,3,2,2,3,1],[2,2,1,1,3,3,3,1]],[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,1,1,1],[0,0,0,0,1,1,1,1],[0,0,0,0,1,1,2,2],[0,0,0,1,1,2,1,1],[0,0,0,1,1,2,1,1],[0,0,0,1,1,2,1,1]],[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[1,3,3,0,0,0,0,0],[1,1,3,3,0,0,0,0],[1,1,3,3,0,0,0,0],[3,1,1,3,3,0,0,0],[3,1,1,3,3,0,0,0],[3,1,1,3,3,0,0,0]],[[0,0,0,1,1,2,1,1],[0,0,0,1,1,2,1,1],[0,0,0,1,1,2,1,1],[0,0,0,1,1,2,1,1],[0,0,0,1,1,2,1,1],[0,0,0,0,1,1,3,3],[0,0,0,0,1,1,1,1],[0,0,0,0,0,1,1,1]],[[3,1,1,3,3,0,0,0],[3,1,1,3,3,0,0,0],[3,1,1,3,3,0,0,0],[3,1,1,3,3,0,0,0],[3,1,1,3,3,0,0,0],[1,1,3,3,0,0,0,0],[1,1,3,3,0,0,0,0],[1,3,3,0,0,0,0,0]],[[1,1,1,1,2,2,2,3],[2,2,2,1,2,2,2,3],[2,2,2,1,2,2,2,3],[2,2,2,1,3,3,3,3],[2,2,2,1,2,2,2,2],[2,2,2,1,2,2,2,2],[2,2,2,1,2,2,2,2],[3,3,3,1,1,1,1,1]],[[2,2,2,1,1,1,1,1],[2,2,2,1,2,2,2,2],[2,2,2,1,2,2,2,2],[3,3,3,1,2,2,2,2],[2,2,2,1,2,2,2,2],[2,2,2,1,2,2,2,2],[2,2,2,1,2,2,2,2],[1,1,1,1,3,3,3,3]],[[2,1,1,1,1,1,1,1],[1,2,1,1,1,1,1,1],[1,1,2,1,1,1,1,1],[1,1,1,2,1,1,1,1],[1,1,1,1,2,2,2,2],[1,1,1,1,2,2,2,2],[1,1,1,1,2,2,2,2],[1,1,1,1,2,2,2,2]],[[1,1,1,1,2,2,2,2],[1,1,1,1,2,2,2,2],[1,1,1,1,2,2,2,2],[1,1,1,1,2,2,2,2],[1,1,1,3,3,3,3,3],[1,1,3,3,3,3,3,3],[1,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3]],[[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,3,3],[1,1,1,1,1,3,3,3],[1,1,1,1,3,3,3,3],[2,2,2,2,3,3,3,3],[2,2,2,2,3,3,3,3],[2,2,2,2,3,3,3,3],[2,2,2,2,3,3,3,3]],[[2,2,2,2,3,3,3,3],[2,2,2,2,3,3,3,3],[2,2,2,2,3,3,3,3],[2,2,2,2,3,3,3,3],[3,3,3,3,2,3,3,3],[3,3,3,3,3,2,3,3],[3,3,3,3,3,3,2,3],[3,3,3,3,3,3,3,2]],[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,1,1,0,0,0],[0,0,0,1,1,0,0,0]]],[[[0,0,0,3,3,3,3,3],[0,0,3,1,1,1,1,1],[0,3,1,1,1,1,1,1],[0,3,1,1,1,1,1,1],[0,3,1,1,1,1,1,1],[3,1,1,1,1,1,1,1],[3,1,1,1,1,1,3,1],[3,1,1,1,1,1,3,1]],[[3,1,1,1,1,1,3,1],[3,1,1,1,1,1,1,1],[3,1,3,1,1,1,1,1],[0,3,1,1,1,3,1,1],[0,3,1,1,1,1,3,3],[0,3,1,1,1,1,1,1],[0,0,3,1,1,1,1,3],[0,0,0,3,3,3,3,0]],[[3,3,3,3,3,0,0,0],[1,1,1,1,1,3,0,0],[1,1,1,1,1,1,3,0],[1,1,1,1,1,1,3,0],[1,1,1,1,1,1,3,0],[1,1,1,1,1,1,1,3],[1,3,1,1,1,1,1,3],[1,3,1,1,1,1,1,3]],[[1,3,1,1,1,1,1,3],[1,1,1,1,1,1,1,3],[1,1,1,1,1,3,1,3],[1,1,3,1,1,1,3,0],[3,3,1,1,1,1,3,0],[1,1,1,1,1,1,3,0],[3,1,1,1,1,3,0,0],[0,3,3,3,3,0,0,0]],[[2,1,1,1,1,1,1,1],[1,2,2,2,2,2,2,2],[1,2,2,2,2,2,2,2],[1,2,2,2,2,2,2,2],[1,2,2,2,2,2,2,2],[1,2,2,2,2,2,2,2],[1,2,2,2,2,2,2,2],[1,2,2,2,2,2,2,2]],[[1,3,2,1,1,1,1,2],[2,3,1,2,2,2,2,3],[2,3,1,2,2,2,2,3],[2,3,1,2,2,2,2,3],[2,3,1,3,2,2,2,3],[2,3,2,3,3,3,3,2],[2,3,1,1,1,1,1,3],[2,3,1,2,2,2,2,3]],[[1,2,2,2,2,2,2,2],[1,2,2,2,2,2,2,2],[3,3,2,2,2,2,2,2],[1,1,3,3,2,2,2,2],[1,2,1,1,3,3,3,3],[1,2,2,2,1,1,1,3],[1,2,2,2,2,2,2,3],[2,3,3,3,3,3,3,2]],[[2,3,1,2,2,2,2,3],[2,3,1,2,2,2,2,3],[3,1,2,2,2,2,2,3],[3,1,2,2,2,2,2,3],[1,2,2,2,2,2,2,3],[1,2,2,2,2,2,2,3],[1,2,2,2,2,2,3,3],[1,3,3,3,3,3,3,2]],[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,3,3],[0,0,0,0,3,3,1,1],[0,0,0,3,1,1,1,1],[0,0,3,1,1,1,1,1],[0,3,1,1,1,1,1,1],[0,3,1,1,1,1,1,1]],[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[3,3,0,0,0,0,0,0],[1,1,3,3,0,0,0,0],[1,1,1,1,3,0,0,0],[1,1,1,1,1,3,0,0],[1,1,1,1,1,1,3,0],[1,1,1,1,1,1,3,0]],[[3,1,1,1,1,1,1,1],[3,1,1,1,1,1,1,1],[3,1,1,1,1,1,1,1],[3,1,1,1,1,1,1,1],[3,1,1,1,1,1,1,1],[3,1,1,1,1,1,1,1],[3,1,1,1,1,1,1,1],[3,1,1,1,1,1,1,1]],[[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,1,3]],[[0,3,1,1,1,1,1,1],[0,3,1,1,1,1,1,1],[0,3,1,1,1,1,1,1],[0,0,3,1,1,1,1,1],[0,0,3,3,1,1,1,1],[0,0,0,3,3,3,1,1],[0,0,0,0,3,3,3,3],[0,0,0,0,0,3,3,3]],[[1,1,1,1,1,1,3,0],[1,1,1,1,1,1,3,0],[1,1,1,1,1,1,3,0],[1,1,1,1,1,3,0,0],[1,1,1,1,3,3,0,0],[1,1,3,3,3,0,0,0],[3,3,3,3,0,0,0,0],[3,3,3,3,0,0,0,0]],[[0,0,0,0,3,1,1,1],[0,0,0,0,3,1,1,1],[0,0,0,0,3,1,1,1],[0,0,0,0,3,1,1,1],[0,0,0,0,3,1,1,1],[0,0,0,0,3,3,1,1],[0,0,0,0,0,3,1,3],[0,0,0,0,3,1,3,1]],[[1,1,1,3,0,0,0,0],[1,3,1,3,0,0,0,0],[1,3,1,3,0,0,0,0],[1,3,1,3,0,0,0,0],[1,3,1,3,0,0,0,0],[1,1,3,3,0,0,0,0],[3,1,3,0,0,0,0,0],[1,3,1,3,0,0,0,0]]],[[[1,0,0,0,0,0,0,1],[1,3,0,0,0,0,0,3],[1,0,3,0,0,0,3,1],[1,0,3,0,0,0,3,1],[1,0,0,3,3,3,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1]],[[3,3,3,0,0,0,3,3],[1,1,1,3,0,3,1,1],[1,1,2,2,2,2,2,1],[1,1,2,2,2,2,2,1],[1,1,2,2,2,2,2,1],[1,1,2,2,2,2,2,1],[1,1,1,3,0,3,1,1],[3,3,3,0,0,0,3,3]],[[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,1,1,1],[2,2,2,2,1,1,1,1],[2,2,2,2,1,1,0,0],[2,2,2,1,1,0,1,1],[2,2,2,1,1,0,1,1],[2,2,2,1,1,0,1,1]],[[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[1,3,3,2,2,2,2,2],[1,1,3,3,2,2,2,2],[1,1,3,3,2,2,2,2],[3,1,1,3,3,2,2,2],[3,1,1,3,3,2,2,2],[3,1,1,3,3,2,2,2]],[[2,2,2,1,1,0,1,1],[2,2,2,1,1,0,1,1],[2,2,2,1,1,0,1,1],[2,2,2,1,1,0,1,1],[2,2,2,1,1,0,1,1],[2,2,2,2,1,1,3,3],[2,2,2,2,1,1,1,1],[2,2,2,2,2,1,1,1]],[[3,1,1,3,3,2,2,2],[3,1,1,3,3,2,2,2],[3,1,1,3,3,2,2,2],[3,1,1,3,3,2,2,2],[3,1,1,3,3,2,2,2],[1,1,3,3,2,2,2,2],[1,1,3,3,2,2,2,2],[1,3,3,2,2,2,2,2]],[[1,1,1,0,0,0,0,0],[1,3,3,3,1,1,1,1],[1,1,1,3,3,3,3,3],[1,1,1,3,1,1,1,1],[1,3,3,3,1,1,1,1],[1,3,3,3,3,3,3,3],[1,3,3,3,3,3,3,3],[1,3,3,3,3,3,3,3]],[[0,0,0,0,0,1,1,1],[1,1,1,1,1,1,3,3],[3,3,3,3,3,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,3,3],[3,3,3,3,3,1,3,3],[3,3,3,3,3,1,3,3],[3,3,3,3,3,1,3,3]],[[1,3,3,3,3,3,1,1],[1,3,3,3,3,1,3,3],[1,3,3,3,1,3,3,1],[1,3,3,3,1,3,1,3],[1,3,3,3,1,3,1,3],[1,3,3,3,1,3,3,2],[1,1,1,3,1,3,3,3],[1,3,3,0,1,3,3,3]],[[1,1,3,3,3,1,3,3],[3,3,2,3,3,1,3,3],[1,3,3,2,3,1,3,3],[3,2,3,2,3,1,3,3],[3,2,3,2,3,1,3,3],[2,3,3,2,1,1,3,3],[3,3,3,2,3,1,1,1],[3,3,3,2,0,1,3,3]],[[0,0,0,1,3,3,3,3],[0,0,0,1,3,3,3,3],[0,0,1,3,3,3,3,3],[0,0,1,3,3,3,3,3],[0,1,3,3,2,2,2,2],[0,1,3,2,2,2,1,1],[1,3,3,2,2,1,1,1],[1,3,3,2,2,1,2,1]],[[3,3,3,3,2,0,0,0],[3,3,3,3,2,0,0,0],[3,3,3,3,3,2,0,0],[3,3,3,3,3,2,0,0],[2,2,2,2,3,3,2,0],[1,1,2,2,2,3,2,0],[1,1,1,2,2,3,2,0],[1,2,1,2,2,3,3,2]],[[1,3,3,2,1,2,2,1],[1,3,3,2,1,2,2,1],[1,3,3,2,1,2,2,1],[1,3,3,2,1,1,1,1],[1,3,3,2,2,2,1,2],[1,3,3,2,2,2,1,1],[1,3,3,3,2,2,2,2],[1,3,3,3,3,3,3,3]],[[1,2,2,1,2,3,3,2],[1,2,2,1,2,3,3,2],[1,2,2,1,2,3,3,2],[1,1,1,1,2,3,3,2],[2,1,2,2,2,3,3,2],[1,1,2,2,2,3,3,2],[2,2,2,2,3,3,3,2],[3,3,3,3,3,3,3,2]],[[0,0,2,2,2,2,0,0],[0,2,2,2,2,2,2,0],[0,2,2,2,2,2,2,0],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[0,3,1,1,1,1,3,0],[0,0,1,1,1,1,0,0]],[[0,0,1,1,1,1,0,0],[0,1,0,0,0,0,1,0],[1,0,0,1,1,0,0,1],[1,0,1,0,0,0,0,1],[1,0,1,0,0,0,0,1],[1,0,0,1,1,0,0,1],[0,1,0,0,0,0,1,0],[0,0,1,1,1,1,0,0]]],[[[2,2,2,2,1,1,1,1],[2,2,2,1,1,1,1,1],[2,2,2,1,1,1,1,1],[2,2,1,1,1,1,1,1],[2,2,1,1,1,1,1,1],[2,1,1,1,1,1,1,1],[2,1,1,1,1,1,1,1],[2,1,1,1,1,1,1,1]],[[1,1,1,1,2,2,2,2],[1,1,1,1,1,2,2,2],[1,1,1,1,1,2,2,2],[1,1,1,1,1,1,2,2],[1,1,1,1,1,1,2,2],[1,1,1,1,1,1,1,2],[1,1,1,1,1,1,1,2],[1,1,1,1,1,1,1,2]],[[2,1,1,1,1,1,1,1],[2,1,1,1,1,1,1,1],[2,2,1,1,1,1,1,1],[2,2,1,1,1,1,1,1],[2,2,3,1,1,1,1,1],[2,2,3,3,3,1,1,1],[2,2,2,3,3,3,3,1],[2,2,2,3,3,3,3,3]],[[3,3,3,3,3,3,3,2],[1,3,3,3,3,3,3,3],[1,1,1,3,3,3,3,3],[1,1,1,1,1,3,3,3],[1,1,1,1,1,1,2,2],[1,1,1,1,1,1,2,2],[1,1,1,1,1,1,1,2],[3,1,1,1,1,1,1,2]],[[2,1,1,1,1,1,1,1],[2,1,1,1,1,1,1,1],[2,1,1,1,1,1,1,1],[2,2,1,1,1,1,1,1],[2,2,1,1,1,1,1,1],[2,2,3,1,1,1,1,1],[2,2,3,1,1,1,1,1],[2,2,2,3,1,1,1,1]],[[1,1,1,1,1,1,1,2],[1,1,1,1,1,1,1,2],[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,3,3],[1,1,1,1,1,1,3,3],[1,1,1,1,1,3,3,3],[1,1,1,1,1,3,3,3],[1,1,1,1,3,3,3,2]],[[2,2,2,3,3,3,3,3],[2,2,2,2,3,3,3,3],[2,2,2,2,3,3,3,3],[2,2,2,2,2,3,3,3],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2]],[[3,3,3,3,3,3,3,2],[3,3,3,3,3,3,2,2],[3,3,3,3,3,3,2,2],[3,3,3,3,3,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2]],[[2,1,1,1,1,1,1,2],[2,1,1,1,1,1,1,2],[2,1,1,1,1,1,1,2],[2,1,1,1,1,1,1,2],[2,1,1,1,1,1,1,3],[2,1,1,1,1,1,1,3],[2,1,1,1,1,1,1,3],[2,1,1,1,1,1,1,3]],[[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,3,3],[1,1,1,1,1,1,3,3],[1,1,1,1,1,3,3,3],[1,1,1,1,1,3,3,3],[1,1,1,1,3,3,3,2]],[[1,1,1,1,1,1,1,2],[1,1,1,1,1,1,1,2],[1,1,1,1,1,1,1,2],[1,1,1,1,1,1,1,2],[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,1,3]],[[2,1,1,1,1,1,1,3],[2,1,1,1,1,1,1,3],[2,1,1,1,1,1,1,3],[2,1,1,1,1,1,1,3],[2,1,1,1,1,1,1,3],[2,1,1,1,1,1,1,3],[2,1,1,1,1,1,1,3],[2,1,1,1,1,1,1,3]],[[3,3,3,3,3,3,3,3],[1,1,1,1,1,1,3,3],[1,1,1,1,1,1,3,3],[1,1,1,1,1,1,3,3],[1,1,1,1,1,1,2,2],[1,1,1,1,1,1,3,2],[1,1,1,1,1,1,3,2],[2,3,3,3,3,3,3,2]],[[3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2]],[[2,1,1,1,1,1,1,1],[2,1,1,1,1,1,1,1],[2,1,1,1,1,1,1,1],[2,1,1,1,1,1,1,1],[2,1,1,1,1,1,1,1],[2,1,1,1,1,1,1,1],[2,1,1,1,1,1,1,1],[2,1,1,1,1,1,1,1]],[[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,3,3],[1,1,1,1,1,3,3,3],[1,1,1,1,1,1,3,3],[1,1,1,1,1,1,1,3],[1,1,1,1,1,1,1,2]]],[[[2,1,1,1,1,1,1,2],[2,1,1,1,1,1,1,2],[2,1,1,1,1,1,1,3],[2,1,1,1,1,1,1,3],[2,1,1,1,1,1,1,3],[2,1,1,1,1,1,1,3],[2,1,1,1,1,1,1,3],[2,1,1,1,1,1,1,3]],[[2,2,3,3,3,3,3,3],[2,2,3,3,3,3,3,3],[2,2,3,3,3,3,3,3],[2,2,3,3,3,3,3,3],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2]],[[2,3,3,3,3,3,3,2],[2,3,3,3,3,3,2,2],[2,3,3,3,3,3,2,2],[2,3,3,3,3,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2]],[[3,1,1,1,1,1,1,2],[3,1,1,1,1,1,1,2],[3,1,1,1,1,1,1,3],[3,1,1,1,1,1,1,3],[2,1,1,1,1,1,1,3],[2,1,1,1,1,1,1,3],[2,1,1,1,1,1,1,3],[2,1,1,1,1,1,1,3]],[[2,1,1,1,1,1,1,1],[2,1,1,1,1,1,1,1],[2,2,1,1,1,1,1,1],[2,2,1,1,1,1,1,1],[2,2,3,1,1,1,1,1],[2,2,3,3,3,1,1,1],[2,2,2,3,3,3,3,1],[2,2,2,3,3,3,3,3]],[[2,2,3,3,3,3,3,3],[1,2,3,3,3,3,3,3],[1,1,1,3,3,3,3,3],[1,1,1,1,1,3,3,3],[1,1,1,1,1,1,2,2],[1,1,1,1,1,1,2,2],[1,1,1,1,1,1,1,2],[3,1,1,1,1,1,1,2]],[[2,1,1,1,1,1,1,3],[2,1,1,1,1,1,1,3],[2,1,1,1,1,1,1,2],[2,1,1,1,1,1,1,2],[2,1,1,1,1,1,1,3],[2,1,1,1,1,1,1,3],[2,1,1,1,1,1,1,3],[2,1,1,1,1,1,1,3]],[[2,1,1,1,1,1,1,2],[2,1,1,1,1,1,1,2],[2,1,1,1,1,1,1,2],[2,1,1,1,1,1,1,2],[2,1,1,1,1,1,1,3],[2,1,1,1,1,1,1,3],[2,1,1,1,1,1,1,3],[2,1,1,1,1,1,1,3]],[[1,2,2,2,2,2,2,1],[1,1,2,2,2,2,1,1],[1,1,2,2,2,2,1,1],[1,1,1,2,2,1,1,1],[1,1,1,2,2,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1]],[[2,2,2,2,1,1,3,1],[2,3,2,2,2,2,3,1],[2,3,2,3,3,2,3,1],[2,3,2,3,2,2,3,3],[2,2,3,3,2,2,2,3],[2,2,2,1,3,2,2,3],[2,2,2,2,1,3,3,3],[2,2,2,2,2,1,1,1]],[[3,1,2,2,2,2,2,3],[3,1,2,2,2,2,3,1],[3,1,2,2,2,3,1,2],[1,2,2,2,2,1,2,2],[1,3,3,3,3,1,2,2],[1,1,1,1,1,3,2,2],[2,2,2,2,1,1,3,2],[2,2,2,2,2,2,1,2]],[[2,2,2,3,2,2,2,2],[2,2,3,2,2,2,2,2],[2,2,3,2,2,2,3,2],[1,2,3,1,1,2,3,2],[1,3,1,2,2,1,1,2],[3,1,1,2,2,2,2,1],[3,1,2,2,2,2,2,2],[3,1,2,2,2,2,2,2]],[[0,0,3,0,0,0,0,0],[3,2,3,0,0,3,3,0],[0,3,0,3,0,3,0,0],[0,0,3,0,0,3,3,0],[0,0,3,0,0,0,0,2],[1,1,0,0,0,3,3,0],[0,3,0,3,0,3,0,0],[0,0,3,0,0,3,3,0]],[[0,0,3,0,0,0,0,0],[3,0,0,2,2,1,2,1],[0,0,0,0,0,0,0,3],[0,3,0,0,2,1,0,2],[0,0,3,0,0,0,0,0],[3,0,2,0,0,3,1,2],[2,3,0,1,2,1,0,2],[0,3,0,0,1,2,2,0]],[[2,2,1,2,0,0,0,2],[3,2,1,3,3,0,1,0],[3,3,0,2,3,0,0,1],[2,3,0,2,3,2,3,0],[2,2,1,2,0,0,0,2],[3,2,1,2,0,1,1,0],[2,2,0,2,3,0,3,0],[3,3,0,3,2,2,2,0]],[[3,3,0,3,2,0,2,3],[2,2,1,2,2,0,0,2],[3,3,0,2,2,1,3,2],[2,2,0,2,3,2,1,0],[3,3,0,3,2,0,3,2],[3,3,0,3,2,2,3,3],[1,1,2,1,1,0,1,1],[3,3,2,1,1,2,3,1]]],[[[2,2,0,2,3,0,3,0],[3,3,0,3,2,1,2,2],[3,3,2,1,0,1,0,1],[1,1,2,1,0,1,0,2],[1,1,0,1,1,2,2,1],[1,1,0,1,3,0,3,1],[3,3,1,2,0,2,3,0],[3,3,0,3,0,3,2,2]],[[1,1,2,1,0,1,1,2],[1,1,2,1,0,3,3,1],[1,1,1,2,0,2,0,1],[2,2,1,2,0,1,1,0],[3,3,2,1,2,1,1,0],[3,3,0,3,1,1,0,3],[3,3,1,2,0,0,0,1],[3,3,1,2,0,0,0,3]],[[3,3,0,3,3,3,3,0],[3,3,0,3,0,0,0,3],[3,3,0,3,1,0,0,0],[3,3,0,3,0,0,0,2],[3,3,0,3,0,0,0,1],[2,2,1,2,0,1,1,2],[1,1,2,1,1,3,3,0],[1,1,2,1,0,0,0,3]],[[0,3,0,0,0,1,3,0],[2,2,0,3,2,1,2,2],[3,3,0,3,3,0,3,3],[0,3,0,0,0,0,3,0],[0,1,2,0,0,2,3,0],[3,3,0,3,3,0,3,3],[0,3,0,0,0,0,3,0],[3,3,0,3,3,0,3,3]],[[0,3,0,0,0,2,3,0],[3,3,0,3,3,0,3,3],[0,1,2,0,0,0,1,2],[1,3,2,1,3,2,1,1],[0,1,0,0,2,2,3,0],[2,2,1,2,2,3,3,2],[2,2,1,2,2,0,2,3],[2,3,1,2,2,1,3,2]],[[3,3,2,1,1,2,1,1],[2,2,3,0,0,3,1,2],[1,1,2,1,1,2,3,1],[1,1,2,1,1,1,1,3],[3,1,0,1,1,2,3,1],[1,1,0,3,1,3,1,1],[3,3,0,3,3,0,3,3],[3,3,0,3,3,0,3,3]],[[1,1,2,1,1,2,3,1],[3,3,0,3,3,1,3,2],[2,3,2,0,0,0,3,3],[3,3,0,3,3,0,3,3],[3,3,3,0,0,0,0,0],[3,3,0,3,3,0,3,3],[3,3,0,3,3,0,3,3],[3,3,2,1,1,2,3,1]],[[3,3,1,2,2,0,3,3],[0,2,1,0,0,1,3,0],[2,2,1,2,2,0,2,3],[3,2,1,2,2,1,3,2],[2,2,0,3,2,1,2,2],[3,3,0,3,1,2,1,1],[3,3,0,3,3,0,1,3],[1,1,2,1,1,2,3,1]],[[3,3,2,1,1,2,3,3],[1,1,2,1,1,0,0,3],[3,3,0,1,1,2,1,3],[1,1,0,3,1,2,3,1],[1,3,0,3,2,3,2,2],[3,1,0,3,1,2,0,3],[3,1,0,3,0,3,0,2],[3,1,0,3,1,2,0,3]],[[3,0,0,3,0,3,0,3],[3,0,0,3,0,3,2,1],[3,0,0,3,0,3,0,3],[3,0,0,3,0,3,0,3],[3,0,0,3,0,3,2,3],[3,0,0,3,2,1,1,1],[3,0,0,3,1,2,2,2],[2,1,1,3,3,0,0,0]],[[1,0,0,1,2,1,0,1],[0,1,1,1,1,2,1,2],[0,0,3,0,0,2,0,1],[1,1,1,2,1,3,2,3],[0,0,0,2,1,1,3,0],[1,1,0,2,1,3,3,3],[0,0,0,2,2,2,0,3],[0,0,0,0,3,2,2,1]],[[0,0,0,3,2,1,1,3],[0,0,0,2,1,3,0,3],[0,0,0,1,3,0,2,0],[0,0,3,0,0,0,3,0],[0,1,0,0,3,2,3,1],[0,0,0,2,3,1,2,3],[0,0,2,0,0,2,0,1],[0,0,1,2,0,1,0,0]],[[0,0,0,2,3,0,1,2],[0,0,0,3,0,3,1,2],[0,0,0,0,3,1,3,0],[0,0,3,0,0,0,3,0],[1,0,0,0,3,2,3,1],[0,0,0,2,3,1,2,3],[0,0,2,0,0,2,1,0],[0,0,1,2,0,1,0,0]],[[0,0,0,2,3,0,1,2],[0,0,2,1,2,1,1,0],[0,0,2,0,1,1,3,0],[2,2,3,2,0,2,3,0],[1,1,1,0,1,1,0,2],[0,0,0,0,0,1,0,0],[0,0,2,1,1,1,2,3],[2,2,0,1,3,0,0,2]],[[2,1,2,1,2,1,3,0],[0,1,2,1,0,1,2,3],[2,2,3,0,2,0,3,1],[1,1,1,0,0,2,1,0],[2,0,0,2,2,1,0,2],[3,0,2,1,3,0,2,1],[3,0,3,0,3,0,3,0],[3,0,3,0,3,0,3,0]],[[2,2,2,2,2,2,2,2],[3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3]]]]}]}\n');const lt=Ge({path:void 0},(({store:e,value:t,get:s})=>({create(){it.clear(),Ze.clear()},open(e,t){try{it.clear(),Ze.clear(),t=JSON.parse(t),it.import(t.spritesheets,!0),Ze.import(t.palettes,!0),lt.set(e)}catch(e){throw new Error(e)}},save(){const e=s();if(console.log(e),!e.path)return console.log("no project saved before"),!1}})));class at{constructor({keys:e,data:t,groups:s,options:n}){if(!Array.isArray(e))throw new Error("Invalid keys. Expecting array of string representation values.");this.options={...n},this.groups=s||[],this.signature=e.toString(),this.keys=e,this.data=t,this.__on,this.__off}get callbacks(){return{on:this.__on,off:this.__off}}on(e){if("function"!=typeof e)throw new Error("Invalid 'off' function");return this.__on=e,this}off(e){if("function"!=typeof e)throw new Error("Invalid 'off' function");return this.__off=e,this}}const ct=new class{constructor(e,t){this.__options={once:!0,preventDefault:!0,...t},this.__registeredGroups=new Set,this.__enabledGroups="__all__",this.__commands=new Map,this.__target=e}get target(){return this.__target}_prepare(e){if(!Array.isArray(e))throw new Error(`Invalid '_prepare' argument. Expecting array, got : [${typeof e}]`);return[...e].map((e=>e.toLowerCase())).sort(((e,t)=>e.toLowerCase().localeCompare(t.toLowerCase())))}enableAllGroups(){this.__enabledGroups="__all__"}enableGroups(...e){return[...this.__enabledGroups=[...e]]}_find(e){const t=Array.from(this.__commands.values());let s;return t.sort(((e,t)=>t.options.priority-e.options.priority)),Array.isArray(this.__enabledGroups)?s=t.find((t=>t.groups.some((s=>{if((!this.__enabledGroups||this.__enabledGroups.includes(s))&&t.signature==e.toString())return!0})))):"__all__"==this.__enabledGroups&&(s=t.find((t=>t.signature==e.toString()))),s}set(e,{data:t,groups:s,...n}){(s=Array.isArray(s)&&s.length>0?s:["*"]).map((e=>this.__registeredGroups.add(e)));const r=this._prepare(e),o=new at({keys:r,data:t,groups:s,options:{priority:n.priority||0,once:n.once||this.__options.once,preventDefault:n.preventDefault||this.__options.preventDefault}});return s.map((e=>{if(this.__commands.get(`${e},${o.signature}`))throw new Error(`Shortcut already defined : [${e},${o.signature}]`);this.__commands.set(`${e},${o.signature}`,o)})),o}execute(e,t){if("on"==t||null==t){const t={};e.map((e=>t[e.toLowerCase()]=!0));const s=new Event("keydown");s.customExecuteEvent=t,this.__target.dispatchEvent(s)}"off"!=t&&null!=t||e.map((e=>{const t=new Event("keyup");t.code=e,this.__target.dispatchEvent(t)}))}subscribe(e){let t={},s={};const n=n=>{n.customExecuteEvent?t=n.customExecuteEvent:t[n.code.toLowerCase()]=!0;const r=this._prepare(Object.entries(t).filter((([e,t])=>t)).map((([e,t])=>e.toLowerCase()))),o=this._find(r);if(o){if(o.options.preventDefault&&n.preventDefault(),o.options.once&&r.toString()==s.signature)return;s={instance:o,signature:r.toString()},"function"==typeof o.callbacks.on?o.callbacks.on.call(null,{e:n,Hotkey:o,on:!0}):"function"==typeof e&&e.call(null,{e:n,Hotkey:o,on:!0})}},r=n=>{t[n.code.toLowerCase()]=!1,s.instance&&"function"==typeof s.instance.callbacks.off?s.instance.callbacks.off.call(null,{e:n,Hotkey:s.instance,on:!1}):s.instance&&"function"==typeof e&&e.call(null,{e:n,Hotkey:s.instance,on:!1}),s={}};return this.__target.addEventListener("keydown",n),this.__target.addEventListener("keyup",r),()=>(this.__target.removeEventListener("keyup",r),this.__target.removeEventListener("keydown",n),t=>this.subscribe(this.__target,e))}}(window,{});ct.subscribe((({e:e,Hotkey:t,on:s})=>{e.preventDefault(),s&&t.data&&Me.exist(t.data.action)&&Me.execute(t.data.action,t.data.props)}));const ut=({e:e,Hotkey:t,on:s})=>{e.preventDefault(),s&&t.data&&Me.exist(t.data.action)&&Me.execute(t.data.action),ct.execute(t.keys,"off")},pt=new Se("pointer","pen","paintbucket","eyedropper","colorswap","transform","marquee","zoom","preview","tileswap","preview_region","tilecolor");class ht{constructor(e){this.icon="",this.offset={x:0,y:0},this.size={width:11,height:11},this.scale={x:1,y:1},Object.assign(this,e)}}class dt{constructor(e){this.visible_in_toolbar=!0,this.pixelIndicator=!1,this.singleAction=!1}get optionsPanelComponent(){}onMount(){}onDestroy(){}primary(){}secondary(){}move(){}mouseup(){}reset(){}}class ft{constructor(){this.canvas=document.createElement("canvas"),this.canvas.width=128,this.canvas.height=128,this.context=this.canvas.getContext("2d")}render(){console.log("Render not implemented")}}const gt=Object.freeze({primary:1,secondary:2,move:3,mouseup:4}),mt=new class extends ft{constructor(...e){super(...e),this.width=128,this.height=128,this.size=1,this.x,this.y}render(){isNaN(this.x)||isNaN(this.y)||(this.context.clearRect(0,0,this.width,this.height),this.context.globalAlpha=.4,this.context.fillStyle="white",this.context.fillRect(this.x,this.y,this.size,this.size))}},$t=new class extends ft{constructor(...e){super(...e),this.width=128,this.height=128,this.size=8,this.x,this.y,this.framecount=0,this.count=0,this.selected=[]}addSelectedTileItem(e,t){this.selected.push({x:e,y:t})}clearSelected(){this.selected=[]}draw(e,t){let s=this.count%2==0?"white":"crimson";e=Math.floor(e/8)*this.size,t=Math.floor(t/8)*this.size,this.context.globalAlpha=.85,this.context.strokeStyle=s,this.context.strokeRect(e,t,this.size-1,this.size-1)}render(){isNaN(this.x)||isNaN(this.y)||(this.framecount++%16==0&&this.count++,this.context.clearRect(0,0,this.width,this.height),this.context.save(),this.context.translate(.5,.5),this.selected.forEach((({x:e,y:t})=>{this.draw(e,t)})),this.draw(this.x,this.y),this.context.restore())}},vt=new class extends ft{constructor(...e){super(...e),this.width=128,this.height=128,this.size=8,this.start,this.end,this.selection,this.framecount=0,this.count=0}removeSelection(){this.selection=void 0}addSelection({start:e,end:t}={}){e&&t||(e=this.start,t=this.end),this.selection={start:e,end:t}}draw({start:e,end:t,color:s="crimson",dash:n}){e&&t&&(t.x=Math.min(Math.max(t.x,0),this.width-1),t.y=Math.min(Math.max(t.y,0),this.width-1),this.context.save(),this.context.translate(.5,.5),this.context.globalAlpha=.8,n&&this.context.setLineDash(n),this.context.strokeStyle=s,this.context.strokeRect(e.x,e.y,t.x-e.x,t.y-e.y),this.context.restore())}render(){this.framecount++%16==0&&this.count++,this.context.clearRect(0,0,this.width,this.height),this.draw({...this.selection,color:this.count%2==0?"white":"crimson"}),this.draw({start:this.start,end:this.end,color:this.count%2==0?"white":"crimson"})}},yt=[new class extends ft{constructor(...e){super(...e),this.width=128,this.height=128,this.size=8,this.o1=.05,this.o2=.005}render(){this.context.clearRect(0,0,this.width,this.height),this.context.globalAlpha=1;for(let e=0;e<=this.width/this.size;e++)for(let t=0;t<=this.height/this.size;t++)this.context.save(),this.context.translate(e*this.size,t*this.size),(e+t)%2==0?(this.context.globalAlpha=this.o1,this.context.fillStyle="white"):(this.context.globalAlpha=this.o2,this.context.fillStyle="black"),this.context.fillRect(0,0,this.size,this.size),this.context.restore()}}];class xt{constructor({canvas:e,context:t,width:s,height:n}){this.activeLayer=void 0,this.activePaletteLayer=void 0,this.lastChanged=void 0,this.canvas,this.context,this.width=s,this.height=n;this.animationLoop=((e,t=null)=>{if("function"!=typeof e)throw new Error("Invalid callback function.");let s,n=!1,r=0,o=performance.now();const i=e=>cancelAnimationFrame(s),l=e=>n=!0,a=e=>n=!1,c=u=>{if(s=requestAnimationFrame(c),n)return;const p=u-o,h=performance.now();(!t||h-o>1e3/t)&&(e.call(null,{delta:p/1e3,frame:++r,cancel:i,time:u,pause:l,play:a}),o=u)};return s=requestAnimationFrame(c),{unsubscribe:i,pause:l,play:a,toggle:e=>n=!n}})(this.render.bind(this),0),this.events={},this.eventHandler={};const r=(e,t)=>{switch(t.mouseIsDown=i,e){case gt.primary:o("primary",t);break;case gt.secondary:o("secondary",t);break;case gt.move:o("move",t);break;case gt.mouseup:o("mouseup",t);break;default:console.log("hmm...")}};const o=(e,t)=>{this.events[e]&&(t.realMousePosition=function(e,t){if(!e)return{x:0,y:0};const s=e.getBoundingClientRect(),n=e.width/s.width,r=e.height/s.height;return{x:Math.floor((t.clientX-s.left)*n),y:Math.floor((t.clientY-s.top)*r)}}(this.canvas,t),this.events[e].call(null,t))};let i=!1;this.eventHandler.mousemove=e=>{r(gt.move,e)},this.eventHandler.mouseup=e=>{i=!1,r(gt.mouseup,e)},this.eventHandler.mousedown=e=>{let t;if(i=!0,1==e.which)t=gt.primary;else{if(3!=e.which)return;t=gt.secondary}r(t,e)},document.addEventListener("mousemove",this.eventHandler.mousemove),document.addEventListener("mouseup",this.eventHandler.mouseup)}defineCanvas(e){this.canvas=e,this.context=this.canvas.getContext("2d"),this.canvas.addEventListener("mousedown",this.eventHandler.mousedown)}on(e,t){if("string"!=typeof e&&"function"!=typeof t)throw new Error("Invalid eventlistener");if(this.events[e])throw new Error(`Event already exists : ${e}`);this.events[e]=t}render({cancel:e,delta:t,frame:s,time:n}){if(!this.canvas)return;this.context.clearRect(0,0,128,128);const r=it.stores.activeLayer.get(),o=Ze.stores.activeLayer.get();r&&o&&(this.lastChanged==Ze.lastChanged.get()&&this.activeLayer==r&&this.activePaletteLayer==o||(this.activeLayer=r,this.activePaletteLayer=o,r.drawFromSource(o),this.lastChanged=Ze.lastChanged.get()),this.context.drawImage(r.element,0,0),yt.forEach((e=>{e.render(),this.context.drawImage(e.canvas,0,0)})),(bt.activeTool.get().cursorLayers||[]).forEach((e=>{e.render(),this.context.drawImage(e.canvas,0,0)})))}destroy(){this.animationLoop.unsubscribe(),this.canvas&&this.canvas.removeEventListener("mousedown",this.eventHandler.mousedown),document.removeEventListener("mousemove",this.eventHandler.mousemove),document.removeEventListener("mouseup",this.eventHandler.mouseup)}}const wt={pointer:new class extends dt{constructor(){super(),this.name="pointer",this.enum=pt.get("pointer"),this.weight=100,this.icon="M4 0l16 12.279-6.78 1.138 4.256 8.676-3.902 1.907-4.281-8.758-5.293 4.581z",this.cursor=new ht({})}primary({x:e,y:t,context:s}){}secondary({x:e,y:t,context:s}){}move({x:e,y:t,context:s}){}},pen:new class extends dt{constructor(){super(),this.cursorLayers=[mt],this.name="pen",this.enum=pt.get("pen"),this.weight=90,this.icon="M19.769 9.923l-12.642 12.639-7.127 1.438 1.438-7.128 12.641-12.64 5.69 5.691zm1.414-1.414l2.817-2.82-5.691-5.689-2.816 2.817 5.69 5.692z",this.cursor=new ht({icon:"M19.769 9.923l-12.642 12.639-7.127 1.438 1.438-7.128 12.641-12.64 5.69 5.691zm1.414-1.414l2.817-2.82-5.691-5.689-2.816 2.817 5.69 5.692z",size:{width:46,height:46},offset:{x:0,y:11}}),this.properties={size:1,drawStack:[],lastDraw:void 0,start:void 0},this.modifiedPixels=[]}get optionsPanelComponent(){return PenOptions}paint(e){const t=Ze.stores.selectedColor.getActiveColorValue(e.colorIndex),{rgb:s,hex:n}=t;if(!t)return;const r=it.stores.activeLayer.get()?.context;r?(this.properties.drawStack.map((t=>{const{x:n,y:o}=t.realMousePosition;r.save(),r.translate(n,o),r.fillStyle=`rgb(${s.join(",")})`,r.fillRect(0,0,this.properties.size,this.properties.size),this.modifiedPixels.push({x:n,y:o,colorIndex:Number.isInteger(e.colorIndex)?e.colorIndex:Ze.stores.selectedColor.get()}),r.restore()})),this.properties.lastDraw=this.properties.drawStack.pop(),this.properties.drawStack=[]):console.log("Error loading context")}primary(e){e.shiftKey?this.drawLineFromPoint(e,{...e.realMousePosition}):this.properties.drawStack.push(e),this.paint.call(this,e)}secondary(e){e={...e,colorIndex:0},this.properties.drawStack.push(e),this.paint.call(this,e)}drawLineFromPoint(e,t){if(!this.properties.start)return;let{x:s,y:n}=this.properties.start;if(Math.abs(t.x-s)>Math.abs(t.y-n))for(;s!=t.x;)s<t.x&&s++,s>t.x&&s--,this.properties.drawStack.push({...e,realMousePosition:{x:s,y:n}});else for(;n!=t.y;)n<t.y&&n++,n>t.y&&n--,this.properties.drawStack.push({...e,realMousePosition:{x:s,y:n}})}move(e){if(mt.x=e.realMousePosition.x,mt.y=e.realMousePosition.y,e.shiftKey||!e.mouseIsDown)return;const t=e=>{if(this.properties.lastDraw){let{x:t,y:s}={...this.properties.lastDraw.realMousePosition};for(;t!=e.realMousePosition.x||s!=e.realMousePosition.y;)t<e.realMousePosition.x&&t++,t>e.realMousePosition.x&&t--,s<e.realMousePosition.y&&s++,s>e.realMousePosition.y&&s--,this.properties.drawStack.push({...e,realMousePosition:{x:t,y:s}})}else this.properties.drawStack.push(e)};1==e.which?(t(e),this.primary.call(this,e)):3==e.which&&(t(e),this.secondary.call(this,e))}mouseup(){const e=it.stores.activeLayer.get()?.data;if(!e)return;this.modifiedPixels.length&&it.stores.activeLayer.get().saveHistory();for(const t of this.modifiedPixels){let{x:s,y:n,colorIndex:r}=t;const o={x:Math.floor(s/8),y:Math.floor(n/8)},i={x:s%8,y:n%8};e[o.y]&&e[o.y][o.x]&&e[o.y][o.x][i.y]&&Number.isInteger(e[o.y][o.x][i.y][i.x])&&(e[o.y][o.x][i.y][i.x]=r)}const t=this.modifiedPixels[this.modifiedPixels.length-1];t&&(this.properties.start={...t},it.stores.activeLayer.get().setPresent()),this.modifiedPixels=[]}},eyedropper:new class extends dt{constructor(){super(),this.cursorLayers=[mt],this.name="eyedropper",this.enum=pt.get("eyedropper"),this.weight=70,this.icon="M12.142 13.178l1.506 1.318-6.83 7.6c-1.31 1.464-2.22.315-3.953 1.647-.232.178-.483.257-.724.257-.601 0-1.141-.49-1.141-1.151 0-.218.062-.455.196-.698.978-1.791-.129-2.629 1.148-4.052l6.787-7.555 1.505 1.317-3.727 4.139h2.691l2.542-2.822zm5.764-13.178c-2.434 0-4.871 1.707-4.797 5.831.021 1.167-.356 1.698-.884 1.698-.298 0-.597-.169-.877-.386-.407-.315-.99-.26-1.331.129-.374.426-.329 1.076.096 1.448l5.253 4.598c.423.371 1.067.328 1.438-.096.343-.392.32-.979-.049-1.345-.277-.275-.501-.581-.501-.913 0-.479.486-.876 1.572-1.002 3.69-.428 5.174-2.656 5.174-4.88 0-2.799-2.149-5.082-5.094-5.082z",this.cursor=new ht({icon:"M12.142 13.178l1.506 1.318-6.83 7.6c-1.31 1.464-2.22.315-3.953 1.647-.232.178-.483.257-.724.257-.601 0-1.141-.49-1.141-1.151 0-.218.062-.455.196-.698.978-1.791-.129-2.629 1.148-4.052l6.787-7.555 1.505 1.317-3.727 4.139h2.691l2.542-2.822zm5.764-13.178c-2.434 0-4.871 1.707-4.797 5.831.021 1.167-.356 1.698-.884 1.698-.298 0-.597-.169-.877-.386-.407-.315-.99-.26-1.331.129-.374.426-.329 1.076.096 1.448l5.253 4.598c.423.371 1.067.328 1.438-.096.343-.392.32-.979-.049-1.345-.277-.275-.501-.581-.501-.913 0-.479.486-.876 1.572-1.002 3.69-.428 5.174-2.656 5.174-4.88 0-2.799-2.149-5.082-5.094-5.082z",size:{width:46,height:46},offset:{x:0,y:10}})}primary(e){const{x:t,y:s}=e.realMousePosition,n=it.stores.activeLayer.get().colorIndexAtPosition(t,s);Number.isInteger(n)&&Ze.stores.selectedColor.set(n)}secondary(e){}move(e){mt.x=e.realMousePosition.x,mt.y=e.realMousePosition.y}},paintbucket:new class extends dt{constructor(){super(),this.cursorLayers=[mt],this.name="paintbucket",this.enum=pt.get("paintbucket"),this.weight=80,this.icon="M24 19.007c0-3.167-1.409-6.771-2.835-9.301l-.006-.01-.014-.026c-.732-1.392-1.914-3.052-3.619-4.757-2.976-2.976-5.476-3.912-6.785-3.913-.413 0-.708.094-.859.245l-.654.654c-1.898-.236-3.42.105-4.294.982-.876.875-1.164 2.159-.792 3.524.242.893.807 1.891 1.752 2.836.867.867 2.062 1.684 3.615 2.327.488-.839 1.654-1.019 2.359-.315.586.586.584 1.533-.002 2.119s-1.533.589-2.121 0c-.229-.229-.366-.515-.416-.812-1.646-.657-3.066-1.534-4.144-2.612-.728-.728-1.289-1.528-1.664-2.349l-2.835 2.832c-.445.447-.685 1.064-.686 1.82.001 1.635 1.122 3.915 3.714 6.506 2.764 2.764 5.58 4.243 7.431 4.243.649 0 1.181-.195 1.548-.562l8.086-8.079c.911.875-.777 3.541-.777 4.65 0 1.104.896 1.999 2 1.998 1.104 0 1.998-.895 1.998-2zm-18.912-12.974c-.236-.978-.05-1.845.554-2.444.526-.53 1.471-.791 2.656-.761l-3.21 3.205zm9.138 2.341l-.03-.029c-1.29-1.291-3.802-4.354-3.095-5.062.715-.715 3.488 1.521 5.062 3.095.862.863 2.088 2.248 2.938 3.459-1.718-1.073-3.493-1.469-4.875-1.463zm-3.875 12.348c-.547-.082-1.5-.547-1.9-.928l7.086-7.086c.351.37 1.264.931 1.753 1.075l-6.939 6.939z",this.cursor=new ht({icon:"M24 19.007c0-3.167-1.409-6.771-2.835-9.301l-.006-.01-.014-.026c-.732-1.392-1.914-3.052-3.619-4.757-2.976-2.976-5.476-3.912-6.785-3.913-.413 0-.708.094-.859.245l-.654.654c-1.898-.236-3.42.105-4.294.982-.876.875-1.164 2.159-.792 3.524.242.893.807 1.891 1.752 2.836.867.867 2.062 1.684 3.615 2.327.488-.839 1.654-1.019 2.359-.315.586.586.584 1.533-.002 2.119s-1.533.589-2.121 0c-.229-.229-.366-.515-.416-.812-1.646-.657-3.066-1.534-4.144-2.612-.728-.728-1.289-1.528-1.664-2.349l-2.835 2.832c-.445.447-.685 1.064-.686 1.82.001 1.635 1.122 3.915 3.714 6.506 2.764 2.764 5.58 4.243 7.431 4.243.649 0 1.181-.195 1.548-.562l8.086-8.079c.911.875-.777 3.541-.777 4.65 0 1.104.896 1.999 2 1.998 1.104 0 1.998-.895 1.998-2zm-18.912-12.974c-.236-.978-.05-1.845.554-2.444.526-.53 1.471-.791 2.656-.761l-3.21 3.205zm9.138 2.341l-.03-.029c-1.29-1.291-3.802-4.354-3.095-5.062.715-.715 3.488 1.521 5.062 3.095.862.863 2.088 2.248 2.938 3.459-1.718-1.073-3.493-1.469-4.875-1.463zm-3.875 12.348c-.547-.082-1.5-.547-1.9-.928l7.086-7.086c.351.37 1.264.931 1.753 1.075l-6.939 6.939z",offset:{x:3.5,y:11},size:{width:46,height:46}}),this.properties={diagonals:!1}}fillPixelsInsideTile(e,t){const s=Math.floor(e/8),n=Math.floor(t/8),r=it.stores.activeLayer.get()?.data[s][n];if(r){const s=[{x:e,y:t}];for(;s.length;){const{x:e,y:t}=s.shift();if(t<0||t>8)continue;if(e<0||e>8)continue;const n=r[e][t];n!=fillValue&&(n==pixelValue&&(r[e][t]=fillValue,s.push({x:e,y:t+1}),s.push({x:e,y:t-1}),s.push({x:e-1,y:t}),s.push({x:e+1,y:t}),this.properties.diagonals&&(s.push({x:e+1,y:t+1}),s.push({x:e-1,y:t-1}),s.push({x:e+1,y:t-1}),s.push({x:e-1,y:t+1}))))}}it.stores.activeLayer.get().forceUpdate()}fill(e,t){const s=Ze.stores.selectedColor.get(),n=it.stores.activeLayer.get().colorIndexAtPosition(e,t),r=[{x:e,y:t}];for(;r.length;){const{x:e,y:t}=r.shift();if(t<0||t>127)continue;if(e<0||e>127)continue;const o=it.stores.activeLayer.get().colorIndexAtPosition(e,t);o!=s&&(o==n&&(it.stores.activeLayer.get().setColorIndexAtPosition(e,t,s),r.push({x:e,y:t+1}),r.push({x:e,y:t-1}),r.push({x:e-1,y:t}),r.push({x:e+1,y:t}),this.properties.diagonals&&(r.push({x:e+1,y:t+1}),r.push({x:e-1,y:t-1}),r.push({x:e+1,y:t-1}),r.push({x:e-1,y:t+1}))))}it.stores.activeLayer.get().forceUpdate()}primary(e){const t=e.ctrlKey||e.altKey;it.stores.activeLayer.get().saveHistory();const{x:s,y:n}=e.realMousePosition;t?this.fillPixelsInsideTile(s,n):this.fill(s,n),it.stores.activeLayer.get().setPresent()}secondary(e){const{x:t,y:s}=e.realMousePosition;it.stores.activeLayer.get().saveHistory(),this.fillPixelsInsideTile(t,s),it.stores.activeLayer.get().setPresent()}move(e){mt.x=e.realMousePosition.x,mt.y=e.realMousePosition.y}},colorswap:new class extends dt{constructor(){super(),this.hotkeysGroups=["colorswap"],ct.set(["Escape"],{data:{action:Me.action("tool_action"),props:e=>this.properties.swappedColors=[]},groups:this.hotkeysGroups}),this.cursorLayers=[mt],this.name="colorswap",this.enum=pt.get("colorswap"),this.weight=60,this.icon="M1 12.155c2.256 3.97 4.55 7.918 6.879 11.845h-5.379c-.829 0-1.5-.675-1.5-1.5v-10.345zm2.85.859c3.278 1.952 12.866 7.658 13.121 7.805l-5.162 2.98c-.231.132-.49.201-.751.201-.549 0-1.037-.298-1.299-.75l-5.909-10.236zm1.9-12.813c-.23-.133-.489-.201-.75-.201-.524 0-1.026.277-1.299.75l-3.5 6.062c-.133.23-.201.489-.201.749 0 .527.278 1.028.75 1.3 2.936 1.695 14.58 8.7 17.516 10.396.718.413 1.633.168 2.048-.55l3.5-6.062c.133-.23.186-.488.186-.749 0-.52-.257-1.025-.734-1.3l-17.516-10.395m.25 3.944c1.104 0 2 .896 2 2s-.896 2-2 2-2-.896-2-2 .896-2 2-2",this.cursor=new ht({icon:"M12.142 13.178l1.506 1.318-6.83 7.6c-1.31 1.464-2.22.315-3.953 1.647-.232.178-.483.257-.724.257-.601 0-1.141-.49-1.141-1.151 0-.218.062-.455.196-.698.978-1.791-.129-2.629 1.148-4.052l6.787-7.555 1.505 1.317-3.727 4.139h2.691l2.542-2.822zm5.764-13.178c-2.434 0-4.871 1.707-4.797 5.831.021 1.167-.356 1.698-.884 1.698-.298 0-.597-.169-.877-.386-.407-.315-.99-.26-1.331.129-.374.426-.329 1.076.096 1.448l5.253 4.598c.423.371 1.067.328 1.438-.096.343-.392.32-.979-.049-1.345-.277-.275-.501-.581-.501-.913 0-.479.486-.876 1.572-1.002 3.69-.428 5.174-2.656 5.174-4.88 0-2.799-2.149-5.082-5.094-5.082z",size:{width:46,height:46},offset:{x:0,y:10}}),this.properties={swappedColors:[]}}primary(e){const{x:t,y:s}=e.realMousePosition;if(this.properties.swappedColors.push({column:Math.floor(t/8),row:Math.floor(s/8),x:t%8,y:s%8}),this.properties.swappedColors.length>1){const e=it.stores.activeLayer;e.get().saveHistory(),e.update((t=>{const[s,n]=this.properties.swappedColors,r=t.data;let o=r[s.row][s.column][s.y][s.x],i=r[n.row][n.column][n.y][n.x];return o!=i&&t.data.map(((e,s)=>{e.map(((e,n)=>{e.map(((e,r)=>{e.map(((e,l)=>{let a;e==o?a=i:e==i&&(a=o),Number.isInteger(a)&&(t.data[s][n][r][l]=a)}))}))}))})),e.get().forceUpdate(),it.stores.activeLayer.get().setPresent(),t})),this.properties.swappedColors=[]}}secondary(e){}move(e){mt.x=e.realMousePosition.x,mt.y=e.realMousePosition.y}},tileswap:new class extends dt{constructor(){super(),this.hotkeysGroups=["tileswap"];ct.set(["Escape"],{data:{action:Me.action("tool_action"),props:()=>{this.swappedTiles=[],$t.clearSelected()}},groups:this.hotkeysGroups}),this.cursorLayers=[$t],this.name="tileswap",this.enum=pt.get("tileswap"),this.weight=60,this.icon="M18 6v-6h-18v18h6v6h18v-18h-6zm-16 10v-14h14v4h-10v10h-4z",this.cursor=new ht({icon:"M24 10h-10v-10h-4v10h-10v4h10v10h4v-10h10z",size:{width:56,height:56},offset:{x:5,y:5}}),this.properties={modifier:void 0},this.swappedTiles=[]}primary(e){this.properties.modifier=e.ctrlKey||e.altKey;let{x:t,y:s}=e.realMousePosition;const n=Math.floor(t/8),r=Math.floor(s/8),o=it.stores.activeLayer,i=o.get().data;let l={x:n,y:r,data:JSON.parse(JSON.stringify(i[r][n])),ref:o.get()};if(this.swappedTiles.push(l),$t.addSelectedTileItem(t,s),this.swappedTiles.length>1){let e;this.swappedTiles.forEach((t=>{e!==t.ref&&t.ref.saveHistory(),e=t.ref})),o.update((e=>{const[t,s]=this.swappedTiles;let n;return this.properties.modifier||(t.ref.data[t.y][t.x]=s.data),s.ref.data[s.y][s.x]=t.data,this.swappedTiles.forEach((e=>{n!=e.ref&&(e.ref.forceUpdate(),e.ref.setPresent()),n=e.ref})),e})),this.properties.modifier=void 0,this.swappedTiles=[],$t.clearSelected()}}secondary(e){this.properties.modifier=e?.ctrlKey||e?.altKey,this.swappedTiles=[],$t.clearSelected()}move(e){const{x:t,y:s}=e.realMousePosition;$t.x=t,$t.y=s}mouseup(){}onDestroy(){this.secondary()}},transform:new class extends dt{constructor(){super(),this.cursorLayers=[$t],this.name="transform",this.enum=pt.get("transform"),this.weight=55,this.icon="M18.885 3.515c-4.617-4.618-12.056-4.676-16.756-.195l-2.129-2.258v7.938h7.484l-2.066-2.191c2.82-2.706 7.297-2.676 10.073.1 4.341 4.341 1.737 12.291-5.491 12.291v4.8c3.708 0 6.614-1.244 8.885-3.515 4.686-4.686 4.686-12.284 0-16.97z",this.cursor=new ht({icon:"M24 10h-10v-10h-4v10h-10v4h10v10h4v-10h10z",size:{width:56,height:56},offset:{x:5,y:5}}),this.properties={modifier:void 0}}flipX(e){let{x:t,y:s}=e.realMousePosition;const n=Math.floor(t/8),r=Math.floor(s/8),o=it.stores.activeLayer.get().data;o[r][n]=o[r][n].map((e=>e.reverse()))}flipY(e){this.rotate(e),this.rotate(e),this.flipX(e)}rotate(e){let{x:t,y:s}=e.realMousePosition;const n=Math.floor(t/8),r=Math.floor(s/8),o=it.stores.activeLayer.get().data;this.properties.modifier?this.secondary(e):o[r][n]=o[r][n].map(((e,t)=>o[r][n].map((e=>e[t])).reverse()))}primary(e){it.stores.activeLayer.get().saveHistory(),this.properties.modifier=e.ctrlKey||e.altKey,this.rotate(e),it.stores.activeLayer.get().forceUpdate(),it.stores.activeLayer.get().setPresent()}secondary(e){it.stores.activeLayer.get().saveHistory(),this.properties.modifier=e.ctrlKey||e.altKey,this.properties.modifier?this.flipX(e):this.flipY(e),it.stores.activeLayer.get().forceUpdate(),it.stores.activeLayer.get().setPresent()}move(e){const{x:t,y:s}=e.realMousePosition;$t.x=t,$t.y=s}},marquee:new class extends dt{constructor(){super(),this.cursorLayers=[vt],this.name="marquee",this.enum=pt.get("marquee"),this.weight=50,this.icon="M11 23v-2h-4v2h4zm8-20h3v2h2v-4h-5v2zm-19 14h2v-4h-2v4zm0-6h2v-4h-2v4zm2-6v-2h3v-2h-5v4h2zm22 2h-2v4h2v-4zm0 6h-2v4h2v-4zm-2 6v2h-3v2h5v-4h-2zm-17 2h-3v-2h-2v4h5v-2zm12 2v-2h-4v2h4zm-6-20v-2h-4v2h4zm6 0v-2h-4v2h4z",this.cursor=new ht({icon:"M24 10h-10v-10h-4v10h-10v4h10v10h4v-10h10z",size:{width:56,height:56},offset:{x:5,y:5}}),this.properties={start:void 0,end:void 0}}primary(e){const t=e.ctrlKey||e.altKey;this.properties.start=void 0;let{x:s,y:n}=e.realMousePosition;this.properties.start={x:s,y:n},t?(s=8*Math.floor(s/8),n=8*Math.floor(n/8),vt.start={x:s,y:n},vt.end={x:s+7,y:n+7}):(vt.start={...this.properties.start},vt.end={...this.properties.start})}secondary(e){this.properties={start:void 0,end:void 0},vt.removeSelection()}mouseup(){this.properties.start&&this.properties.end&&vt.addSelection(),vt.start=void 0,vt.end=void 0,this.properties={start:void 0,end:void 0}}move(e){const{x:t,y:s}=e.realMousePosition;this.properties.end={x:t,y:s},vt.end={...this.properties.end}}onDestroy(){this.secondary()}}},bt={tools:wt,activeTool:Ge(void 0,(({value:e,store:t,get:s})=>({setActive(e){if(!(e instanceof Ae))throw new Error("Invalid tool");const n=s();n instanceof dt&&n.onDestroy();const r=wt[e.key],{cursor:o}=r;let i="default";o&&o.icon&&(i=`url("data:image/svg+xml,%3Csvg transform='' xmlns='http://www.w3.org/2000/svg' width='${o.size.width}' height='${o.size.height}' viewBox='0 0 100 100' xml:space='preserve'%3E %3Cpath fill='white' stroke='black' stroke-width='${o.stroke||2}' d='${o.icon}'/%3E %3C/svg%3E") ${o.offset.x} ${o.offset.y}, auto`),document.documentElement.style.setProperty("--canvas-cursor",i),t.set(r),Array.isArray(r.hotkeysGroups)&&ct.enableGroups("*","spritesheets",...r.hotkeysGroups)}})))};bt.activeTool.setActive(pt.get("pen"));const _t=(e,...t)=>{e&&e.call(bt.activeTool.get(),...t)},{selectedColor:Lt}=Ze.stores;globalThis.electron&&(Me.register("window_close",(e=>globalThis.electron.quit())),Me.register("window_minimize",(e=>globalThis.electron.minimize())),Me.register("window_maximize",(e=>globalThis.electron.maximize())),Me.register("window_toggle_fullscreen",(e=>globalThis.electron.toggleFullscreen())),Me.register("project_create",(e=>lt.create())),Me.register("project_save",(e=>{globalThis.electron.save(),console.log("save")})),Me.register("project_save_as",(e=>{globalThis.electron.saveAs(),console.log("save as")})),Me.register("project_open",(async e=>{const{canceled:t,filePaths:s}=await globalThis.electron.openFileDialog([Oe.project.save.extension]);if(!t&&Array.isArray(s))for(const e of s){let{filePath:t,data:s}=await globalThis.electron.readFileDataFromPath(e,"utf8");lt.open(s)}})),Me.register("external_link",(e=>globalThis.electron.externalLink(e))),Me.register("palette_export",(async e=>{const t=Ke.export(!0),{canceled:s,filePath:n}=await globalThis.electron.openSaveDialog([Oe.palettes.save.extension]);s||"string"!=typeof n||await globalThis.electron.saveAs(n,t)})),Me.register("palette_import",(async e=>{const{canceled:t,filePaths:s}=await globalThis.electron.openFileDialog([Oe.palettes.save.extension]);if(!t&&Array.isArray(s))for(const e of s){const{filePath:t,data:s}=await globalThis.electron.readFileDataFromPath(e,"utf8");Ze.import(s)}})),Me.register("spritesheet_import",(async e=>{const{canceled:t,filePaths:s}=await globalThis.electron.openFileDialog([Oe.spritesheets.save.extension]);if(!t&&Array.isArray(s))for(const e of s){const{filePath:t,data:s}=await globalThis.electron.readFileDataFromPath(e,"utf8");it.import(s)}})),Me.register("spritesheet_import_chr",(async e=>{const{canceled:t,filePaths:s}=await globalThis.electron.openFileDialog(["chr"]);if(!t&&Array.isArray(s))for(const e of s){const{filePath:t,data:s}=await globalThis.electron.readFileDataFromPath(e);it.importCHR(s)}}))),globalThis.electron||(Me.register("window_close",(e=>e)),Me.register("window_minimize",(e=>document.exitFullscreen())),Me.register("window_maximize",(e=>Me.execute("window_toggle_fullscreen"))),Me.register("window_toggle_fullscreen",(()=>{document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()})),Me.register("project_open",(e=>{Re([Oe.project.save.extension],(e=>{lt.open(e)}))})),Me.register("palette_import",(e=>{Re([Oe.palettes.save.extension],(e=>{Ze.import(e)}))})),Me.register("palette_export",(e=>{De(Ne("palette",Oe.palettes.save.extension),Ze.export(!0))})),Me.register("spritesheet_import",(e=>{Re([Oe.spritesheets.save.extension],(e=>{it.import(e)}))})),Me.register("spritesheet_export",(e=>{De(Ne("spritesheet",Oe.spritesheets.save.extension),it.export(!0))})),Me.register("spritesheet_import_chr",(e=>{Re(["chr"],(e=>{it.importCHR(e)}),{readAs:"arraybuffer"})})),Me.register("spritesheet_export_chr",(e=>{const{label:t,data:s}=it.exportCHR();De(Ne(t,"chr"),s)})),Me.register("spritesheet_export_png",(e=>{it.exportAsImage((({blob:e,label:t,options:s})=>{De(Ne(t,"png"),e,{mimetype:e.type})}))}))),Me.register("noop",(e=>e)),Me.register("toggle_theme",(e=>document.documentElement.dataset.theme="dark"==document.documentElement.dataset.theme?"light":"dark")),Me.register("light_theme",(e=>document.documentElement.dataset.theme="light")),Me.register("dark_theme",(e=>document.documentElement.dataset.theme="dark")),Me.register("palette_clear",(e=>Ze.clear())),Me.register("palette_create",(e=>Ze.createLayer())),Me.register("palette_remove",(e=>Ze.removeLayer(e))),Me.register("palette_clone_layer",(e=>Ze.cloneLayer(e))),Me.register("palette_clone_active_layer",(e=>Ze.cloneActiveLayer())),Me.register("palette_make_layer_active",(e=>Ze.makeLayerActive(e))),Me.register("palette_swap_layers",(({to:e,from:t})=>Ze.stores.layers.swapLayers(e,t))),Me.register("palette_update_layer_label",(({source:e,label:t})=>Ze.updateLayerLabel(e,t))),Me.register("palette_active_color",(e=>Lt.setActiveColorIndex(e))),Me.register("spritesheet_clear",(e=>it.clear())),Me.register("spritesheet_create",(e=>it.createLayer())),Me.register("spritesheet_remove",(e=>it.removeLayer(e))),Me.register("spritesheet_clone_layer",(e=>it.cloneLayer(e))),Me.register("spritesheet_clone_active_layer",(e=>it.cloneActiveLayer())),Me.register("spritesheet_make_layer_active",(e=>it.makeLayerActive(e))),Me.register("spritesheet_swap_layers",(({to:e,from:t})=>it.stores.layers.swapLayers(e,t))),Me.register("spritesheet_update_layer_label",(({source:e,label:t})=>it.updateLayerLabel(e,t))),Me.register("spritesheet_zoom",(e=>view.zoom(e))),Me.register("spritesheet_zoom_in",(e=>view.zoom(a(spritesheetsStore).zoom+1))),Me.register("spritesheet_zoom_out",(e=>view.zoom(a(spritesheetsStore).zoom-1))),Me.register("spritesheet_zoom_reset",(e=>view.zoom())),Me.register("spritesheet_set_active_tool",(e=>bt.activeTool.setActive(e))),Me.register("spritesheet_undo",(e=>{const t=it.stores.activeLayer.get();t&&t.undo()})),Me.register("spritesheet_redo",(e=>{const t=it.stores.activeLayer.get();t&&t.redo()})),Me.register("tool_action",(e=>{if("function"!=typeof e)throw new Error("Invalid action call. 'tool_action' expecting a valid function.");e.call(null)}));class kt{constructor(e,t,s,n=[]){Object.assign(this,((e,t)=>{t=(t=`${e="/"+e.replace(/^[\/]+|[\/]+$/g,"")}/${t}`.replace(/[\/]+/g,"/")).replace(/^[\/]+|[\/]+$/g,"");const s=/\*$/.test(t)?(t=t.replace(/[\*]+$/g,""),""):"/?$",n=[];let r=0,o=t.replace(/(:)?([^\\/]+)/g,((e,t,s)=>{const[o,i]=s.split("->");if(t){const t=n.filter((e=>e.identifier==i));if(t.length>0)throw new Error(`Duplicated parameter. [${t.map((e=>e.identifier))}]`);return n.push({index:r++,parameter:e,identifier:o}),i?`(${i})`:"([^/]+)"}return`${e}`}));return o=`^/${o}${s}`,{base:e,route:t,regexpRoute:o,parameters:n}})(e,t)),this.callback=s,this.middlewares=n}}class Et{constructor(...e){this.props=e}use(e){if("function"!=typeof e)throw new Error(`Invalid Middleware use argument. Expecting 'function' got : '${typeof e}'`);return this.execute=(t=>s=>t(e.bind(this,...this.props,s)))(this.execute),this}execute(e){return e.call(null)}}class zt{constructor(e){Object.assign(this,{base:"",path:"",route:"",query:{},params:{},state:{}},e)}}class It{constructor(e){Object.assign(this,e)}}class At extends Error{}class St extends class{constructor(e){Object.freeze(this.__properties={initial:void 0,base:"",state:{},...e}),this.__subscribing=!1,this.__get=new Map,this.__catch=new Map,this.__use=new Set}_register(e,t,s,n){return e.map((e=>{const r=new kt(this.__properties.base,e,t,s);if(n.has(r.regexpRoute))throw new Error(`Route with same endpoint already exist. [${e}, /${n.get(r.regexpRoute).route}](${r.regexpRoute})`);n.set(r.regexpRoute,r)})),e}_props(...e){let t,s,n=[];if(1==e.length)[s]=e,t="*";else if(2==e.length)[t,s]=e;else{if(!(e.length>2))throw new Error("Invalid number prop arguments.");t=e.shift(),s=e.pop(),n=e}return t=Array.isArray(t)?t:[t],{routes:t,fn:s,middlewares:n}}_storeInList(e,t,...s){const{routes:n,fn:r,middlewares:o}=this._props(...s),i=this._register(n,r,o,t),l={[e]:(...t)=>{const{routes:s,fn:n,middlewares:r}=this._props(...t);return i.map((t=>s.map((e=>t+e)).map((t=>this[e](t,...r,n))))),l}};return l}get(...e){return this._storeInList("get",this.__get,...e)}use(...e){const{routes:t,fn:s}=this._props(e);t.map((e=>this.__use.add(new kt(this.__properties.base,e,...s))))}catch(...e){return this._storeInList("catch",this.__catch,...e)}_findRoute(e,t,s){for(let[n,r]of t){const t=e.match(new RegExp(n,"i"));if(t){t.shift();let n={};t.length>0&&(n=r.parameters.reduce(((e,s,n)=>(e[s.identifier]=t[n],e)),n));const o=new URLSearchParams(window.location.search),i={};for(const[e,t]of o.entries())i[e]?Array.isArray(i[e])?i[e].push(t):i[e]=[i[e],t]:i[e]=t;return{RouteInstance:r,Request:new zt({path:e,route:"/"+r.route,base:r.base,query:i,params:n,state:{...s}})}}}}execute(e,t={}){if("string"!=typeof e)throw new Error("Invalid 'execute' argument. Expecting 'string'");if(!this.__subscribing)return;const s=new It({send:(...e)=>this.__router_callback.call(null,...e),error:n=>{const r=this._findRoute(e,this.__catch,t);r?r.RouteInstance.callback.call(null,r.Request,s,n):console.warn(`No route or catch fallbacks found for [${e}]`)}});let n=this._findRoute(e,this.__get,t);if(!n)return void s.error();let r=[];const o=new Et(n.Request,s);this.__use.forEach((t=>{e.match(new RegExp(t.regexpRoute,"i"))&&r.push(t.callback)})),r=[...r,...n.RouteInstance.middlewares,n.RouteInstance.callback],r.map((e=>o.use(e))),o.execute()}subscribe(e){return this.__subscribing=!0,"function"==typeof e&&(this.__router_callback=e),this.__properties.initial&&this.execute(this.__properties.initial,this.__properties.state),()=>{this.__subscribing=!1}}}{}let Mt=new class{constructor(){this.__linkBase="",this.__scrollReset=!0,this.__scrollOffset=0}setLinkBase(e){if("string"!=typeof e)throw new At("Invalid 'linkBase'. Expecting value of type 'string'");return this.__linkBase=e.endsWith("/")?e:e+"/"}set linkBase(e){return this.setLinkBase(e)}get linkBase(){return this.__linkBase}setScrollReset(e){if("boolean"!=typeof e)throw new At("Invalid 'scrollReset'. Expecting value of type 'boolean'");return this.__scrollReset=e}set scrollReset(e){return this.setScrollReset(e)}get scrollReset(){return this.__scrollReset}setScrollOffset(e){if("number"!=typeof e)throw new At("Invalid 'scrollOffset'. Expecting value of type 'number'");return this.__scrollOffset=e}set scrollOffset(e){return this.setScrollOffset(e)}get scrollOffset(){return this.__scrollOffset}};const Ct=e=>{const t=new RegExp(`^${Mt.linkBase}`,"i");return"/"+(e=`/${e}/`.replace(/[\/]+/g,"/").replace(t,"").replace(/^\/|\/$/g,""))},Pt=({state:e})=>{dispatchEvent(new CustomEvent("popstate",{detail:{...e}}))},Tt=(e,t={})=>{e=Dt(e),history.pushState(t,"",e),Pt({url:e,state:t})},Nt=(e,t={})=>{e=Dt(e),history.replaceState(t,"",e),Pt({url:e,state:t})},Rt=(e,t={})=>{history.pushState(t,"",Dt(e))},Dt=e=>`/${Mt.linkBase}/${e}`.replace(/[\/]+/g,"/"),jt=(e,t)=>{Rt(Ct(e));const s=window.location.hash.slice(1);if(s){t&&t.preventDefault();const e=document.querySelector(`a[name="${s}"], #${s}`);if(e){const t=e.getBoundingClientRect().top+window.pageYOffset-Mt.scrollOffset;window.scrollTo({top:t})}}};let Ot={location:{...window.location},firstLoad:!1},Bt=new Map,Ft=xe(),Ht=!1,qt=!1;const Kt=e=>{const t=e.target;if("A"==t.tagName){const s=t.getAttribute("href"),n=s.indexOf("#")>-1;!/^[a-zA-Z]+\:\/\/(.*)/.test(s)&&n&&(jt(s.startsWith("#")?window.location.pathname+s:s,e),Ot.location={...window.location})}},Gt=async e=>{let t=!1;const s=Dt(window.location.pathname+"/")==Dt(Ot.location.pathname+"/")&&Ot.location.search==window.location.search;""!=window.location.hash&&s&&Ot.firstLoad&&(t=!0),""==window.location.hash&&window.location.hash!=Ot.location.hash&&s&&(t=!0,window.scrollTo({top:0})),t||(Ft.set(Ct(window.location.pathname)),Bt.forEach((t=>t.router.execute(window.location.pathname,e.detail)))),Ot.location={...window.location}};const Jt=e=>({component:1&e,props:1&e,decorator:1&e,decoratorProps:1&e}),Ut=e=>({component:e[0].context,props:e[0].props,decorator:e[0].decorator,decoratorProps:e[0].decoratorProps});function Wt(e){let t;const s=e[3].default,n=u(s,e,e[4],Ut),r=n||function(e){let t,s,n,r;const o=[Xt,Yt],i=[];function l(e,t){return e[0].decorator?0:1}return t=l(e),s=i[t]=o[t](e),{c(){s.c(),n=k()},m(e,s){i[t].m(e,s),v(e,n,s),r=!0},p(e,r){let a=t;t=l(e),t===a?i[t].p(e,r):(ne(),ie(i[a],1,1,(()=>{i[a]=null})),re(),s=i[t],s?s.p(e,r):(s=i[t]=o[t](e),s.c()),oe(s,1),s.m(n.parentNode,n))},i(e){r||(oe(s),r=!0)},o(e){ie(s),r=!1},d(e){i[t].d(e),e&&y(n)}}}(e);return{c(){r&&r.c()},m(e,s){r&&r.m(e,s),t=!0},p(e,t){n?n.p&&17&t&&h(n,s,e,e[4],t,Jt,Ut):r&&r.p&&1&t&&r.p(e,t)},i(e){t||(oe(r,e),t=!0)},o(e){ie(r,e),t=!1},d(e){r&&r.d(e)}}}function Yt(e){let s,n,r;const o=[e[0].props];var i=e[0].context;function l(e){let s={};for(let e=0;e<o.length;e+=1)s=t(s,o[e]);return{props:s}}return i&&(s=new i(l())),{c(){s&&fe(s.$$.fragment),n=k()},m(e,t){s&&ge(s,e,t),v(e,n,t),r=!0},p(e,t){const r=1&t?pe(o,[he(e[0].props)]):{};if(i!==(i=e[0].context)){if(s){ne();const e=s;ie(e.$$.fragment,1,0,(()=>{me(e,1)})),re()}i?(s=new i(l()),fe(s.$$.fragment),oe(s.$$.fragment,1),ge(s,n.parentNode,n)):s=null}else i&&s.$set(r)},i(e){r||(s&&oe(s.$$.fragment,e),r=!0)},o(e){s&&ie(s.$$.fragment,e),r=!1},d(e){e&&y(n),s&&me(s,e)}}}function Xt(e){let s,n,r;const o=[e[0].decoratorProps?e[0].decoratorProps:{}];var i=e[0].decorator;function l(e){let s={$$slots:{default:[Vt]},$$scope:{ctx:e}};for(let e=0;e<o.length;e+=1)s=t(s,o[e]);return{props:s}}return i&&(s=new i(l(e))),{c(){s&&fe(s.$$.fragment),n=k()},m(e,t){s&&ge(s,e,t),v(e,n,t),r=!0},p(e,t){const r=1&t?pe(o,[he(e[0].decoratorProps?e[0].decoratorProps:{})]):{};if(17&t&&(r.$$scope={dirty:t,ctx:e}),i!==(i=e[0].decorator)){if(s){ne();const e=s;ie(e.$$.fragment,1,0,(()=>{me(e,1)})),re()}i?(s=new i(l(e)),fe(s.$$.fragment),oe(s.$$.fragment,1),ge(s,n.parentNode,n)):s=null}else i&&s.$set(r)},i(e){r||(s&&oe(s.$$.fragment,e),r=!0)},o(e){s&&ie(s.$$.fragment,e),r=!1},d(e){e&&y(n),s&&me(s,e)}}}function Vt(e){let s,n,r;const o=[e[0].props];var i=e[0].context;function l(e){let s={};for(let e=0;e<o.length;e+=1)s=t(s,o[e]);return{props:s}}return i&&(s=new i(l())),{c(){s&&fe(s.$$.fragment),n=k()},m(e,t){s&&ge(s,e,t),v(e,n,t),r=!0},p(e,t){const r=1&t?pe(o,[he(e[0].props)]):{};if(i!==(i=e[0].context)){if(s){ne();const e=s;ie(e.$$.fragment,1,0,(()=>{me(e,1)})),re()}i?(s=new i(l()),fe(s.$$.fragment),oe(s.$$.fragment,1),ge(s,n.parentNode,n)):s=null}else i&&s.$set(r)},i(e){r||(s&&oe(s.$$.fragment,e),r=!0)},o(e){s&&ie(s.$$.fragment,e),r=!1},d(e){e&&y(n),s&&me(s,e)}}}function Zt(e){let t,s,n=e[0]&&Wt(e);return{c(){n&&n.c(),t=k()},m(e,r){n&&n.m(e,r),v(e,t,r),s=!0},p(e,[s]){e[0]?n?(n.p(e,s),1&s&&oe(n,1)):(n=Wt(e),n.c(),oe(n,1),n.m(t.parentNode,t)):n&&(ne(),ie(n,1,1,(()=>{n=null})),re())},i(e){s||(oe(n),s=!0)},o(e){ie(n),s=!1},d(e){n&&n.d(e),e&&y(t)}}}function Qt(e,t,s){let n,{$$slots:r={},$$scope:o}=t,{context:i=Bt.keys().next().value}=t;if(!(i&&i instanceof St))throw new Error("Invalid Router context. Did you initialize the component with a valid context?");const{component:l}=Bt.get(i);return c(e,l,(e=>s(0,n=e))),i.subscribe((async(e,t={},s={})=>{if("function"!=typeof e)throw new At("Unable to load component. Did you pass a valid svelte component to the 'send' response?");Mt.scrollReset&&window.scrollTo({top:0}),l.set({context:s?e:class extends e{},decorator:s.component?class extends s.component{}:void 0,decoratorProps:s.props||void 0,props:t}),window.location.hash&&(await W(),setTimeout((()=>{jt(window.location.pathname+window.location.hash)}),0)),Ot.firstLoad||(Ot.firstLoad=!0)})),e.$$set=e=>{"context"in e&&s(2,i=e.context),"$$scope"in e&&s(4,o=e.$$scope)},[n,l,i,r,o]}class es extends ve{constructor(e){super(),$e(this,e,Qt,Zt,i,{context:2})}}var ts=(e,t)=>{if(t={type:"navigate",state:{},title:"",...t},Mt.linkBase){const t=Dt(e.getAttribute("href")||"");e.setAttribute("href",t)}const s=e=>{let s=t.to||t.href||e.currentTarget.getAttribute("href")||e.currentTarget.getAttribute("data-href");if(s)if(s=Ct(s),e.preventDefault(),"navigate"==t.type)Tt(s,t.state,t.title);else if("redirect"==t.type)Nt(s,t.state,t.title);else if("replace"==t.type)Rt(s,t.state,t.title);else{if("alter"!=t.type)return void console.warn("Invalid 'use:link' type. Expecting 'navigate'(default), 'redirect', 'replace' or 'alter'");((e,t={})=>{history.replaceState(t,"",Dt(e))})(s,t.state,t.title)}};return e.addEventListener("click",s),{update(e){t={...t,...e}},destroy(){e.removeEventListener("click",s)}}},ss=(e,...t)=>{let s;if(e instanceof St?s=t.shift():(s=e,e=Bt.keys().next().value),!e)throw new Error("Invalid Router context. Did you initialize the decorator with a valid context? or made sure to call it after one has been created?");let n="";const r=(o,...i)=>{let l;n||(n=o);let a=e=>{l={...e}};const c=i.pop();return e.get(o,...t,...i,((e,t)=>{c(e,{send:(e,n)=>{t.send(e,n,{component:s,props:l})},error:t.error},a)})),{get:(e,...t)=>r(`${n}/${e}`,...t)}};return r};function ns(t){let s;return{c(){s=w("div"),s.innerHTML="<h1>This page is not available</h1> \n  <p>Currently not available in this version of the application.</p>",I(s,"class","checkered svelte-19ubedp")},m(e,t){v(e,s,t)},p:e,i:e,o:e,d(e){e&&y(s)}}}class rs extends ve{constructor(e){super(),$e(this,e,null,ns,i,{})}}globalThis.electron||"localhost"===window.location.hostname||(Mt.linkBase="/NESBitStudio-web");const os=(e=>{(async()=>{Ht||(Ht=!0,qt||(qt=!0,Ft.set(Ct(window.location.pathname))),window.addEventListener("popstate",Gt),window.addEventListener("click",Kt))})();const t=new St(e);return Bt.set(t,{component:xe(),router:t}),t})({initial:window.location.pathname,base:Mt.linkBase});function is(e){let t,s,n;const r=e[1].default,o=u(r,e,e[0],null);return{c(){t=w("div"),s=w("ul"),o&&o.c(),I(s,"id","areanav"),I(s,"class","svelte-1vnr3x8"),I(t,"id","tabnav"),I(t,"class","svelte-1vnr3x8")},m(e,r){v(e,t,r),$(t,s),o&&o.m(s,null),n=!0},p(e,[t]){o&&o.p&&1&t&&h(o,r,e,e[0],t,null,null)},i(e){n||(oe(o,e),n=!0)},o(e){ie(o,e),n=!1},d(e){e&&y(t),o&&o.d(e)}}}function ls(e,t,s){let{$$slots:n={},$$scope:r}=t;return e.$$set=e=>{"$$scope"in e&&s(0,r=e.$$scope)},[r,n]}os.catch(((e,t)=>{t.send(rs)}));class as extends ve{constructor(e){super(),$e(this,e,ls,is,i,{})}}function cs(e,t,s){const n=e.slice();return n[2]=t[s],n}function us(e){let t,s,n,r,o,i,l=e[2].label+"";return{c(){t=w("li"),s=w("button"),n=_(l),r=L(),I(s,"href",e[2].href),I(s,"label",e[2].label),I(s,"class","svelte-1p6gkk9"),I(t,"class","no-drag"),P(t,"active",e[2].href==e[0])},m(e,l){v(e,t,l),$(t,s),$(s,n),$(t,r),o||(i=m(ts.call(null,s)),o=!0)},p(e,s){3&s&&P(t,"active",e[2].href==e[0])},d(e){e&&y(t),o=!1,i()}}}function ps(e){let t,s=e[1],n=[];for(let t=0;t<s.length;t+=1)n[t]=us(cs(e,s,t));return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=k()},m(e,s){for(let t=0;t<n.length;t+=1)n[t].m(e,s);v(e,t,s)},p(e,r){if(3&r){let o;for(s=e[1],o=0;o<s.length;o+=1){const i=cs(e,s,o);n[o]?n[o].p(i,r):(n[o]=us(i),n[o].c(),n[o].m(t.parentNode,t))}for(;o<n.length;o+=1)n[o].d(1);n.length=s.length}},d(e){x(n,e),e&&y(t)}}}function hs(e){let t,s;return t=new as({props:{$$slots:{default:[ps]},$$scope:{ctx:e}}}),{c(){fe(t.$$.fragment)},m(e,n){ge(t,e,n),s=!0},p(e,[s]){const n={};33&s&&(n.$$scope={dirty:s,ctx:e}),t.$set(n)},i(e){s||(oe(t.$$.fragment,e),s=!0)},o(e){ie(t.$$.fragment,e),s=!1},d(e){me(t,e)}}}function ds(e,t,s){let n;c(e,Ft,(e=>s(0,n=e)));return[n,[{href:"/graphics/palettes",label:"Palettes"},{href:"/graphics/spritesheets",label:"Spritesheets"},{href:"/graphics/spritesets",label:"Sprite sets"},{href:"/graphics/metatiles",label:"Metatiles"},{href:"/graphics/tilemaps",label:"Tilemaps"}]]}class fs extends ve{constructor(e){super(),$e(this,e,ds,hs,i,{})}}function gs(e){let t,s,n,r,o,i;n=new fs({});const l=e[1].default,a=u(l,e,e[0],null);return{c(){t=w("section"),s=w("div"),fe(n.$$.fragment),r=L(),o=w("div"),a&&a.c(),I(o,"class","main svelte-10f6qa1"),I(t,"id","spritesheets"),I(t,"class","svelte-10f6qa1")},m(e,l){v(e,t,l),$(t,s),ge(n,s,null),$(t,r),$(t,o),a&&a.m(o,null),i=!0},p(e,[t]){a&&a.p&&1&t&&h(a,l,e,e[0],t,null,null)},i(e){i||(oe(n.$$.fragment,e),oe(a,e),i=!0)},o(e){ie(n.$$.fragment,e),ie(a,e),i=!1},d(e){e&&y(t),me(n),a&&a.d(e)}}}function ms(e,t,s){let{$$slots:n={},$$scope:r}=t;return e.$$set=e=>{"$$scope"in e&&s(0,r=e.$$scope)},[r,n]}class $s extends ve{constructor(e){super(),$e(this,e,ms,gs,i,{})}}function vs(e){let t,s,n,r,o,i;n=new fs({});const l=e[1].default,a=u(l,e,e[0],null);return{c(){t=w("section"),s=w("div"),fe(n.$$.fragment),r=L(),o=w("div"),a&&a.c(),I(o,"class","main svelte-aj3pvw"),I(t,"id","palettes"),I(t,"class","svelte-aj3pvw")},m(e,l){v(e,t,l),$(t,s),ge(n,s,null),$(t,r),$(t,o),a&&a.m(o,null),i=!0},p(e,[t]){a&&a.p&&1&t&&h(a,l,e,e[0],t,null,null)},i(e){i||(oe(n.$$.fragment,e),oe(a,e),i=!0)},o(e){ie(n.$$.fragment,e),ie(a,e),i=!1},d(e){e&&y(t),me(n),a&&a.d(e)}}}function ys(e,t,s){let{$$slots:n={},$$scope:r}=t;return e.$$set=e=>{"$$scope"in e&&s(0,r=e.$$scope)},[r,n]}function xs(e){let t,s,n,o,i,l,a;const c=e[4].default,p=u(c,e,e[3],null);return{c(){t=w("div"),s=w("div"),n=w("div"),o=w("div"),p&&p.c(),I(o,"class","content svelte-131dyyn"),I(n,"class","wrapper svelte-131dyyn"),I(s,"class","outer svelte-131dyyn"),I(t,"class","artboard svelte-131dyyn"),P(t,"active",e[0])},m(r,c){v(r,t,c),$(t,s),$(s,n),$(n,o),p&&p.m(o,null),e[5](n),e[6](s),e[8](t),i=!0,l||(a=[E(s,"mousedown",e[2],!0),E(s,"wheel",e[7]),E(t,"wheel",e[1])],l=!0)},p(e,[s]){p&&p.p&&8&s&&h(p,c,e,e[3],s,null,null),1&s&&P(t,"active",e[0])},i(e){i||(oe(p,e),i=!0)},o(e){ie(p,e),i=!1},d(s){s&&y(t),p&&p.d(s),e[5](null),e[6](null),e[8](null),l=!1,r(a)}}}let ws,bs,_s;const Ls=()=>{ws.scrollTo(bs.offsetWidth/2-ws.offsetWidth/2,bs.offsetHeight/2-ws.offsetHeight/2)};function ks(e,t,s){let{$$slots:n={},$$scope:r}=t;const o=O();let i=!1,l=!1;const a=new ResizeObserver((e=>(e=>{for(const t of e)if(t.contentRect){t.contentRect;const e={x:8e3,y:8e3};bs.style.height=e.y+"px",bs.style.width=e.x+"px",i||(i=!0,Ls())}})(e)));let c,u,p,h,d={};const f=e=>{e.preventDefault(),d[e.code]=!0},g=e=>{d[e.code]=!1},m=()=>{s(0,l=!1)},$=e=>{const t=1*(e.pageX-ws.offsetLeft-c),s=1*(e.pageY-ws.offsetTop-u);l&&(e.preventDefault(),ws.scrollLeft=p-t,ws.scrollTop=h-s)};D((()=>{document.addEventListener("keydown",f),document.addEventListener("keyup",g),a.observe(_s),document.addEventListener("mousemove",$),document.addEventListener("mouseup",m)})),j((()=>{document.removeEventListener("keydown",f),document.removeEventListener("keyup",g),a.disconnect(),document.removeEventListener("mousemove",$),document.removeEventListener("mouseup",m)}));return e.$$set=e=>{"$$scope"in e&&s(3,r=e.$$scope)},[l,e=>{o("artboardScrollEvent",e)},e=>{(d.Space||2==e.which)&&(e.stopImmediatePropagation(),e.preventDefault(),s(0,l=!0),c=e.pageX-ws.offsetLeft,p=ws.scrollLeft,u=e.pageY-ws.offsetTop,h=ws.scrollTop)},r,n,function(e){H[e?"unshift":"push"]((()=>{bs=e}))},function(e){H[e?"unshift":"push"]((()=>{ws=e}))},e=>e.preventDefault(),function(e){H[e?"unshift":"push"]((()=>{_s=e}))}]}class Es extends ve{constructor(e){super(),$e(this,e,ks,xs,i,{})}}function zs(t){let s,n,r,o,i;return{c(){s=w("button"),n=w("div"),r=_(""),M(n,"--color",t[0]),I(n,"class","svelte-10hh6bt"),I(s,"class","color-selector svelte-10hh6bt"),P(s,"selected",t[1])},m(e,l){v(e,s,l),$(s,n),$(n,r),o||(i=E(s,"click",t[2]),o=!0)},p(e,[t]){1&t&&M(n,"--color",e[0]),2&t&&P(s,"selected",e[1])},i:e,o:e,d(e){e&&y(s),o=!1,i()}}}function Is(e,t,s){let{color:n}=t,{selected:r}=t;return e.$$set=e=>{"color"in e&&s(0,n=e.color),"selected"in e&&s(1,r=e.selected)},[n,r,function(t){B(e,t)}]}class As extends ve{constructor(e){super(),$e(this,e,Is,zs,i,{color:0,selected:1})}}function Ss(e,t,s){const n=e.slice();return n[5]=t[s],n[7]=s,n}function Ms(e){let t,s,n=e[0].colors,r=[];for(let t=0;t<n.length;t+=1)r[t]=Cs(Ss(e,n,t));const o=e=>ie(r[e],1,1,(()=>{r[e]=null}));return{c(){t=w("ul");for(let e=0;e<r.length;e+=1)r[e].c()},m(e,n){v(e,t,n);for(let e=0;e<r.length;e+=1)r[e].m(t,null);s=!0},p(e,s){if(3&s){let i;for(n=e[0].colors,i=0;i<n.length;i+=1){const o=Ss(e,n,i);r[i]?(r[i].p(o,s),oe(r[i],1)):(r[i]=Cs(o),r[i].c(),oe(r[i],1),r[i].m(t,null))}for(ne(),i=n.length;i<r.length;i+=1)o(i);re()}},i(e){if(!s){for(let e=0;e<n.length;e+=1)oe(r[e]);s=!0}},o(e){r=r.filter(Boolean);for(let e=0;e<r.length;e+=1)ie(r[e]);s=!1},d(e){e&&y(t),x(r,e)}}}function Cs(e){let t,s,n,r;return s=new As({props:{color:e[5].rgb,selected:e[1]===e[7]}}),s.$on("click",(function(...t){return e[4](e[7],...t)})),{c(){t=w("li"),fe(s.$$.fragment),n=L()},m(e,o){v(e,t,o),ge(s,t,null),$(t,n),r=!0},p(t,n){e=t;const r={};1&n&&(r.color=e[5].rgb),2&n&&(r.selected=e[1]===e[7]),s.$set(r)},i(e){r||(oe(s.$$.fragment,e),r=!0)},o(e){ie(s.$$.fragment,e),r=!1},d(e){e&&y(t),me(s)}}}function Ps(e){let t,s,n=e[0]&&Ms(e);return{c(){n&&n.c(),t=k()},m(e,r){n&&n.m(e,r),v(e,t,r),s=!0},p(e,[s]){e[0]?n?(n.p(e,s),1&s&&oe(n,1)):(n=Ms(e),n.c(),oe(n,1),n.m(t.parentNode,t)):n&&(ne(),ie(n,1,1,(()=>{n=null})),re())},i(e){s||(oe(n),s=!0)},o(e){ie(n),s=!1},d(e){n&&n.d(e),e&&y(t)}}}function Ts(e,t,s){let n,r;const{activeLayer:o,selectedColor:i}=Ze.stores;c(e,o,(e=>s(0,n=e))),c(e,i,(e=>s(1,r=e)));return[n,r,o,i,(e,t)=>Me.execute("palette_active_color",e)]}class Ns extends ve{constructor(e){super(),$e(this,e,Ts,Ps,i,{})}}function Rs(e){let t,s,n,o;const i=e[2].default,l=u(i,e,e[1],null);return{c(){t=w("button"),l&&l.c(),I(t,"class","svelte-1j1cp6x"),P(t,"selected",e[0])},m(r,i){v(r,t,i),l&&l.m(t,null),s=!0,n||(o=[E(t,"dblclick",e[3]),E(t,"click",e[4])],n=!0)},p(e,[s]){l&&l.p&&2&s&&h(l,i,e,e[1],s,null,null),1&s&&P(t,"selected",e[0])},i(e){s||(oe(l,e),s=!0)},o(e){ie(l,e),s=!1},d(e){e&&y(t),l&&l.d(e),n=!1,r(o)}}}function Ds(e,t,s){let{$$slots:n={},$$scope:r}=t,{selected:o}=t;return e.$$set=e=>{"selected"in e&&s(0,o=e.selected),"$$scope"in e&&s(1,r=e.$$scope)},[o,r,n,function(t){B(e,t)},function(t){B(e,t)}]}class js extends ve{constructor(e){super(),$e(this,e,Ds,Rs,i,{selected:0})}}function Os(e,t,s){const n=e.slice();return n[6]=t[s],n}function Bs(t){let s,n;return{c(){s=b("svg"),n=b("path"),I(n,"d",t[6].icon),I(s,"xmlns","http://www.w3.org/2000/svg"),I(s,"width","18"),I(s,"height","18"),I(s,"viewBox","0 0 24 24")},m(e,t){v(e,s,t),$(s,n)},p:e,d(e){e&&y(s)}}}function Fs(e){let t,s,n=e[6].visible_in_toolbar&&function(e){let t,s,n,r;return s=new js({props:{selected:e[0]===e[6],$$slots:{default:[Bs]},$$scope:{ctx:e}}}),s.$on("dblclick",e[3]),s.$on("click",(function(...t){return e[4](e[6],...t)})),{c(){t=w("li"),fe(s.$$.fragment),n=L(),I(t,"class","svelte-1pqmo8i")},m(e,o){v(e,t,o),ge(s,t,null),$(t,n),r=!0},p(t,n){e=t;const r={};1&n&&(r.selected=e[0]===e[6]),512&n&&(r.$$scope={dirty:n,ctx:e}),s.$set(r)},i(e){r||(oe(s.$$.fragment,e),r=!0)},o(e){ie(s.$$.fragment,e),r=!1},d(e){e&&y(t),me(s)}}}(e);return{c(){n&&n.c(),t=k()},m(e,r){n&&n.m(e,r),v(e,t,r),s=!0},p(e,t){e[6].visible_in_toolbar&&n.p(e,t)},i(e){s||(oe(n),s=!0)},o(e){ie(n),s=!1},d(e){n&&n.d(e),e&&y(t)}}}function Hs(e){let t,s,n=e[2],r=[];for(let t=0;t<n.length;t+=1)r[t]=Fs(Os(e,n,t));const o=e=>ie(r[e],1,1,(()=>{r[e]=null}));return{c(){t=w("ul");for(let e=0;e<r.length;e+=1)r[e].c()},m(e,n){v(e,t,n);for(let e=0;e<r.length;e+=1)r[e].m(t,null);s=!0},p(e,[s]){if(5&s){let i;for(n=e[2],i=0;i<n.length;i+=1){const o=Os(e,n,i);r[i]?(r[i].p(o,s),oe(r[i],1)):(r[i]=Fs(o),r[i].c(),oe(r[i],1),r[i].m(t,null))}for(ne(),i=n.length;i<r.length;i+=1)o(i);re()}},i(e){if(!s){for(let e=0;e<n.length;e+=1)oe(r[e]);s=!0}},o(e){r=r.filter(Boolean);for(let e=0;e<r.length;e+=1)ie(r[e]);s=!1},d(e){e&&y(t),x(r,e)}}}function qs(e,t,s){let n;const{tools:r,activeTool:o}=bt;c(e,o,(e=>s(0,n=e)));const i=Object.values(r);i.sort(((e,t)=>t.weight-e.weight));return[n,o,i,e=>Me.execute("noop"),(e,t)=>Me.execute("spritesheet_set_active_tool",e.enum)]}class Ks extends ve{constructor(e){super(),$e(this,e,qs,Hs,i,{})}}function Gs(t){let s,n,r,o,i,l,a;return r=new Ks({}),l=new Ns({}),{c(){s=w("section"),n=w("section"),fe(r.$$.fragment),o=L(),i=w("section"),fe(l.$$.fragment),I(n,"class","toolbar-section svelte-t490rv"),I(i,"class","color-selector-section svelte-t490rv"),I(s,"class","toolbar svelte-t490rv")},m(e,t){v(e,s,t),$(s,n),ge(r,n,null),$(s,o),$(s,i),ge(l,i,null),a=!0},p:e,i(e){a||(oe(r.$$.fragment,e),oe(l.$$.fragment,e),a=!0)},o(e){ie(r.$$.fragment,e),ie(l.$$.fragment,e),a=!1},d(e){e&&y(s),me(r),me(l)}}}class Js extends ve{constructor(e){super(),$e(this,e,null,Gs,i,{})}}function Us(e){let s,n,r,o;const i=e[4].default,l=u(i,e,e[3],null),a=l||function(e){let t;return{c(){t=_("placeholder")},m(e,s){v(e,t,s)},d(e){e&&y(t)}}}();let c=[{role:"button"},e[2]],p={};for(let e=0;e<c.length;e+=1)p=t(p,c[e]);return{c(){s=w("button"),a&&a.c(),A(s,p),P(s,"danger","danger"==e[0]),P(s,"svelte-vh27lv",!0)},m(t,i){v(t,s,i),a&&a.m(s,null),n=!0,r||(o=E(s,"click",e[1]),r=!0)},p(e,[t]){l&&l.p&&8&t&&h(l,i,e,e[3],t,null,null),A(s,p=pe(c,[{role:"button"},4&t&&e[2]])),P(s,"danger","danger"==e[0]),P(s,"svelte-vh27lv",!0)},i(e){n||(oe(a,e),n=!0)},o(e){ie(a,e),n=!1},d(e){e&&y(s),a&&a.d(e),r=!1,o()}}}function Ws(e,s,n){let{$$slots:r={},$$scope:o}=s;const i=O();let{variant:l}=s;return e.$$set=e=>{n(2,s=t(t({},s),d(e))),"variant"in e&&n(0,l=e.variant),"$$scope"in e&&n(3,o=e.$$scope)},s=d(s),[l,e=>{("danger"!=l||e.ctrlKey||e.altKey)&&i("click")},s,o,r]}class Ys extends ve{constructor(e){super(),$e(this,e,Ws,Us,i,{variant:0})}}const Xs=(e,t,s,n)=>{const r=e;if(t<r.length){const n=e.slice(0,t);e=n.slice(0,n.lastIndexOf(s))}return"function"==typeof n&&(e=n.call(null,e,r,s)),e};function Vs(e){let t,s,n,o;const i=e[9].default,l=u(i,e,e[8],null),a=l||function(e){let t;return{c(){t=_("Label")},m(e,s){v(e,t,s)},d(e){e&&y(t)}}}();return{c(){t=w("div"),a&&a.c(),I(t,"class","heading svelte-moa0u7"),I(t,"spellcheck","false"),P(t,"active",e[0])},m(r,i){v(r,t,i),a&&a.m(t,null),e[10](t),s=!0,n||(o=[E(t,"click",e[1]),E(t,"focus",e[3]),E(t,"blur",e[5]),E(t,"keydown",e[4])],n=!0)},p(e,[s]){l&&l.p&&256&s&&h(l,i,e,e[8],s,null,null),1&s&&P(t,"active",e[0])},i(e){s||(oe(a,e),s=!0)},o(e){ie(a,e),s=!1},d(s){s&&y(t),a&&a.d(s),e[10](null),n=!1,r(o)}}}function Zs(e,t,s){let{$$slots:n={},$$scope:r}=t,{active:o}=t,{label:i}=t,{iconIndicator:l}=t;const a=O();let c,u=null;return e.$$set=e=>{"active"in e&&s(0,o=e.active),"label"in e&&s(7,i=e.label),"iconIndicator"in e&&s(6,l=e.iconIndicator),"$$scope"in e&&s(8,r=e.$$scope)},[o,e=>{e.preventDefault();let t=!1;1==e.detail&&e.target==c?(a("makeActive"),t||(t=!0,setTimeout((e=>t=!1),60))):(s(6,l=!1),s(2,c.contentEditable=!0,c),c.focus())},c,e=>{e.target.textContent=i;const t=document.createRange(),s=window.getSelection();t.selectNodeContents(e.target),s.removeAllRanges(),s.addRange(t)},e=>{if(u||(u=e.currentTarget.textContent),e.stopPropagation(),e.stopImmediatePropagation(),27==e.which)return e.currentTarget.textContent=u,e.preventDefault(),void c.blur();if(13==e.which&&(e.preventDefault(),c.blur()),8==e.which||46==e.which||37==e.which||39==e.which)return;/^[a-z\s]$/i.test(e.key)||"Backspace"===e.key?e.currentTarget.textContent.length>20&&e.preventDefault():e.preventDefault()},e=>{u=null,s(6,l=!0);const t=e.target.textContent;e.target.textContent=Xs(t,15,"",((e,t)=>e!=t?e+"...":e)),window.getSelection().removeAllRanges(),e.target.contentEditable=!1,a("change",t)},l,i,r,n,function(e){H[e?"unshift":"push"]((()=>{c=e,s(2,c)}))}]}class Qs extends ve{constructor(e){super(),$e(this,e,Zs,Vs,i,{active:0,label:7,iconIndicator:6,edit:1})}get edit(){return this.$$.ctx[1]}}function en(e){let t,s,n,r;const o=e[2].default,i=u(o,e,e[1],null);return{c(){t=w("button"),i&&i.c(),I(t,"class","svelte-1dsxcgu"),P(t,"danger","danger"==e[0])},m(o,l){v(o,t,l),i&&i.m(t,null),s=!0,n||(r=E(t,"click",e[3]),n=!0)},p(e,[s]){i&&i.p&&2&s&&h(i,o,e,e[1],s,null,null),1&s&&P(t,"danger","danger"==e[0])},i(e){s||(oe(i,e),s=!0)},o(e){ie(i,e),s=!1},d(e){e&&y(t),i&&i.d(e),n=!1,r()}}}function tn(e,t,s){let{$$slots:n={},$$scope:r}=t,{variant:o}=t;return e.$$set=e=>{"variant"in e&&s(0,o=e.variant),"$$scope"in e&&s(1,r=e.$$scope)},[o,r,n,function(t){B(e,t)}]}class sn extends ve{constructor(e){super(),$e(this,e,tn,en,i,{variant:0})}}const nn=(e,t)=>{if(!t||"string"!=typeof t.type)throw new Error("Invalid 'drag' actions properties. Expecting 'type' of type 'string'");if(!t.value)throw new Error("Invalid 'drag' actions value.");e.draggable=!0,e.classList.add("draggable");const s=e=>{e.stopImmediatePropagation(),e.dataTransfer.setData(t.type,JSON.stringify(t.value||"")),window.dispatchEvent(new Event("mouseup"))};return e.addEventListener("dragstart",s),{destroy(){e.removeEventListener("dragstart",s)}}},rn=(e,t)=>{if(!t)throw new Error("Invalid 'drop' actions props.");const s=(e,s)=>{if(t[e]||"function"==typeof t[e])return t[e];if(!s)throw new Error(`Invalid 'drop' callback : [${e}]`)},n=t=>{t.preventDefault(),s("over",!0).call(null,t,e)};e.addEventListener("dragover",n);e.addEventListener("dragleave",(t=>{s("leave",!0).call(null,t,e)}));const r=n=>{s("drop").call(null,{e:n,node:e,value:t.value})};return e.addEventListener("drop",r),{destroy(){e.removeEventListener("dragover",n),e.removeEventListener("drop",r)}}};function on(e){let t;return{c(){t=_(e[5])},m(e,s){v(e,t,s)},p(e,s){32&s&&S(t,e[5])},d(e){e&&y(t)}}}function ln(e){let t,s,n,r;s=new sn({props:{$$slots:{default:[an]},$$scope:{ctx:e}}}),s.$on("click",e[19]);let o=e[2]&&cn(e);return{c(){t=w("div"),fe(s.$$.fragment),n=L(),o&&o.c(),I(t,"class","icon-indicator svelte-7368bw")},m(e,i){v(e,t,i),ge(s,t,null),$(t,n),o&&o.m(t,null),r=!0},p(e,n){const r={};1048576&n&&(r.$$scope={dirty:n,ctx:e}),s.$set(r),e[2]?o?(o.p(e,n),4&n&&oe(o,1)):(o=cn(e),o.c(),oe(o,1),o.m(t,null)):o&&(ne(),ie(o,1,1,(()=>{o=null})),re())},i(e){r||(oe(s.$$.fragment,e),oe(o),r=!0)},o(e){ie(s.$$.fragment,e),ie(o),r=!1},d(e){e&&y(t),me(s),o&&o.d()}}}function an(e){let t,s;return{c(){t=b("svg"),s=b("path"),I(s,"d","M19.769 9.923l-12.642 12.639-7.127 1.438 1.438-7.128 12.641-12.64 5.69 5.691zm1.414-1.414l2.817-2.82-5.691-5.689-2.816 2.817 5.69 5.692z"),I(s,"class","svelte-7368bw"),I(t,"xmlns","http://www.w3.org/2000/svg"),I(t,"width","12"),I(t,"height","12"),I(t,"viewBox","0 0 24 24"),I(t,"class","svelte-7368bw")},m(e,n){v(e,t,n),$(t,s)},d(e){e&&y(t)}}}function cn(e){let t,s,n,r;return t=new sn({props:{$$slots:{default:[un]},$$scope:{ctx:e}}}),t.$on("click",e[11]),n=new sn({props:{variant:"danger",$$slots:{default:[pn]},$$scope:{ctx:e}}}),n.$on("click",e[10]),{c(){fe(t.$$.fragment),s=L(),fe(n.$$.fragment)},m(e,o){ge(t,e,o),v(e,s,o),ge(n,e,o),r=!0},p(e,s){const r={};1048576&s&&(r.$$scope={dirty:s,ctx:e}),t.$set(r);const o={};1048576&s&&(o.$$scope={dirty:s,ctx:e}),n.$set(o)},i(e){r||(oe(t.$$.fragment,e),oe(n.$$.fragment,e),r=!0)},o(e){ie(t.$$.fragment,e),ie(n.$$.fragment,e),r=!1},d(e){me(t,e),e&&y(s),me(n,e)}}}function un(e){let t,s;return{c(){t=b("svg"),s=b("path"),I(s,"d","M18 6v-6h-18v18h6v6h18v-18h-6zm-12 10h-4v-14h14v4h-10v10zm16 6h-14v-14h14v14zm-3-8h-3v-3h-2v3h-3v2h3v3h2v-3h3v-2z"),I(s,"class","svelte-7368bw"),I(t,"xmlns","http://www.w3.org/2000/svg"),I(t,"width","12"),I(t,"height","12"),I(t,"viewBox","0 0 24 24"),I(t,"class","svelte-7368bw")},m(e,n){v(e,t,n),$(t,s)},d(e){e&&y(t)}}}function pn(e){let t,s;return{c(){t=b("svg"),s=b("path"),I(s,"d","M3 6v18h18v-18h-18zm5 14c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm5 0c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm5 0c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm4-18v2h-20v-2h5.711c.9 0 1.631-1.099 1.631-2h5.315c0 .901.73 2 1.631 2h5.712z"),I(s,"class","svelte-7368bw"),I(t,"xmlns","http://www.w3.org/2000/svg"),I(t,"width","12"),I(t,"height","12"),I(t,"viewBox","0 0 24 24"),I(t,"class","svelte-7368bw")},m(e,n){v(e,t,n),$(t,s)},d(e){e&&y(t)}}}function hn(e){let t,s,n,i,l,a,c,p,d,f,g;function x(t){e[15].call(null,t)}let b={active:e[8],label:e[0].label,$$slots:{default:[on]},$$scope:{ctx:e}};void 0!==e[4]&&(b.iconIndicator=e[4]),n=new Qs({props:b}),H.push((()=>de(n,"iconIndicator",x))),e[16](n),n.$on("makeActive",e[17]),n.$on("change",e[18]);let _=e[4]&&ln(e);const k=e[14].default,E=u(k,e,e[20],null);return{c(){t=w("div"),s=w("div"),fe(n.$$.fragment),l=L(),_&&_.c(),a=L(),E&&E.c(),I(s,"class","panel-header svelte-7368bw"),I(t,"class","layer-item svelte-7368bw"),P(t,"over",e[7]),P(t,"active",e[8])},m(r,o){v(r,t,o),$(t,s),ge(n,s,null),$(s,l),_&&_.m(s,null),$(t,a),E&&E.m(t,null),d=!0,f||(g=[m(c=nn.call(null,t,{type:"flipPalette",value:{layerIndex:e[3]}})),m(p=rn.call(null,t,{...e[12],value:{layerIndex:e[3]}}))],f=!0)},p(e,[r]){const l={};256&r&&(l.active=e[8]),1&r&&(l.label=e[0].label),1048608&r&&(l.$$scope={dirty:r,ctx:e}),!i&&16&r&&(i=!0,l.iconIndicator=e[4],X((()=>i=!1))),n.$set(l),e[4]?_?(_.p(e,r),16&r&&oe(_,1)):(_=ln(e),_.c(),oe(_,1),_.m(s,null)):_&&(ne(),ie(_,1,1,(()=>{_=null})),re()),E&&E.p&&1048576&r&&h(E,k,e,e[20],r,null,null),c&&o(c.update)&&8&r&&c.update.call(null,{type:"flipPalette",value:{layerIndex:e[3]}}),p&&o(p.update)&&8&r&&p.update.call(null,{...e[12],value:{layerIndex:e[3]}}),128&r&&P(t,"over",e[7]),256&r&&P(t,"active",e[8])},i(e){d||(oe(n.$$.fragment,e),oe(_),oe(E,e),d=!0)},o(e){ie(n.$$.fragment,e),ie(_),ie(E,e),d=!1},d(s){s&&y(t),e[16](null),me(n),_&&_.d(),E&&E.d(s),f=!1,r(g)}}}function dn(t,s,n){let r,o,i=e,a=()=>(i(),i=l(h,(e=>n(13,o=e))),h);t.$$.on_destroy.push((()=>i()));let{$$slots:c={},$$scope:u}=s,{source:p}=s,{activeLayer:h}=s;a();let d,f,{showEditButtons:g=!0}=s,{layerIndex:m}=s,$=!0;const v=O();let y;const x={over:e=>n(7,y=!0),leave:e=>n(7,y=!1),drop:({e:e,value:t})=>{n(7,y=!1);const s=e.dataTransfer.getData("flipPalette");if(s){const e=Number(JSON.parse(s).layerIndex);v("swapLayers",{to:e,from:t.layerIndex})}}};return t.$$set=e=>{"source"in e&&n(0,p=e.source),"activeLayer"in e&&a(n(1,h=e.activeLayer)),"showEditButtons"in e&&n(2,g=e.showEditButtons),"layerIndex"in e&&n(3,m=e.layerIndex),"$$scope"in e&&n(20,u=e.$$scope)},t.$$.update=()=>{1&t.$$.dirty&&n(5,d=Xs(p.label,15,"",((e,t)=>e!=t?e+"...":e))),8193&t.$$.dirty&&n(8,r=p==o)},[p,h,g,m,$,d,f,y,r,v,e=>{e.ctrlKey||e.altKey?v("remove",p):console.warn("Dispatch tooltip to let user know he has to hold down ctr or alt key")},e=>v("clone",p),x,o,c,function(e){$=e,n(4,$)},function(e){H[e?"unshift":"push"]((()=>{f=e,n(6,f)}))},e=>v("makeActive",p),e=>v("updateLabel",{source:p,value:e.detail}),e=>f.edit(e),u]}class fn extends ve{constructor(e){super(),$e(this,e,dn,hn,i,{source:0,activeLayer:1,showEditButtons:2,layerIndex:3})}}function gn(e){let t;const s=e[6].default,n=u(s,e,e[7],null);return{c(){n&&n.c()},m(e,s){n&&n.m(e,s),t=!0},p(e,t){n&&n.p&&128&t&&h(n,s,e,e[7],t,null,null)},i(e){t||(oe(n,e),t=!0)},o(e){ie(n,e),t=!1},d(e){n&&n.d(e)}}}function mn(e){let s,n;const r=[e[5]];let o={$$slots:{default:[gn]},$$scope:{ctx:e}};for(let e=0;e<r.length;e+=1)o=t(o,r[e]);return s=new fn({props:o}),s.$on("swapLayers",e[4]),s.$on("remove",e[0]),s.$on("updateLabel",e[1]),s.$on("makeActive",e[2]),s.$on("clone",e[3]),{c(){fe(s.$$.fragment)},m(e,t){ge(s,e,t),n=!0},p(e,[t]){const n=32&t?pe(r,[he(e[5])]):{};128&t&&(n.$$scope={dirty:t,ctx:e}),s.$set(n)},i(e){n||(oe(s.$$.fragment,e),n=!0)},o(e){ie(s.$$.fragment,e),n=!1},d(e){me(s,e)}}}function $n(e,s,n){const r=[];let o=f(s,r),{$$slots:i={},$$scope:l}=s;return e.$$set=e=>{s=t(t({},s),d(e)),n(5,o=f(s,r)),"$$scope"in e&&n(7,l=e.$$scope)},[e=>Me.execute("spritesheet_remove",e.detail),e=>Me.execute("spritesheet_update_layer_label",{source:e.detail.source,label:e.detail.value}),e=>Me.execute("spritesheet_make_layer_active",e.detail),e=>Me.execute("spritesheet_clone_layer",e.detail),e=>Me.execute("spritesheet_swap_layers",e.detail),o,i,l]}class vn extends ve{constructor(e){super(),$e(this,e,$n,mn,i,{})}}function yn(t){let s;return{c(){s=w("div"),I(s,"class","canvas-wrapper svelte-84zv5e")},m(e,n){v(e,s,n),t[2](s)},p:e,i:e,o:e,d(e){e&&y(s),t[2](null)}}}function xn(e,t,s){let n,{source:r}=t;return D((async()=>{if(!r)throw new Error("Provide a canvas source for the 'CanvasPreview'");n.appendChild(r.element)})),e.$$set=e=>{"source"in e&&s(1,r=e.source)},[n,r,function(e){H[e?"unshift":"push"]((()=>{n=e,s(0,n)}))}]}class wn extends ve{constructor(e){super(),$e(this,e,xn,yn,i,{source:1})}}function bn(e,t,s){const n=e.slice();return n[4]=t[s],n[6]=s,n}function _n(t){let s;return{c(){s=w("div"),s.textContent="No spritesheets",I(s,"class","center svelte-1pdum4b")},m(e,t){v(e,s,t)},p:e,i:e,o:e,d(e){e&&y(s)}}}function Ln(t){let s,n,r=t[0],o=zn(t);return{c(){o.c(),s=k()},m(e,t){o.m(e,t),v(e,s,t),n=!0},p(t,n){1&n&&i(r,r=t[0])?(ne(),ie(o,1,1,e),re(),o=zn(t),o.c(),oe(o),o.m(s.parentNode,s)):o.p(t,n)},i(e){n||(oe(o),n=!0)},o(e){ie(o),n=!1},d(e){e&&y(s),o.d(e)}}}function kn(e){let t,s,n;return t=new wn({props:{source:e[4]}}),{c(){fe(t.$$.fragment),s=L()},m(e,r){ge(t,e,r),v(e,s,r),n=!0},p(e,s){const n={};1&s&&(n.source=e[4]),t.$set(n)},i(e){n||(oe(t.$$.fragment,e),n=!0)},o(e){ie(t.$$.fragment,e),n=!1},d(e){me(t,e),e&&y(s)}}}function En(e){let t,s;return t=new vn({props:{source:e[4],activeLayer:e[1],layerIndex:e[6],$$slots:{default:[kn]},$$scope:{ctx:e}}}),{c(){fe(t.$$.fragment)},m(e,n){ge(t,e,n),s=!0},p(e,s){const n={};1&s&&(n.source=e[4]),129&s&&(n.$$scope={dirty:s,ctx:e}),t.$set(n)},i(e){s||(oe(t.$$.fragment,e),s=!0)},o(e){ie(t.$$.fragment,e),s=!1},d(e){me(t,e)}}}function zn(e){let t,s,n=e[0],r=[];for(let t=0;t<n.length;t+=1)r[t]=En(bn(e,n,t));const o=e=>ie(r[e],1,1,(()=>{r[e]=null}));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=k()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);v(e,t,n),s=!0},p(e,s){if(3&s){let i;for(n=e[0],i=0;i<n.length;i+=1){const o=bn(e,n,i);r[i]?(r[i].p(o,s),oe(r[i],1)):(r[i]=En(o),r[i].c(),oe(r[i],1),r[i].m(t.parentNode,t))}for(ne(),i=n.length;i<r.length;i+=1)o(i);re()}},i(e){if(!s){for(let e=0;e<n.length;e+=1)oe(r[e]);s=!0}},o(e){r=r.filter(Boolean);for(let e=0;e<r.length;e+=1)ie(r[e]);s=!1},d(e){x(r,e),e&&y(t)}}}function In(e){let t;return{c(){t=_("Create spritesheet")},m(e,s){v(e,t,s)},d(e){e&&y(t)}}}function An(e){let t,s,n,r,o,i,l,a;const c=[Ln,_n],u=[];function p(e,t){return e[0].length?0:1}return n=p(e),r=u[n]=c[n](e),l=new Ys({props:{$$slots:{default:[In]},$$scope:{ctx:e}}}),l.$on("click",e[3]),{c(){t=w("div"),s=w("div"),r.c(),o=L(),i=w("div"),fe(l.$$.fragment),I(s,"class","layers svelte-1pdum4b"),I(i,"class","center svelte-1pdum4b"),I(t,"class","palette-layer svelte-1pdum4b")},m(e,r){v(e,t,r),$(t,s),u[n].m(s,null),$(t,o),$(t,i),ge(l,i,null),a=!0},p(e,[t]){let o=n;n=p(e),n===o?u[n].p(e,t):(ne(),ie(u[o],1,1,(()=>{u[o]=null})),re(),r=u[n],r?r.p(e,t):(r=u[n]=c[n](e),r.c()),oe(r,1),r.m(s,null));const i={};128&t&&(i.$$scope={dirty:t,ctx:e}),l.$set(i)},i(e){a||(oe(r),oe(l.$$.fragment,e),a=!0)},o(e){ie(r),ie(l.$$.fragment,e),a=!1},d(e){e&&y(t),u[n].d(),me(l)}}}function Sn(e,t,s){let n;const{activeLayer:r,layers:o}=it.stores;c(e,o,(e=>s(0,n=e)));return[n,r,o,e=>Me.execute("spritesheet_create")]}class Mn extends ve{constructor(e){super(),$e(this,e,Sn,An,i,{})}}function Cn(e){let t;const s=e[6].default,n=u(s,e,e[7],null);return{c(){n&&n.c()},m(e,s){n&&n.m(e,s),t=!0},p(e,t){n&&n.p&&128&t&&h(n,s,e,e[7],t,null,null)},i(e){t||(oe(n,e),t=!0)},o(e){ie(n,e),t=!1},d(e){n&&n.d(e)}}}function Pn(e){let s,n;const r=[e[5]];let o={$$slots:{default:[Cn]},$$scope:{ctx:e}};for(let e=0;e<r.length;e+=1)o=t(o,r[e]);return s=new fn({props:o}),s.$on("swapLayers",e[4]),s.$on("remove",e[0]),s.$on("updateLabel",e[1]),s.$on("makeActive",e[2]),s.$on("clone",e[3]),{c(){fe(s.$$.fragment)},m(e,t){ge(s,e,t),n=!0},p(e,[t]){const n=32&t?pe(r,[he(e[5])]):{};128&t&&(n.$$scope={dirty:t,ctx:e}),s.$set(n)},i(e){n||(oe(s.$$.fragment,e),n=!0)},o(e){ie(s.$$.fragment,e),n=!1},d(e){me(s,e)}}}function Tn(e,s,n){const r=[];let o=f(s,r),{$$slots:i={},$$scope:l}=s;return e.$$set=e=>{s=t(t({},s),d(e)),n(5,o=f(s,r)),"$$scope"in e&&n(7,l=e.$$scope)},[e=>Me.execute("palette_remove",e.detail),e=>Me.execute("palette_update_layer_label",{source:e.detail.source,label:e.detail.value}),e=>Me.execute("palette_make_layer_active",e.detail),e=>Me.execute("palette_clone_layer",e.detail),e=>Me.execute("palette_swap_layers",e.detail),o,i,l]}class Nn extends ve{constructor(e){super(),$e(this,e,Tn,Pn,i,{})}}function Rn(e){let t,s,n,i,l,a;const c=e[10].default,p=u(c,e,e[9],null),d=p||function(e){let t,s;return{c(){t=_("0x"),s=_(e[1])},m(e,n){v(e,t,n),v(e,s,n)},p(e,t){2&t&&S(s,e[1])},d(e){e&&y(t),e&&y(s)}}}(e);return{c(){t=w("div"),s=w("span"),d&&d.c(),M(s,"pointer-events","none"),I(s,"class","svelte-1j057y7"),I(t,"class","color svelte-1j057y7"),I(t,"data-hex",e[1]),M(t,"--rgb","rgb("+e[0].join(",")+")"),P(t,"active",e[5]&&e[4]==e[6]&&e[3]==Ze.layerIndexFromSource(e[5]))},m(r,o){v(r,t,o),$(t,s),d&&d.m(s,null),i=!0,l||(a=[E(t,"click",e[11]),m(n=nn.call(null,t,{type:e[2],value:{rgb:e[0],hex:e[1],type:e[2],layerIndex:e[3],colorIndex:e[4]}}))],l=!0)},p(e,[s]){p?p.p&&512&s&&h(p,c,e,e[9],s,null,null):d&&d.p&&2&s&&d.p(e,s),(!i||2&s)&&I(t,"data-hex",e[1]),(!i||1&s)&&M(t,"--rgb","rgb("+e[0].join(",")+")"),n&&o(n.update)&&31&s&&n.update.call(null,{type:e[2],value:{rgb:e[0],hex:e[1],type:e[2],layerIndex:e[3],colorIndex:e[4]}}),120&s&&P(t,"active",e[5]&&e[4]==e[6]&&e[3]==Ze.layerIndexFromSource(e[5]))},i(e){i||(oe(d,e),i=!0)},o(e){ie(d,e),i=!1},d(e){e&&y(t),d&&d.d(e),l=!1,r(a)}}}function Dn(e,t,s){let n,r,{$$slots:o={},$$scope:i}=t,{rgb:l}=t,{hex:a}=t,{type:u}=t,{layerIndex:p}=t,{colorIndex:h}=t;const{selectedColor:d,activeLayer:f}=Ze.stores;return c(e,d,(e=>s(6,r=e))),c(e,f,(e=>s(5,n=e))),e.$$set=e=>{"rgb"in e&&s(0,l=e.rgb),"hex"in e&&s(1,a=e.hex),"type"in e&&s(2,u=e.type),"layerIndex"in e&&s(3,p=e.layerIndex),"colorIndex"in e&&s(4,h=e.colorIndex),"$$scope"in e&&s(9,i=e.$$scope)},[l,a,u,p,h,n,r,d,f,i,o,function(t){B(e,t)}]}class jn extends ve{constructor(e){super(),$e(this,e,Dn,Rn,i,{rgb:0,hex:1,type:2,layerIndex:3,colorIndex:4})}}function On(e,t,s){const n=e.slice();return n[7]=t[s],n[9]=s,n}function Bn(e,t,s){const n=e.slice();return n[10]=t[s],n[12]=s,n}function Fn(t){let s;return{c(){s=w("div"),s.textContent="No palettes",I(s,"class","center svelte-njkqod")},m(e,t){v(e,s,t)},p:e,i:e,o:e,d(e){e&&y(s)}}}function Hn(e){let t,s,n=e[1],r=[];for(let t=0;t<n.length;t+=1)r[t]=Jn(On(e,n,t));const o=e=>ie(r[e],1,1,(()=>{r[e]=null}));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=k()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);v(e,t,n),s=!0},p(e,s){if(23&s){let i;for(n=e[1],i=0;i<n.length;i+=1){const o=On(e,n,i);r[i]?(r[i].p(o,s),oe(r[i],1)):(r[i]=Jn(o),r[i].c(),oe(r[i],1),r[i].m(t.parentNode,t))}for(ne(),i=n.length;i<r.length;i+=1)o(i);re()}},i(e){if(!s){for(let e=0;e<n.length;e+=1)oe(r[e]);s=!0}},o(e){r=r.filter(Boolean);for(let e=0;e<r.length;e+=1)ie(r[e]);s=!1},d(e){x(r,e),e&&y(t)}}}function qn(e){let t,s,n=e[10].hex+"";return{c(){t=_("0x"),s=_(n)},m(e,n){v(e,t,n),v(e,s,n)},p(e,t){2&t&&n!==(n=e[10].hex+"")&&S(s,n)},d(e){e&&y(t),e&&y(s)}}}function Kn(e,t){let s,n,r,i,l,a,c;return n=new jn({props:{hex:t[10].hex,rgb:t[10].rgb,layerIndex:t[9],colorIndex:t[12],type:"swap",$$slots:{default:[qn]},$$scope:{ctx:t}}}),{key:e,first:null,c(){s=w("li"),fe(n.$$.fragment),r=L(),I(s,"class","svelte-njkqod"),this.first=s},m(e,o){v(e,s,o),ge(n,s,null),$(s,r),l=!0,a||(c=m(i=rn.call(null,s,{...t[4],value:{layerIndex:t[9],colorIndex:t[12]}})),a=!0)},p(e,s){t=e;const r={};2&s&&(r.hex=t[10].hex),2&s&&(r.rgb=t[10].rgb),2&s&&(r.colorIndex=t[12]),8194&s&&(r.$$scope={dirty:s,ctx:t}),n.$set(r),i&&o(i.update)&&2&s&&i.update.call(null,{...t[4],value:{layerIndex:t[9],colorIndex:t[12]}})},i(e){l||(oe(n.$$.fragment,e),l=!0)},o(e){ie(n.$$.fragment,e),l=!1},d(e){e&&y(s),me(n),a=!1,c()}}}function Gn(e){let t,s,n,r=[],o=new Map,i=e[7].colors;const l=e=>e[12];for(let t=0;t<i.length;t+=1){let s=Bn(e,i,t),n=l(s);o.set(n,r[t]=Kn(n,s))}return{c(){t=w("ul");for(let e=0;e<r.length;e+=1)r[e].c();s=L(),I(t,"class","svelte-njkqod")},m(e,o){v(e,t,o);for(let e=0;e<r.length;e+=1)r[e].m(t,null);v(e,s,o),n=!0},p(e,s){18&s&&(i=e[7].colors,ne(),r=ue(r,s,l,1,e,i,o,t,ce,Kn,null,Bn),re())},i(e){if(!n){for(let e=0;e<i.length;e+=1)oe(r[e]);n=!0}},o(e){for(let e=0;e<r.length;e+=1)ie(r[e]);n=!1},d(e){e&&y(t);for(let e=0;e<r.length;e+=1)r[e].d();e&&y(s)}}}function Jn(e){let t,s;return t=new Nn({props:{source:e[7],showEditButtons:e[0],activeLayer:e[2],layerIndex:e[9],$$slots:{default:[Gn]},$$scope:{ctx:e}}}),{c(){fe(t.$$.fragment)},m(e,n){ge(t,e,n),s=!0},p(e,s){const n={};2&s&&(n.source=e[7]),1&s&&(n.showEditButtons=e[0]),8194&s&&(n.$$scope={dirty:s,ctx:e}),t.$set(n)},i(e){s||(oe(t.$$.fragment,e),s=!0)},o(e){ie(t.$$.fragment,e),s=!1},d(e){me(t,e)}}}function Un(e){let t,s;return t=new Ys({props:{$$slots:{default:[Wn]},$$scope:{ctx:e}}}),t.$on("click",e[5]),{c(){fe(t.$$.fragment)},m(e,n){ge(t,e,n),s=!0},p(e,s){const n={};8192&s&&(n.$$scope={dirty:s,ctx:e}),t.$set(n)},i(e){s||(oe(t.$$.fragment,e),s=!0)},o(e){ie(t.$$.fragment,e),s=!1},d(e){me(t,e)}}}function Wn(e){let t;return{c(){t=_("Create palette")},m(e,s){v(e,t,s)},d(e){e&&y(t)}}}function Yn(e){let t,s,n,r,o,i,l;const a=[Hn,Fn],c=[];function u(e,t){return e[1]&&e[1].length?0:1}n=u(e),r=c[n]=a[n](e);let p=e[0]&&Un(e);return{c(){t=w("div"),s=w("div"),r.c(),o=L(),i=w("div"),p&&p.c(),I(s,"class","layers svelte-njkqod"),I(i,"class","center svelte-njkqod"),I(t,"class","palette-layer svelte-njkqod")},m(e,r){v(e,t,r),$(t,s),c[n].m(s,null),$(t,o),$(t,i),p&&p.m(i,null),l=!0},p(e,[t]){let o=n;n=u(e),n===o?c[n].p(e,t):(ne(),ie(c[o],1,1,(()=>{c[o]=null})),re(),r=c[n],r?r.p(e,t):(r=c[n]=a[n](e),r.c()),oe(r,1),r.m(s,null)),e[0]?p?(p.p(e,t),1&t&&oe(p,1)):(p=Un(e),p.c(),oe(p,1),p.m(i,null)):p&&(ne(),ie(p,1,1,(()=>{p=null})),re())},i(e){l||(oe(r),oe(p),l=!0)},o(e){ie(r),ie(p),l=!1},d(e){e&&y(t),c[n].d(),p&&p.d()}}}function Xn(e,t,s){let n,{showEditButtons:r=!0}=t;const{activeLayer:o,layers:i}=Ze.stores;c(e,i,(e=>s(1,n=e)));const l={over:e=>!0,leave:e=>!1,drop:({e:e,value:t})=>{const s=e.dataTransfer.getData("swap");s&&i.swapColors({...JSON.parse(s),to:{...t}});const n=e.dataTransfer.getData("replace");n&&i.replaceColor({...JSON.parse(n),...t})}};return e.$$set=e=>{"showEditButtons"in e&&s(0,r=e.showEditButtons)},[r,n,o,i,l,e=>Me.execute("palette_create")]}class Vn extends ve{constructor(e){super(),$e(this,e,Xn,Yn,i,{showEditButtons:0})}}var Zn=(e,t)=>{const s=s=>{e.contains(s.target)||(s.preventDefault(),t.call(null))};return window.addEventListener("click",s),{destroy(){window.removeEventListener("click",s)}}};function Qn(e){let t,s,n,r;const o=e[1].default,i=u(o,e,e[0],null);return{c(){t=w("button"),i&&i.c(),I(t,"class","svelte-8gzkl6")},m(o,l){v(o,t,l),i&&i.m(t,null),s=!0,n||(r=E(t,"click",e[2]),n=!0)},p(e,[t]){i&&i.p&&1&t&&h(i,o,e,e[0],t,null,null)},i(e){s||(oe(i,e),s=!0)},o(e){ie(i,e),s=!1},d(e){e&&y(t),i&&i.d(e),n=!1,r()}}}function er(e,t,s){let{$$slots:n={},$$scope:r}=t;return e.$$set=e=>{"$$scope"in e&&s(0,r=e.$$scope)},[r,n,function(t){B(e,t)}]}class tr extends ve{constructor(e){super(),$e(this,e,er,Qn,i,{})}}const sr=e=>({}),nr=e=>({}),rr=e=>({}),or=e=>({});function ir(e){let t;const s=e[1].icon,n=u(s,e,e[4],or);return{c(){n&&n.c()},m(e,s){n&&n.m(e,s),t=!0},p(e,t){n&&n.p&&16&t&&h(n,s,e,e[4],t,rr,or)},i(e){t||(oe(n,e),t=!0)},o(e){ie(n,e),t=!1},d(e){n&&n.d(e)}}}function lr(e){let t,s,n,r,i,l,a,c,p;const d=e[1].default,f=u(d,e,e[4],null);n=new tr({props:{$$slots:{default:[ir]},$$scope:{ctx:e}}}),n.$on("click",e[2]);const g=e[1].list,x=u(g,e,e[4],nr);return{c(){t=w("div"),f&&f.c(),s=L(),fe(n.$$.fragment),r=L(),i=w("div"),x&&x.c(),I(i,"class","dropdown svelte-1rwcx4c"),I(t,"class","select-button svelte-1rwcx4c"),P(t,"active",e[0])},m(o,u){v(o,t,u),f&&f.m(t,null),$(t,s),ge(n,t,null),$(t,r),$(t,i),x&&x.m(i,null),a=!0,c||(p=m(l=Zn.call(null,t,e[3])),c=!0)},p(e,[s]){f&&f.p&&16&s&&h(f,d,e,e[4],s,null,null);const r={};16&s&&(r.$$scope={dirty:s,ctx:e}),n.$set(r),x&&x.p&&16&s&&h(x,g,e,e[4],s,sr,nr),l&&o(l.update)&&1&s&&l.update.call(null,e[3]),1&s&&P(t,"active",e[0])},i(e){a||(oe(f,e),oe(n.$$.fragment,e),oe(x,e),a=!0)},o(e){ie(f,e),ie(n.$$.fragment,e),ie(x,e),a=!1},d(e){e&&y(t),f&&f.d(e),me(n),x&&x.d(e),c=!1,p()}}}function ar(e,t,s){let{$$slots:n={},$$scope:r}=t,o=!1;return e.$$set=e=>{"$$scope"in e&&s(4,r=e.$$scope)},[o,n,e=>s(0,o=!o),e=>s(0,o=!1),r]}class cr extends ve{constructor(e){super(),$e(this,e,ar,lr,i,{})}}function ur(e){let t,s,n,r,o,i,l,a;const c=e[2].default,p=u(c,e,e[1],null);return{c(){t=w("div"),s=w("div"),p&&p.c(),n=L(),r=w("div"),o=w("button"),o.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" viewBox="0 0 24 24" class="svelte-1ux55nb"><path d="M10.573 3.021h7.427v-3.021l6 5.39-6 5.61v-3h-7.427c-3.071 0-5.561 2.356-5.561 5.427 0 3.071 2.489 5.573 5.561 5.573h7.427v5h-7.427c-5.84 0-10.573-4.734-10.573-10.573s4.733-10.406 10.573-10.406z"></path></svg>',I(s,"class","group svelte-1ux55nb"),I(o,"class","svelte-1ux55nb"),I(r,"class","group svelte-1ux55nb"),I(t,"id","buttons"),I(t,"class","svelte-1ux55nb")},m(c,u){v(c,t,u),$(t,s),p&&p.m(s,null),$(t,n),$(t,r),$(r,o),i=!0,l||(a=E(o,"click",e[3]),l=!0)},p(e,[t]){p&&p.p&&2&t&&h(p,c,e,e[1],t,null,null)},i(e){i||(oe(p,e),i=!0)},o(e){ie(p,e),i=!1},d(e){e&&y(t),p&&p.d(e),l=!1,a()}}}function pr(e,t,s){let{$$slots:n={},$$scope:r}=t;const o=O();return e.$$set=e=>{"$$scope"in e&&s(1,r=e.$$scope)},[o,r,n,e=>o("centerArtboard")]}class hr extends ve{constructor(e){super(),$e(this,e,pr,ur,i,{})}}const dr=e=>({}),fr=e=>({slot:"list"}),gr=e=>({}),mr=e=>({slot:"icon"});function $r(e){let t;const s=e[0].default,n=u(s,e,e[8],mr),r=n||function(e){let t,s;return{c(){t=b("svg"),s=b("path"),I(s,"d","M24 13.616v-3.232c-1.651-.587-2.694-.752-3.219-2.019v-.001c-.527-1.271.1-2.134.847-3.707l-2.285-2.285c-1.561.742-2.433 1.375-3.707.847h-.001c-1.269-.526-1.435-1.576-2.019-3.219h-3.232c-.582 1.635-.749 2.692-2.019 3.219h-.001c-1.271.528-2.132-.098-3.707-.847l-2.285 2.285c.745 1.568 1.375 2.434.847 3.707-.527 1.271-1.584 1.438-3.219 2.02v3.232c1.632.58 2.692.749 3.219 2.019.53 1.282-.114 2.166-.847 3.707l2.285 2.286c1.562-.743 2.434-1.375 3.707-.847h.001c1.27.526 1.436 1.579 2.019 3.219h3.232c.582-1.636.75-2.69 2.027-3.222h.001c1.262-.524 2.12.101 3.698.851l2.285-2.286c-.744-1.563-1.375-2.433-.848-3.706.527-1.271 1.588-1.44 3.221-2.021zm-12 2.384c-2.209 0-4-1.791-4-4s1.791-4 4-4 4 1.791 4 4-1.791 4-4 4z"),I(t,"xmlns","http://www.w3.org/2000/svg"),I(t,"width","13"),I(t,"height","13"),I(t,"viewBox","0 0 24 24")},m(e,n){v(e,t,n),$(t,s)},d(e){e&&y(t)}}}();return{c(){r&&r.c()},m(e,s){r&&r.m(e,s),t=!0},p(e,t){n&&n.p&&256&t&&h(n,s,e,e[8],t,gr,mr)},i(e){t||(oe(r,e),t=!0)},o(e){ie(r,e),t=!1},d(e){r&&r.d(e)}}}function vr(e){let t;return{c(){t=_("Import spritesheet")},m(e,s){v(e,t,s)},d(e){e&&y(t)}}}function yr(e){let t;return{c(){t=_("Import CHR")},m(e,s){v(e,t,s)},d(e){e&&y(t)}}}function xr(e){let t;return{c(){t=_("Export spritesheet")},m(e,s){v(e,t,s)},d(e){e&&y(t)}}}function wr(e){let t;return{c(){t=_("Export CHR")},m(e,s){v(e,t,s)},d(e){e&&y(t)}}}function br(e){let t;return{c(){t=_("Export PNG")},m(e,s){v(e,t,s)},d(e){e&&y(t)}}}function _r(e){let t;return{c(){t=_("Clear all")},m(e,s){v(e,t,s)},d(e){e&&y(t)}}}function Lr(e){let t;const s=e[0].default,n=u(s,e,e[8],fr),r=n||function(e){let t,s,n,r,o,i,l,a,c,u,p,h,d,f,g;return s=new Ys({props:{$$slots:{default:[vr]},$$scope:{ctx:e}}}),s.$on("click",e[1]),r=new Ys({props:{$$slots:{default:[yr]},$$scope:{ctx:e}}}),r.$on("click",e[2]),l=new Ys({props:{$$slots:{default:[xr]},$$scope:{ctx:e}}}),l.$on("click",e[3]),c=new Ys({props:{$$slots:{default:[wr]},$$scope:{ctx:e}}}),c.$on("click",e[4]),p=new Ys({props:{$$slots:{default:[br]},$$scope:{ctx:e}}}),p.$on("click",e[5]),f=new Ys({props:{variant:"danger",$$slots:{default:[_r]},$$scope:{ctx:e}}}),f.$on("click",e[6]),{c(){t=w("div"),fe(s.$$.fragment),n=L(),fe(r.$$.fragment),o=L(),i=w("div"),fe(l.$$.fragment),a=L(),fe(c.$$.fragment),u=L(),fe(p.$$.fragment),h=L(),d=w("div"),fe(f.$$.fragment)},m(e,m){v(e,t,m),ge(s,t,null),$(t,n),ge(r,t,null),v(e,o,m),v(e,i,m),ge(l,i,null),$(i,a),ge(c,i,null),$(i,u),ge(p,i,null),v(e,h,m),v(e,d,m),ge(f,d,null),g=!0},p(e,t){const n={};256&t&&(n.$$scope={dirty:t,ctx:e}),s.$set(n);const o={};256&t&&(o.$$scope={dirty:t,ctx:e}),r.$set(o);const i={};256&t&&(i.$$scope={dirty:t,ctx:e}),l.$set(i);const a={};256&t&&(a.$$scope={dirty:t,ctx:e}),c.$set(a);const u={};256&t&&(u.$$scope={dirty:t,ctx:e}),p.$set(u);const h={};256&t&&(h.$$scope={dirty:t,ctx:e}),f.$set(h)},i(e){g||(oe(s.$$.fragment,e),oe(r.$$.fragment,e),oe(l.$$.fragment,e),oe(c.$$.fragment,e),oe(p.$$.fragment,e),oe(f.$$.fragment,e),g=!0)},o(e){ie(s.$$.fragment,e),ie(r.$$.fragment,e),ie(l.$$.fragment,e),ie(c.$$.fragment,e),ie(p.$$.fragment,e),ie(f.$$.fragment,e),g=!1},d(e){e&&y(t),me(s),me(r),e&&y(o),e&&y(i),me(l),me(c),me(p),e&&y(h),e&&y(d),me(f)}}}(e);return{c(){r&&r.c()},m(e,s){r&&r.m(e,s),t=!0},p(e,t){n&&n.p&&256&t&&h(n,s,e,e[8],t,dr,fr)},i(e){t||(oe(r,e),t=!0)},o(e){ie(r,e),t=!1},d(e){r&&r.d(e)}}}function kr(t){let s;return{c(){s=L()},m(e,t){v(e,s,t)},p:e,i:e,o:e,d(e){e&&y(s)}}}function Er(e){let t,s;return t=new cr({props:{$$slots:{default:[kr],list:[Lr],icon:[$r]},$$scope:{ctx:e}}}),{c(){fe(t.$$.fragment)},m(e,n){ge(t,e,n),s=!0},p(e,s){const n={};256&s&&(n.$$scope={dirty:s,ctx:e}),t.$set(n)},i(e){s||(oe(t.$$.fragment,e),s=!0)},o(e){ie(t.$$.fragment,e),s=!1},d(e){me(t,e)}}}function zr(e){let t,s;return t=new hr({props:{$$slots:{default:[Er]},$$scope:{ctx:e}}}),t.$on("centerArtboard",e[7]),{c(){fe(t.$$.fragment)},m(e,n){ge(t,e,n),s=!0},p(e,[s]){const n={};256&s&&(n.$$scope={dirty:s,ctx:e}),t.$set(n)},i(e){s||(oe(t.$$.fragment,e),s=!0)},o(e){ie(t.$$.fragment,e),s=!1},d(e){me(t,e)}}}function Ir(e,t,s){let{$$slots:n={},$$scope:r}=t;return e.$$set=e=>{"$$scope"in e&&s(8,r=e.$$scope)},[n,e=>Me.execute("spritesheet_import"),e=>Me.execute("spritesheet_import_chr"),e=>Me.execute("spritesheet_export"),e=>Me.execute("spritesheet_export_chr"),e=>Me.execute("spritesheet_export_png"),e=>Me.execute("spritesheet_clear"),function(t){B(e,t)},r]}class Ar extends ve{constructor(e){super(),$e(this,e,Ir,zr,i,{})}}function Sr(t){let s;return{c(){s=_("Please select a spritesheet and palette")},m(e,t){v(e,s,t)},p:e,i:e,o:e,d(e){e&&y(s)}}}function Mr(e){let t,s,n;const r=e[9].default,o=u(r,e,e[8],null);return{c(){t=w("div"),s=w("canvas"),o&&o.c(),I(s,"width",128),I(s,"height",128),I(s,"class","svelte-1sxiybl"),M(t,"--zoom",e[0]),I(t,"class","svelte-1sxiybl")},m(r,i){v(r,t,i),$(t,s),o&&o.m(s,null),e[10](s),n=!0},p(e,s){o&&o.p&&256&s&&h(o,r,e,e[8],s,null,null),(!n||1&s)&&M(t,"--zoom",e[0])},i(e){n||(oe(o,e),n=!0)},o(e){ie(o,e),n=!1},d(s){s&&y(t),o&&o.d(s),e[10](null)}}}function Cr(e){let t,s,n,r;const o=[Mr,Sr],i=[];function l(e,t){return e[2]&&e[3].length&&e[4]?0:1}return t=l(e),s=i[t]=o[t](e),{c(){s.c(),n=k()},m(e,s){i[t].m(e,s),v(e,n,s),r=!0},p(e,[r]){let a=t;t=l(e),t===a?i[t].p(e,r):(ne(),ie(i[a],1,1,(()=>{i[a]=null})),re(),s=i[t],s?s.p(e,r):(s=i[t]=o[t](e),s.c()),oe(s,1),s.m(n.parentNode,n))},i(e){r||(oe(s),r=!0)},o(e){ie(s),r=!1},d(e){i[t].d(e),e&&y(n)}}}function Pr(e,t,s){let n,r,o,{$$slots:i={},$$scope:l}=t,{zoom:a}=t;const{activeLayer:u,layers:p,width:h,height:d}=it.stores;c(e,u,(e=>s(2,n=e))),c(e,p,(e=>s(3,r=e)));const f=Ze.stores.activeLayer;let g;c(e,f,(e=>s(4,o=e)));let m=new xt({width:h,height:d});return m.on("primary",(e=>((...e)=>_t(bt.activeTool.get()?.primary,...e))(e))),m.on("secondary",(e=>((...e)=>_t(bt.activeTool.get()?.secondary,...e))(e))),m.on("move",(e=>((...e)=>_t(bt.activeTool.get()?.move,...e))(e))),m.on("mouseup",(e=>((...e)=>_t(bt.activeTool.get()?.mouseup,...e))(e))),D((()=>()=>{m&&m.destroy()})),e.$$set=e=>{"zoom"in e&&s(0,a=e.zoom),"$$scope"in e&&s(8,l=e.$$scope)},e.$$.update=()=>{2&e.$$.dirty&&g&&m.defineCanvas(g)},[a,g,n,r,o,u,p,f,l,i,function(e){H[e?"unshift":"push"]((()=>{g=e,s(1,g)}))}]}class Tr extends ve{constructor(e){super(),$e(this,e,Pr,Cr,i,{zoom:0})}}function Nr(e){let t,s;return t=new Tr({props:{zoom:e[0]}}),{c(){fe(t.$$.fragment)},m(e,n){ge(t,e,n),s=!0},p(e,[s]){const n={};1&s&&(n.zoom=e[0]),t.$set(n)},i(e){s||(oe(t.$$.fragment,e),s=!0)},o(e){ie(t.$$.fragment,e),s=!1},d(e){me(t,e)}}}function Rr(e,t,s){let{zoom:n}=t;return e.$$set=e=>{"zoom"in e&&s(0,n=e.zoom)},[n]}class Dr extends ve{constructor(e){super(),$e(this,e,Rr,Nr,i,{zoom:0})}}let jr;const Or=we(it.stores.activeLayer,((e,t)=>{if(clearInterval(jr),e)return jr=setInterval((()=>{e.updateImageSource(),t(e.updateImageSource())}),500),()=>{clearInterval(jr)}})),Br=we(it.stores.layers,(e=>e)),Fr=Ge({layers:Br,activeImage:Or},(({store:e,value:t,get:s})=>({stores:t})));function Hr(e){let t,s;return t=new Dr({props:{zoom:e[0]}}),{c(){fe(t.$$.fragment)},m(e,n){ge(t,e,n),s=!0},p(e,s){const n={};1&s&&(n.zoom=e[0]),t.$set(n)},i(e){s||(oe(t.$$.fragment,e),s=!0)},o(e){ie(t.$$.fragment,e),s=!1},d(e){me(t,e)}}}function qr(e){let t,s,n,r,o,i,l,a,c,u,p,h,d,f,g,m,x;return o=new Ar({}),o.$on("centerArtboard",Ls),l=new Es({props:{$$slots:{default:[Hr]},$$scope:{ctx:e}}}),l.$on("artboardScrollEvent",e[1]),u=new Js({}),d=new Mn({}),m=new Vn({props:{showEditButtons:!1}}),{c(){t=w("section"),s=w("div"),n=L(),r=w("div"),fe(o.$$.fragment),i=L(),fe(l.$$.fragment),a=L(),c=w("section"),fe(u.$$.fragment),p=L(),h=w("section"),fe(d.$$.fragment),f=L(),g=w("section"),fe(m.$$.fragment),I(r,"class","inner-artboard svelte-18f6yhk"),I(t,"class","main-artboard svelte-18f6yhk"),I(c,"class","toolbar-layer svelte-18f6yhk"),I(h,"class","spritesheets-layer svelte-18f6yhk"),I(g,"class","palettes-layer svelte-18f6yhk")},m(e,y){v(e,t,y),$(t,s),$(t,n),$(t,r),ge(o,r,null),$(r,i),ge(l,r,null),v(e,a,y),v(e,c,y),ge(u,c,null),v(e,p,y),v(e,h,y),ge(d,h,null),v(e,f,y),v(e,g,y),ge(m,g,null),x=!0},p(e,[t]){const s={};5&t&&(s.$$scope={dirty:t,ctx:e}),l.$set(s)},i(e){x||(oe(o.$$.fragment,e),oe(l.$$.fragment,e),oe(u.$$.fragment,e),oe(d.$$.fragment,e),oe(m.$$.fragment,e),x=!0)},o(e){ie(o.$$.fragment,e),ie(l.$$.fragment,e),ie(u.$$.fragment,e),ie(d.$$.fragment,e),ie(m.$$.fragment,e),x=!1},d(e){e&&y(t),me(o),me(l),e&&y(a),e&&y(c),me(u),e&&y(p),e&&y(h),me(d),e&&y(f),e&&y(g),me(m)}}}function Kr(e,t,s){let n=4;return[n,(e,t)=>{s(0,n=Math.max(1,n+(n-e.detail.deltaY>0?1:-1)))}]}class Gr extends ve{constructor(e){super(),$e(this,e,Kr,qr,i,{})}}function Jr(e){let t,s;return{c(){t=w("div"),s=_(e[0]),I(t,"class","label svelte-j9cd0w")},m(e,n){v(e,t,n),$(t,s)},p(e,t){1&t&&S(s,e[0])},d(e){e&&y(t)}}}function Ur(e){let t,s,n,r=e[0]&&Jr(e);const o=e[2].default,i=u(o,e,e[1],null);return{c(){t=w("div"),r&&r.c(),s=L(),i&&i.c(),I(t,"class","labeled svelte-j9cd0w")},m(e,o){v(e,t,o),r&&r.m(t,null),$(t,s),i&&i.m(t,null),n=!0},p(e,[n]){e[0]?r?r.p(e,n):(r=Jr(e),r.c(),r.m(t,s)):r&&(r.d(1),r=null),i&&i.p&&2&n&&h(i,o,e,e[1],n,null,null)},i(e){n||(oe(i,e),n=!0)},o(e){ie(i,e),n=!1},d(e){e&&y(t),r&&r.d(),i&&i.d(e)}}}function Wr(e,t,s){let{$$slots:n={},$$scope:r}=t,{label:o}=t;return e.$$set=e=>{"label"in e&&s(0,o=e.label),"$$scope"in e&&s(1,r=e.$$scope)},[o,r,n]}class Yr extends ve{constructor(e){super(),$e(this,e,Wr,Ur,i,{label:0})}}const Xr=e=>({}),Vr=e=>({slot:"list"}),Zr=e=>({}),Qr=e=>({slot:"icon"});function eo(e){let t;const s=e[0].default,n=u(s,e,e[5],Qr),r=n||function(e){let t,s;return{c(){t=b("svg"),s=b("path"),I(s,"d","M24 13.616v-3.232c-1.651-.587-2.694-.752-3.219-2.019v-.001c-.527-1.271.1-2.134.847-3.707l-2.285-2.285c-1.561.742-2.433 1.375-3.707.847h-.001c-1.269-.526-1.435-1.576-2.019-3.219h-3.232c-.582 1.635-.749 2.692-2.019 3.219h-.001c-1.271.528-2.132-.098-3.707-.847l-2.285 2.285c.745 1.568 1.375 2.434.847 3.707-.527 1.271-1.584 1.438-3.219 2.02v3.232c1.632.58 2.692.749 3.219 2.019.53 1.282-.114 2.166-.847 3.707l2.285 2.286c1.562-.743 2.434-1.375 3.707-.847h.001c1.27.526 1.436 1.579 2.019 3.219h3.232c.582-1.636.75-2.69 2.027-3.222h.001c1.262-.524 2.12.101 3.698.851l2.285-2.286c-.744-1.563-1.375-2.433-.848-3.706.527-1.271 1.588-1.44 3.221-2.021zm-12 2.384c-2.209 0-4-1.791-4-4s1.791-4 4-4 4 1.791 4 4-1.791 4-4 4z"),I(t,"xmlns","http://www.w3.org/2000/svg"),I(t,"width","13"),I(t,"height","13"),I(t,"viewBox","0 0 24 24")},m(e,n){v(e,t,n),$(t,s)},d(e){e&&y(t)}}}();return{c(){r&&r.c()},m(e,s){r&&r.m(e,s),t=!0},p(e,t){n&&n.p&&32&t&&h(n,s,e,e[5],t,Zr,Qr)},i(e){t||(oe(r,e),t=!0)},o(e){ie(r,e),t=!1},d(e){r&&r.d(e)}}}function to(e){let t;return{c(){t=_("Import palette")},m(e,s){v(e,t,s)},d(e){e&&y(t)}}}function so(e){let t;return{c(){t=_("Export palette")},m(e,s){v(e,t,s)},d(e){e&&y(t)}}}function no(e){let t;return{c(){t=_("Clear all")},m(e,s){v(e,t,s)},d(e){e&&y(t)}}}function ro(e){let t;const s=e[0].default,n=u(s,e,e[5],Vr),r=n||function(e){let t,s,n,r,o,i,l,a;return s=new Ys({props:{$$slots:{default:[to]},$$scope:{ctx:e}}}),s.$on("click",e[1]),r=new Ys({props:{$$slots:{default:[so]},$$scope:{ctx:e}}}),r.$on("click",e[2]),l=new Ys({props:{variant:"danger",$$slots:{default:[no]},$$scope:{ctx:e}}}),l.$on("click",e[3]),{c(){t=w("div"),fe(s.$$.fragment),n=L(),fe(r.$$.fragment),o=L(),i=w("div"),fe(l.$$.fragment)},m(e,c){v(e,t,c),ge(s,t,null),$(t,n),ge(r,t,null),v(e,o,c),v(e,i,c),ge(l,i,null),a=!0},p(e,t){const n={};32&t&&(n.$$scope={dirty:t,ctx:e}),s.$set(n);const o={};32&t&&(o.$$scope={dirty:t,ctx:e}),r.$set(o);const i={};32&t&&(i.$$scope={dirty:t,ctx:e}),l.$set(i)},i(e){a||(oe(s.$$.fragment,e),oe(r.$$.fragment,e),oe(l.$$.fragment,e),a=!0)},o(e){ie(s.$$.fragment,e),ie(r.$$.fragment,e),ie(l.$$.fragment,e),a=!1},d(e){e&&y(t),me(s),me(r),e&&y(o),e&&y(i),me(l)}}}(e);return{c(){r&&r.c()},m(e,s){r&&r.m(e,s),t=!0},p(e,t){n&&n.p&&32&t&&h(n,s,e,e[5],t,Xr,Vr)},i(e){t||(oe(r,e),t=!0)},o(e){ie(r,e),t=!1},d(e){r&&r.d(e)}}}function oo(t){let s;return{c(){s=L()},m(e,t){v(e,s,t)},p:e,i:e,o:e,d(e){e&&y(s)}}}function io(e){let t,s;return t=new cr({props:{$$slots:{default:[oo],list:[ro],icon:[eo]},$$scope:{ctx:e}}}),{c(){fe(t.$$.fragment)},m(e,n){ge(t,e,n),s=!0},p(e,s){const n={};32&s&&(n.$$scope={dirty:s,ctx:e}),t.$set(n)},i(e){s||(oe(t.$$.fragment,e),s=!0)},o(e){ie(t.$$.fragment,e),s=!1},d(e){me(t,e)}}}function lo(e){let t,s;return t=new hr({props:{$$slots:{default:[io]},$$scope:{ctx:e}}}),t.$on("centerArtboard",e[4]),{c(){fe(t.$$.fragment)},m(e,n){ge(t,e,n),s=!0},p(e,[s]){const n={};32&s&&(n.$$scope={dirty:s,ctx:e}),t.$set(n)},i(e){s||(oe(t.$$.fragment,e),s=!0)},o(e){ie(t.$$.fragment,e),s=!1},d(e){me(t,e)}}}function ao(e,t,s){let{$$slots:n={},$$scope:r}=t;return e.$$set=e=>{"$$scope"in e&&s(5,r=e.$$scope)},[n,e=>Me.execute("palette_import"),e=>Me.execute("palette_export"),e=>Me.execute("palette_clear"),function(t){B(e,t)},r]}class co extends ve{constructor(e){super(),$e(this,e,ao,lo,i,{})}}function uo(e,t,s){const n=e.slice();return n[1]=t[s],n}function po(t){let s,n,r;return n=new jn({props:{rgb:t[1].rgb,hex:t[1].hex,type:"replace"}}),n.$on("click",t[0]),{c(){s=w("li"),fe(n.$$.fragment)},m(e,t){v(e,s,t),ge(n,s,null),r=!0},p:e,i(e){r||(oe(n.$$.fragment,e),r=!0)},o(e){ie(n.$$.fragment,e),r=!1},d(e){e&&y(s),me(n)}}}function ho(e){let t,s,n=Ee,r=[];for(let t=0;t<n.length;t+=1)r[t]=po(uo(e,n,t));const o=e=>ie(r[e],1,1,(()=>{r[e]=null}));return{c(){t=w("ul");for(let e=0;e<r.length;e+=1)r[e].c()},m(e,n){v(e,t,n);for(let e=0;e<r.length;e+=1)r[e].m(t,null);s=!0},p(e,[s]){if(1&s){let i;for(n=Ee,i=0;i<n.length;i+=1){const o=uo(e,n,i);r[i]?(r[i].p(o,s),oe(r[i],1)):(r[i]=po(o),r[i].c(),oe(r[i],1),r[i].m(t,null))}for(ne(),i=n.length;i<r.length;i+=1)o(i);re()}},i(e){if(!s){for(let e=0;e<n.length;e+=1)oe(r[e]);s=!0}},o(e){r=r.filter(Boolean);for(let e=0;e<r.length;e+=1)ie(r[e]);s=!1},d(e){e&&y(t),x(r,e)}}}function fo(e){return[e=>{console.log(e)}]}class go extends ve{constructor(e){super(),$e(this,e,fo,ho,i,{})}}function mo(e,t,s){const n=e.slice();return n[5]=t[s],n[7]=s,n}function $o(t){let s;return{c(){s=_("No layer selected")},m(e,t){v(e,s,t)},p:e,i:e,o:e,d(e){e&&y(s)}}}function vo(t){let s,n,r=t[0],o=wo(t);return{c(){o.c(),s=k()},m(e,t){o.m(e,t),v(e,s,t),n=!0},p(t,n){1&n&&i(r,r=t[0])?(ne(),ie(o,1,1,e),re(),o=wo(t),o.c(),oe(o),o.m(s.parentNode,s)):o.p(t,n)},i(e){n||(oe(o),n=!0)},o(e){ie(o),n=!1},d(e){e&&y(s),o.d(e)}}}function yo(e){let t,s,n,r,i,l,a;return s=new jn({props:{hex:e[5].hex,rgb:e[5].rgb,layerIndex:Ze.layerIndexFromSource(e[0]),colorIndex:e[7],type:"swap"}}),{c(){t=w("li"),fe(s.$$.fragment),n=L(),I(t,"class","svelte-dgveli")},m(o,c){v(o,t,c),ge(s,t,null),$(t,n),i=!0,l||(a=m(r=rn.call(null,t,{...e[2],value:{layerIndex:Ze.layerIndexFromSource(e[0]),colorIndex:e[7]}})),l=!0)},p(t,n){e=t;const i={};1&n&&(i.hex=e[5].hex),1&n&&(i.rgb=e[5].rgb),1&n&&(i.layerIndex=Ze.layerIndexFromSource(e[0])),s.$set(i),r&&o(r.update)&&1&n&&r.update.call(null,{...e[2],value:{layerIndex:Ze.layerIndexFromSource(e[0]),colorIndex:e[7]}})},i(e){i||(oe(s.$$.fragment,e),i=!0)},o(e){ie(s.$$.fragment,e),i=!1},d(e){e&&y(t),me(s),l=!1,a()}}}function xo(e){let t,s,n=e[0].colors,r=[];for(let t=0;t<n.length;t+=1)r[t]=yo(mo(e,n,t));const o=e=>ie(r[e],1,1,(()=>{r[e]=null}));return{c(){t=w("ul");for(let e=0;e<r.length;e+=1)r[e].c();I(t,"class","active-color-group svelte-dgveli")},m(e,n){v(e,t,n);for(let e=0;e<r.length;e+=1)r[e].m(t,null);s=!0},p(e,s){if(5&s){let i;for(n=e[0].colors,i=0;i<n.length;i+=1){const o=mo(e,n,i);r[i]?(r[i].p(o,s),oe(r[i],1)):(r[i]=yo(o),r[i].c(),oe(r[i],1),r[i].m(t,null))}for(ne(),i=n.length;i<r.length;i+=1)o(i);re()}},i(e){if(!s){for(let e=0;e<n.length;e+=1)oe(r[e]);s=!0}},o(e){r=r.filter(Boolean);for(let e=0;e<r.length;e+=1)ie(r[e]);s=!1},d(e){e&&y(t),x(r,e)}}}function wo(e){let t,s;return t=new Yr({props:{label:e[0].label,$$slots:{default:[xo]},$$scope:{ctx:e}}}),{c(){fe(t.$$.fragment)},m(e,n){ge(t,e,n),s=!0},p(e,s){const n={};1&s&&(n.label=e[0].label),257&s&&(n.$$scope={dirty:s,ctx:e}),t.$set(n)},i(e){s||(oe(t.$$.fragment,e),s=!0)},o(e){ie(t.$$.fragment,e),s=!1},d(e){me(t,e)}}}function bo(e){let t,s,n,r;const o=[vo,$o],i=[];function l(e,t){return e[0]?0:1}return t=l(e),s=i[t]=o[t](e),{c(){s.c(),n=k()},m(e,s){i[t].m(e,s),v(e,n,s),r=!0},p(e,r){let a=t;t=l(e),t===a?i[t].p(e,r):(ne(),ie(i[a],1,1,(()=>{i[a]=null})),re(),s=i[t],s?s.p(e,r):(s=i[t]=o[t](e),s.c()),oe(s,1),s.m(n.parentNode,n))},i(e){r||(oe(s),r=!0)},o(e){ie(s),r=!1},d(e){i[t].d(e),e&&y(n)}}}function _o(e){let t,s,n,r,o,i,l,a,c,u,p,h,d,f;return o=new co({}),o.$on("centerArtboard",Ls),l=new Es({props:{$$slots:{default:[bo]},$$scope:{ctx:e}}}),u=new go({}),d=new Vn({props:{showEditButtons:!0}}),{c(){t=w("section"),s=w("div"),n=L(),r=w("div"),fe(o.$$.fragment),i=L(),fe(l.$$.fragment),a=L(),c=w("section"),fe(u.$$.fragment),p=L(),h=w("section"),fe(d.$$.fragment),I(r,"class","inner-artboard svelte-dgveli"),I(t,"class","main-artboard svelte-dgveli"),I(c,"class","swatchlist svelte-dgveli"),I(h,"class","palettes-layers svelte-dgveli")},m(e,g){v(e,t,g),$(t,s),$(t,n),$(t,r),ge(o,r,null),$(r,i),ge(l,r,null),v(e,a,g),v(e,c,g),ge(u,c,null),v(e,p,g),v(e,h,g),ge(d,h,null),f=!0},p(e,[t]){const s={};257&t&&(s.$$scope={dirty:t,ctx:e}),l.$set(s)},i(e){f||(oe(o.$$.fragment,e),oe(l.$$.fragment,e),oe(u.$$.fragment,e),oe(d.$$.fragment,e),f=!0)},o(e){ie(o.$$.fragment,e),ie(l.$$.fragment,e),ie(u.$$.fragment,e),ie(d.$$.fragment,e),f=!1},d(e){e&&y(t),me(o),me(l),e&&y(a),e&&y(c),me(u),e&&y(p),e&&y(h),me(d)}}}function Lo(e,t,s){let n;const{activeLayer:r,layers:o}=Ze.stores;c(e,r,(e=>s(0,n=e)));return[n,r,{over:e=>!0,leave:e=>!1,drop:({e:e,value:t})=>{const s=e.dataTransfer.getData("swap");s&&o.swapColors({...JSON.parse(s),to:{...t}});const n=e.dataTransfer.getData("replace");n&&o.replaceColor({...JSON.parse(n),...t})}}]}class ko extends ve{constructor(e){super(),$e(this,e,Lo,_o,i,{})}}function Eo(e){let t,s;return{c(){t=w("label"),s=_(e[1]),I(t,"for","select"),I(t,"class","svelte-1jkinki")},m(e,n){v(e,t,n),$(t,s)},p(e,t){2&t&&S(s,e[1])},d(e){e&&y(t)}}}function zo(e){let t,s,n,o,i,l,a,c=e[1]&&Eo(e);const p=e[5].default,d=u(p,e,e[4],null);return{c(){t=w("div"),c&&c.c(),s=L(),n=w("div"),o=w("select"),d&&d.c(),I(o,"name","select"),o.disabled=e[2],I(o,"class","svelte-1jkinki"),void 0===e[0]&&Y((()=>e[7].call(o))),I(n,"class","select svelte-1jkinki"),P(n,"multiple",e[3]),I(t,"class","select-group svelte-1jkinki")},m(r,u){v(r,t,u),c&&c.m(t,null),$(t,s),$(t,n),$(n,o),d&&d.m(o,null),C(o,e[0]),i=!0,l||(a=[E(o,"change",e[7]),E(n,"change",e[6])],l=!0)},p(e,[r]){e[1]?c?c.p(e,r):(c=Eo(e),c.c(),c.m(t,s)):c&&(c.d(1),c=null),d&&d.p&&16&r&&h(d,p,e,e[4],r,null,null),(!i||4&r)&&(o.disabled=e[2]),1&r&&C(o,e[0]),8&r&&P(n,"multiple",e[3])},i(e){i||(oe(d,e),i=!0)},o(e){ie(d,e),i=!1},d(e){e&&y(t),c&&c.d(),d&&d.d(e),l=!1,r(a)}}}function Io(e,t,s){let{$$slots:n={},$$scope:r}=t,{label:o}=t,{disabled:i=!1}=t,{multiple:l=!1}=t,{value:a}=t;return e.$$set=e=>{"label"in e&&s(1,o=e.label),"disabled"in e&&s(2,i=e.disabled),"multiple"in e&&s(3,l=e.multiple),"value"in e&&s(0,a=e.value),"$$scope"in e&&s(4,r=e.$$scope)},[a,o,i,l,r,n,function(t){B(e,t)},function(){a=function(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}(this),s(0,a)}]}class Ao extends ve{constructor(e){super(),$e(this,e,Io,zo,i,{label:1,disabled:2,multiple:3,value:0})}}function So(e,t,s){const n=e.slice();return n[14]=t[s],n}function Mo(e,t,s){const n=e.slice();return n[17]=t[s],n}function Co(e,t,s){const n=e.slice();return n[20]=t[s],n}function Po(e){let t,s;return t=new Dr({props:{zoom:e[0]}}),{c(){fe(t.$$.fragment)},m(e,n){ge(t,e,n),s=!0},p(e,s){const n={};1&s&&(n.zoom=e[0]),t.$set(n)},i(e){s||(oe(t.$$.fragment,e),s=!0)},o(e){ie(t.$$.fragment,e),s=!1},d(e){me(t,e)}}}function To(e){let t;return{c(){t=w("option"),t.textContent="oh noo!",t.__value="oh noo!",t.value=t.__value},m(e,s){v(e,t,s)},d(e){e&&y(t)}}}function No(e){let t,s,n,r=e[20].label+"";return{c(){t=w("option"),s=_(r),t.__value=n=e[20],t.value=t.__value},m(e,n){v(e,t,n),$(t,s)},p(e,o){4&o&&r!==(r=e[20].label+"")&&S(s,r),4&o&&n!==(n=e[20])&&(t.__value=n,t.value=t.__value)},d(e){e&&y(t)}}}function Ro(e){let t,s=e[2],n=[];for(let t=0;t<s.length;t+=1)n[t]=No(Co(e,s,t));let r=null;return s.length||(r=To()),{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=k(),r&&r.c()},m(e,s){for(let t=0;t<n.length;t+=1)n[t].m(e,s);v(e,t,s),r&&r.m(e,s)},p(e,o){if(4&o){let i;for(s=e[2],i=0;i<s.length;i+=1){const r=Co(e,s,i);n[i]?n[i].p(r,o):(n[i]=No(r),n[i].c(),n[i].m(t.parentNode,t))}for(;i<n.length;i+=1)n[i].d(1);n.length=s.length,s.length?r&&(r.d(1),r=null):r||(r=To(),r.c(),r.m(t.parentNode,t))}},d(e){x(n,e),e&&y(t),r&&r.d(e)}}}function Do(e){let t,s=e[4],n=Bo(e);return{c(){n.c(),t=k()},m(e,s){n.m(e,s),v(e,t,s)},p(e,r){16&r&&i(s,s=e[4])?(n.d(1),n=Bo(e),n.c(),n.m(t.parentNode,t)):n.p(e,r)},d(e){e&&y(t),n.d(e)}}}function jo(e){let t;return{c(){t=w("div"),I(t,"class","tile-image svelte-1og0o7w"),M(t,"--src","url("+e[3].image.src+")"),M(t,"--x",e[14]),M(t,"--y",e[17])},m(e,s){v(e,t,s)},p(e,s){8&s&&M(t,"--src","url("+e[3].image.src+")")},d(e){e&&y(t)}}}function Oo(e){let t,s=e[10],n=[];for(let t=0;t<s.length;t+=1)n[t]=jo(Mo(e,s,t));return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=k()},m(e,s){for(let t=0;t<n.length;t+=1)n[t].m(e,s);v(e,t,s)},p(e,r){if(1544&r){let o;for(s=e[10],o=0;o<s.length;o+=1){const i=Mo(e,s,o);n[o]?n[o].p(i,r):(n[o]=jo(i),n[o].c(),n[o].m(t.parentNode,t))}for(;o<n.length;o+=1)n[o].d(1);n.length=s.length}},d(e){x(n,e),e&&y(t)}}}function Bo(e){let t,s=e[9],n=[];for(let t=0;t<s.length;t+=1)n[t]=Oo(So(e,s,t));return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=k()},m(e,s){for(let t=0;t<n.length;t+=1)n[t].m(e,s);v(e,t,s)},p(e,r){if(1544&r){let o;for(s=e[9],o=0;o<s.length;o+=1){const i=So(e,s,o);n[o]?n[o].p(i,r):(n[o]=Oo(i),n[o].c(),n[o].m(t.parentNode,t))}for(;o<n.length;o+=1)n[o].d(1);n.length=s.length}},d(e){x(n,e),e&&y(t)}}}function Fo(e){let t,s,n,r,o,i,l,a,c,u,p,h,d,f,g,m,x,b,_,k,E,z,A,S;function M(t){e[12].call(null,t)}o=new Ar({}),o.$on("centerArtboard",Ls),l=new Es({props:{$$slots:{default:[Po]},$$scope:{ctx:e}}}),l.$on("artboardScrollEvent",e[8]);let C={$$slots:{default:[Ro]},$$scope:{ctx:e}};void 0!==e[1]&&(C.value=e[1]),h=new Ao({props:C}),H.push((()=>de(h,"value",M))),h.$on("change",e[11]);let P=e[3]&&Do(e);return b=new Js({}),A=new Vn({props:{showEditButtons:!1}}),{c(){t=w("section"),s=w("div"),n=L(),r=w("div"),fe(o.$$.fragment),i=L(),fe(l.$$.fragment),a=L(),c=w("section"),u=w("header"),p=w("div"),fe(h.$$.fragment),f=L(),g=w("div"),P&&P.c(),m=L(),x=w("section"),fe(b.$$.fragment),_=L(),k=w("section"),E=L(),z=w("section"),fe(A.$$.fragment),I(r,"class","inner-artboard svelte-1og0o7w"),I(u,"class","svelte-1og0o7w"),I(g,"class","tile-grid svelte-1og0o7w"),I(c,"class","tiles svelte-1og0o7w"),I(t,"class","main-artboard svelte-1og0o7w"),I(x,"class","toolbar-layer svelte-1og0o7w"),I(k,"class","spritesheets-layer svelte-1og0o7w"),I(z,"class","palettes-layer svelte-1og0o7w")},m(e,d){v(e,t,d),$(t,s),$(t,n),$(t,r),ge(o,r,null),$(r,i),ge(l,r,null),$(t,a),$(t,c),$(c,u),$(u,p),ge(h,p,null),$(c,f),$(c,g),P&&P.m(g,null),v(e,m,d),v(e,x,d),ge(b,x,null),v(e,_,d),v(e,k,d),v(e,E,d),v(e,z,d),ge(A,z,null),S=!0},p(e,[t]){const s={};8388609&t&&(s.$$scope={dirty:t,ctx:e}),l.$set(s);const n={};8388612&t&&(n.$$scope={dirty:t,ctx:e}),!d&&2&t&&(d=!0,n.value=e[1],X((()=>d=!1))),h.$set(n),e[3]?P?P.p(e,t):(P=Do(e),P.c(),P.m(g,null)):P&&(P.d(1),P=null)},i(e){S||(oe(o.$$.fragment,e),oe(l.$$.fragment,e),oe(h.$$.fragment,e),oe(b.$$.fragment,e),oe(A.$$.fragment,e),S=!0)},o(e){ie(o.$$.fragment,e),ie(l.$$.fragment,e),ie(h.$$.fragment,e),ie(b.$$.fragment,e),ie(A.$$.fragment,e),S=!1},d(e){e&&y(t),me(o),me(l),me(h),P&&P.d(),e&&y(m),e&&y(x),me(b),e&&y(_),e&&y(k),e&&y(E),e&&y(z),me(A)}}}function Ho(e,t,s){let n,r,o;const{activeImage:i}=Fr.stores;c(e,i,(e=>s(4,o=e)));const{layers:l,activeLayer:a}=it.stores;c(e,l,(e=>s(2,n=e))),c(e,a,(e=>s(3,r=e)));let u=4;const p=(e=16)=>new Array(e).fill(null).map(((e,t)=>t+1)).reverse();let h,d=[...p()],f=[...p()];return[u,h,n,r,o,i,l,a,e=>{s(0,u=Math.max(1,u+(u-e.detail.deltaY>0?1:-1)))},d,f,e=>{Me.execute("spritesheet_make_layer_active",h)},function(e){h=e,s(1,h)}]}class qo extends ve{constructor(e){super(),$e(this,e,Ho,Fo,i,{})}}const Ko=ss($s);Ko("/graphics",(e=>Tt("/graphics/spritesheets"))),Ko("/graphics/spritesheets",((e,t)=>{try{ct.enableGroups("*","spritesheets"),t.send(Gr)}catch(e){t.error()}}));ss(class extends ve{constructor(e){super(),$e(this,e,ys,vs,i,{})}})("/graphics/palettes",((e,t)=>{try{ct.enableGroups("*","palettes"),t.send(ko)}catch(e){t.error()}}));ss($s)("/graphics/spritesets",((e,t)=>{try{ct.enableGroups("*","spritesheets"),t.send(qo)}catch(e){t.error()}})),os.get("/",((e,t)=>{})),ct.set(["f11"],{data:{action:Me.action("window_toggle_fullscreen")}}),ct.set(["altleft","enter"],{data:{action:Me.action("window_toggle_fullscreen")}});const Go=["palettes"];ct.set(["insert"],{data:{action:Me.action("palette_create")},groups:Go}),ct.set(["ControlLeft","KeyD"],{data:{action:Me.action("palette_clone_active_layer")},groups:Go}),ct.set(["f2"],{data:{action:Me.action("palette_focus_rename_active_layer")},groups:Go});ct.set(["ControlLeft","KeyI"],{data:{action:Me.action("palette_import")},groups:Go}).on((e=>ut(e)));ct.set(["ControlLeft","KeyE"],{data:{action:Me.action("palette_export")},groups:Go}).on((e=>ut(e)));ct.set(["ControlLeft","KeyO"],{data:{action:Me.action("project_open")},groups:["*"]}).on((e=>ut(e)));const Jo=["spritesheets"];ct.set(["insert"],{data:{action:Me.action("spritesheet_create")},groups:Jo}),ct.set(["ControlLeft","KeyD"],{data:{action:Me.action("spritesheet_clone_active_layer")},groups:Jo}),ct.set(["ControlLeft","KeyZ"],{data:{action:Me.action("spritesheet_undo")},groups:Jo}),ct.set(["ControlLeft","ShiftLeft","KeyZ"],{data:{action:Me.action("spritesheet_redo")},groups:Jo}),ct.set(["ControlLeft","KeyY"],{data:{action:Me.action("spritesheet_redo")},groups:Jo}),ct.set(["f2"],{data:{action:Me.action("spritesheet_focus_rename_active_layer")},groups:Jo});ct.set(["ControlLeft","KeyI"],{data:{action:Me.action("spritesheet_import")},groups:Jo}).on((e=>ut(e)));function Uo(e){let s,n,r,o;const i=e[3].default,l=u(i,e,e[2],null);let a=[e[1]],c={};for(let e=0;e<a.length;e+=1)c=t(c,a[e]);return{c(){s=w("button"),l&&l.c(),A(s,c)},m(t,i){v(t,s,i),l&&l.m(s,null),n=!0,r||(o=E(s,"click",z(e[5])),r=!0)},p(e,t){l&&l.p&&4&t&&h(l,i,e,e[2],t,null,null),A(s,c=pe(a,[2&t&&e[1]]))},i(e){n||(oe(l,e),n=!0)},o(e){ie(l,e),n=!1},d(e){e&&y(s),l&&l.d(e),r=!1,o()}}}function Wo(e){let s,n,r,o;const i=e[3].default,l=u(i,e,e[2],null);let a=[e[1]],c={};for(let e=0;e<a.length;e+=1)c=t(c,a[e]);return{c(){s=w("button"),l&&l.c(),A(s,c)},m(t,i){v(t,s,i),l&&l.m(s,null),n=!0,r||(o=E(s,"click",e[4]),r=!0)},p(e,t){l&&l.p&&4&t&&h(l,i,e,e[2],t,null,null),A(s,c=pe(a,[2&t&&e[1]]))},i(e){n||(oe(l,e),n=!0)},o(e){ie(l,e),n=!1},d(e){e&&y(s),l&&l.d(e),r=!1,o()}}}function Yo(e){let t,s,n,r;const o=[Wo,Uo],i=[];return t=globalThis.electron?1:0,s=i[t]=o[t](e),{c(){s.c(),n=k()},m(e,s){i[t].m(e,s),v(e,n,s),r=!0},p(e,[t]){s.p(e,t)},i(e){r||(oe(s),r=!0)},o(e){ie(s),r=!1},d(e){i[t].d(e),e&&y(n)}}}function Xo(e,s,n){let{$$slots:r={},$$scope:o}=s;const{href:i}=s;return e.$$set=e=>{n(1,s=t(t({},s),d(e))),"$$scope"in e&&n(2,o=e.$$scope)},s=d(s),[i,s,o,r,e=>window.open(i),e=>Me.execute("external_link",i)]}ct.set(["ControlLeft","KeyE"],{data:{action:Me.action("spritesheet_export")},groups:Jo}).on((e=>ut(e))),ct.set(["Digit1"],{data:{action:Me.action("palette_active_color"),props:0},groups:Jo}),ct.set(["Digit2"],{data:{action:Me.action("palette_active_color"),props:1},groups:Jo}),ct.set(["Digit3"],{data:{action:Me.action("palette_active_color"),props:2},groups:Jo}),ct.set(["Digit4"],{data:{action:Me.action("palette_active_color"),props:3},groups:Jo}),ct.set(["NumpadAdd"],{data:{action:Me.action("spritesheet_zoom_in")},groups:Jo}),ct.set(["NumpadSubtract"],{data:{action:Me.action("spritesheet_zoom_out")},groups:Jo}),ct.set(["Numpad0"],{data:{action:Me.action("spritesheet_zoom_reset")},groups:Jo}),ct.set(["KeyV"],{data:{action:Me.action("spritesheet_set_active_tool"),props:pt.get("pointer")},groups:Jo}),ct.set(["KeyB"],{data:{action:Me.action("spritesheet_set_active_tool"),props:pt.get("pen")},groups:Jo}),ct.set(["KeyG"],{data:{action:Me.action("spritesheet_set_active_tool"),props:pt.get("paintbucket")},groups:Jo}),ct.set(["KeyM"],{data:{action:Me.action("spritesheet_set_active_tool"),props:pt.get("marquee")},groups:Jo}),ct.set(["KeyE"],{data:{action:Me.action("spritesheet_set_active_tool"),props:pt.get("eyedropper")},groups:Jo}),ct.set(["KeyS"],{data:{action:Me.action("spritesheet_set_active_tool"),props:pt.get("colorswap")},groups:Jo}),ct.set(["KeyT"],{data:{action:Me.action("spritesheet_set_active_tool"),props:pt.get("tileswap")},groups:Jo}),ct.set(["KeyR"],{data:{action:Me.action("spritesheet_set_active_tool"),props:pt.get("transform")},groups:Jo});class Vo extends ve{constructor(e){super(),$e(this,e,Xo,Yo,i,{})}}function Zo(e){let t;return{c(){t=_("Visit github page")},m(e,s){v(e,t,s)},d(e){e&&y(t)}}}function Qo(e){let t;return{c(){t=_("Join discord community")},m(e,s){v(e,t,s)},d(e){e&&y(t)}}}function ei(t){let s,n,o,i,l,a,c,u,p,h,d,f,g,m,x,b,_,k,A,S,M,C,T,N,R,D,j,O,B,F,H,q,K,G,J,U,W,Y,X,V,Z,Q,ee=globalThis.electron&&function(t){let s,n,r,o;return{c(){s=w("li"),n=w("button"),n.innerHTML="<span>quit</span>",I(n,"href","/"),I(s,"class","svelte-wz8iyp")},m(e,i){v(e,s,i),$(s,n),r||(o=E(n,"click",t[4]),r=!0)},p:e,d(e){e&&y(s),r=!1,o()}}}(t);return U=new Vo({props:{href:"https://github.com/hjalmar/NESBitStudio-web",$$slots:{default:[Zo]},$$scope:{ctx:t}}}),X=new Vo({props:{href:"https://discord.gg/WM8ZEnwbSd",$$slots:{default:[Qo]},$$scope:{ctx:t}}}),{c(){s=w("nav"),n=w("ul"),o=w("li"),i=w("span"),i.textContent="file",l=L(),a=w("ul"),c=w("li"),u=w("button"),u.innerHTML="<span>new project</span>",p=L(),h=w("li"),d=w("button"),d.innerHTML="<span>open</span>",f=L(),g=w("li"),m=w("button"),m.innerHTML="<span>save</span>",x=L(),b=w("li"),_=w("button"),_.innerHTML="<span>save as</span>",k=L(),ee&&ee.c(),A=L(),S=w("li"),S.innerHTML="<span>edit</span>",M=L(),C=w("li"),C.innerHTML="<span>build</span>",T=L(),N=w("li"),R=w("span"),R.textContent="window",D=L(),j=w("ul"),O=w("li"),B=w("button"),B.innerHTML="<span>toggle fullscreen</span>",F=L(),H=w("li"),q=w("span"),q.textContent="help",K=L(),G=w("ul"),J=w("li"),fe(U.$$.fragment),W=L(),Y=w("li"),fe(X.$$.fragment),I(u,"href","/"),I(c,"class","svelte-wz8iyp"),I(d,"href","/"),I(h,"class","svelte-wz8iyp"),I(m,"href","/"),I(g,"class","svelte-wz8iyp"),I(_,"href","/"),I(b,"class","svelte-wz8iyp"),I(a,"class","svelte-wz8iyp"),I(o,"class","svelte-wz8iyp"),P(o,"show",!1),I(S,"class","svelte-wz8iyp"),I(C,"class","svelte-wz8iyp"),I(B,"href","/"),I(O,"class","svelte-wz8iyp"),I(j,"class","svelte-wz8iyp"),I(N,"class","svelte-wz8iyp"),I(J,"class","svelte-wz8iyp"),I(Y,"class","svelte-wz8iyp"),I(G,"class","svelte-wz8iyp"),I(H,"class","svelte-wz8iyp"),I(n,"id","filemenu"),I(n,"class","svelte-wz8iyp"),I(s,"id","main-nav"),I(s,"class","no-drag")},m(e,r){v(e,s,r),$(s,n),$(n,o),$(o,i),$(o,l),$(o,a),$(a,c),$(c,u),$(a,p),$(a,h),$(h,d),$(a,f),$(a,g),$(g,m),$(a,x),$(a,b),$(b,_),$(a,k),ee&&ee.m(a,null),$(n,A),$(n,S),$(n,M),$(n,C),$(n,T),$(n,N),$(N,R),$(N,D),$(N,j),$(j,O),$(O,B),$(n,F),$(n,H),$(H,q),$(H,K),$(H,G),$(G,J),ge(U,J,null),$(G,W),$(G,Y),ge(X,Y,null),V=!0,Z||(Q=[E(u,"click",z(t[0])),E(d,"click",z(t[1])),E(m,"click",z(t[2])),E(_,"click",z(t[3])),E(B,"click",z(t[5]))],Z=!0)},p(e,[t]){globalThis.electron&&ee.p(e,t);const s={};2048&t&&(s.$$scope={dirty:t,ctx:e}),U.$set(s);const n={};2048&t&&(n.$$scope={dirty:t,ctx:e}),X.$set(n)},i(e){V||(oe(U.$$.fragment,e),oe(X.$$.fragment,e),V=!0)},o(e){ie(U.$$.fragment,e),ie(X.$$.fragment,e),V=!1},d(e){e&&y(s),ee&&ee.d(),me(U),me(X),Z=!1,r(Q)}}}function ti(e){let t=!1,s=[];const n=e=>{s.forEach((e=>e.classList.remove("show"))),t=!1};window.addEventListener("click",n);const r=e=>{e.stopPropagation(),t=!t,e.currentTarget.classList.toggle("show")},o=e=>{s.forEach((e=>e.classList.remove("show"))),t&&e.currentTarget.classList.add("show")};D((()=>{s=document.querySelectorAll("nav > ul > li"),s.forEach((e=>e.addEventListener("click",r))),s.forEach((e=>e.addEventListener("mouseover",o)))})),j((()=>{window.removeEventListener("click",n),s.forEach((e=>e.removeEventListener("click",r))),s.forEach((e=>e.removeEventListener("mouseover",o)))}));return[e=>Me.execute("project_create"),e=>Me.execute("project_open"),e=>Me.execute("project_save"),e=>Me.execute("project_save_as"),e=>Me.execute("window_close"),e=>Me.execute("window_toggle_fullscreen")]}class si extends ve{constructor(e){super(),$e(this,e,ti,ei,i,{})}}function ni(e){let t,s,n,r;const o=e[6].default,i=u(o,e,e[5],null);return{c(){t=w("button"),i&&i.c(),I(t,"class","no-drag svelte-1j6abr5"),P(t,"active",e[1])},m(o,l){v(o,t,l),i&&i.m(t,null),e[7](t),s=!0,n||(r=E(t,"click",e[2]),n=!0)},p(e,[s]){i&&i.p&&32&s&&h(i,o,e,e[5],s,null,null),2&s&&P(t,"active",e[1])},i(e){s||(oe(i,e),s=!0)},o(e){ie(i,e),s=!1},d(s){s&&y(t),i&&i.d(s),e[7](null),n=!1,r()}}}function ri(e,t,s){let n,r;c(e,Ft,(e=>s(4,r=e)));let o,{$$slots:i={},$$scope:l}=t,{area:a=null}=t;return e.$$set=e=>{"area"in e&&s(3,a=e.area),"$$scope"in e&&s(5,l=e.$$scope)},e.$$.update=()=>{24&e.$$.dirty&&s(1,n=r.startsWith(`/${a}`))},[o,n,e=>{a&&Tt("/"+a)},a,r,l,i,function(e){H[e?"unshift":"push"]((()=>{o=e,s(0,o)}))}]}class oi extends ve{constructor(e){super(),$e(this,e,ri,ni,i,{area:3})}}function ii(e){let t,s;return{c(){t=b("svg"),s=b("path"),I(s,"d","M6 2l1.171.203c-.355 2.245.791 2.519 2.699 2.874 1.468.273 3.13.622 3.13 3.284v.639h-1.183v-.639c0-1.556-.48-1.809-2.164-2.122-2.583-.48-4.096-1.391-3.653-4.239zm18 14c0 3.312-2.607 6-5.825 6-1.511 0-2.886-.595-3.921-1.565-1.311-1.229-3.278-1.132-4.55.038-1.03.948-2.389 1.527-3.879 1.527-3.217 0-5.825-2.688-5.825-6s2.608-6 5.825-6l12.563.007c3.118.116 5.612 2.755 5.612 5.993zm-15-1h-2v-2h-2v2h-2v2h2v2h2v-2h2v-2zm4 1h-2v1h2v-1zm4-2c0 .552.447 1 1 1s1-.448 1-1-.447-1-1-1-1 .448-1 1zm0 2c0-.552-.447-1-1-1s-1 .448-1 1 .447 1 1 1 1-.448 1-1zm2 2c0-.552-.447-1-1-1s-1 .448-1 1 .447 1 1 1 1-.448 1-1zm2-2c0-.552-.447-1-1-1s-1 .448-1 1 .447 1 1 1 1-.448 1-1z"),I(t,"xmlns","http://www.w3.org/2000/svg"),I(t,"width","24"),I(t,"height","24"),I(t,"viewBox","0 0 24 24"),I(t,"class","svelte-1bhpuaq")},m(e,n){v(e,t,n),$(t,s)},d(e){e&&y(t)}}}function li(e){let t,s;return{c(){t=b("svg"),s=b("path"),I(s,"d","M0 21.398c5.504.456 3.533-5.392 8.626-5.445l2.206 1.841c.549 6.645-7.579 8.127-10.832 3.604zm16.878-8.538c1.713-2.687 7.016-11.698 7.016-11.698.423-.747-.515-1.528-1.17-.976 0 0-7.887 6.857-10.213 9.03-1.838 1.719-1.846 2.504-2.441 5.336l2.016 1.681c2.67-1.098 3.439-1.248 4.792-3.373z"),I(t,"xmlns","http://www.w3.org/2000/svg"),I(t,"width","24"),I(t,"height","24"),I(t,"viewBox","0 0 24 24"),I(t,"class","svelte-1bhpuaq")},m(e,n){v(e,t,n),$(t,s)},d(e){e&&y(t)}}}function ai(e){let t,s;return{c(){t=b("svg"),s=b("path"),I(s,"d","M13 0h-2v15.676c-3.379-.667-7 1.915-7 4.731 0 2.367 1.881 3.593 3.919 3.593 2.423 0 5.077-1.728 5.081-5.24v-12.76c3.009 2.223 5.623 3.243 5.059 7 1.431-1.727 1.941-2.817 1.941-4.051 0-4.446-7-5.915-7-8.949z"),I(t,"xmlns","http://www.w3.org/2000/svg"),I(t,"width","24"),I(t,"height","24"),I(t,"viewBox","0 0 24 24"),I(t,"class","svelte-1bhpuaq")},m(e,n){v(e,t,n),$(t,s)},d(e){e&&y(t)}}}function ci(e){let t,s;return{c(){t=b("svg"),s=b("path"),I(s,"d","M23 10.826v2.349c-1.562 0-3 1.312-3 2.857 0 2.181 1.281 5.968-6 5.968v-2.002c4.917 0 3.966-1.6 3.966-3.967 0-2.094 1.211-3.5 2.278-4.031-1.067-.531-2.278-1.438-2.278-3.312 0-2.372.94-4.692-3.966-4.686v-2.002c7.285 0 6 4.506 6 6.688 0 1.544 1.438 2.138 3 2.138zm-19-2.138c0-2.182-1.285-6.688 6-6.688v2.002c-4.906-.007-3.966 2.313-3.966 4.686 0 1.875-1.211 2.781-2.278 3.312 1.067.531 2.278 1.938 2.278 4.031 0 2.367-.951 3.967 3.966 3.967v2.002c-7.281 0-6-3.787-6-5.969 0-1.545-1.438-2.857-3-2.857v-2.349c1.562.001 3-.593 3-2.137z"),I(t,"xmlns","http://www.w3.org/2000/svg"),I(t,"width","24"),I(t,"height","24"),I(t,"viewBox","0 0 24 24"),I(t,"class","svelte-1bhpuaq")},m(e,n){v(e,t,n),$(t,s)},d(e){e&&y(t)}}}function ui(e){let t,s;return{c(){t=b("svg"),s=b("path"),I(s,"d","M24 19h-1v-2.2c-1.853 4.237-6.083 7.2-11 7.2-6.623 0-12-5.377-12-12h1c0 6.071 4.929 11 11 11 4.66 0 8.647-2.904 10.249-7h-2.249v-1h4v4zm-11.036 0h-1.886c-.34-.957-.437-1.571-1.177-1.878h-.001c-.743-.308-1.251.061-2.162.494l-1.333-1.333c.427-.899.804-1.415.494-2.163-.308-.74-.926-.839-1.878-1.177v-1.886c.954-.339 1.57-.437 1.878-1.178.308-.743-.06-1.248-.494-2.162l1.333-1.333c.918.436 1.421.801 2.162.494l.001-.001c.74-.307.838-.924 1.177-1.877h1.886c.34.958.437 1.57 1.177 1.877l.001.001c.743.308 1.252-.062 2.162-.494l1.333 1.333c-.435.917-.801 1.421-.494 2.161v.001c.307.739.915.835 1.878 1.178v1.886c-.953.338-1.571.437-1.878 1.178-.308.743.06 1.249.494 2.162l-1.333 1.333c-.92-.438-1.42-.802-2.157-.496-.746.31-.844.926-1.183 1.88zm-.943-4.667c-1.289 0-2.333-1.044-2.333-2.333 0-1.289 1.044-2.334 2.333-2.334 1.289 0 2.333 1.045 2.333 2.334 0 1.289-1.044 2.333-2.333 2.333zm-8.021-5.333h-4v-4h1v2.2c1.853-4.237 6.083-7.2 11-7.2 6.623 0 12 5.377 12 12h-1c0-6.071-4.929-11-11-11-4.66 0-8.647 2.904-10.249 7h2.249v1z"),I(t,"width","24"),I(t,"height","24"),I(t,"viewBox","0 0 24 24"),I(t,"xmlns","http://www.w3.org/2000/svg"),I(t,"fill-rule","evenodd"),I(t,"clip-rule","evenodd"),I(t,"class","svelte-1bhpuaq")},m(e,n){v(e,t,n),$(t,s)},d(e){e&&y(t)}}}function pi(e){let t,s,n,r,o,i,l,a,c,u,p,h,d,f;n=new oi({props:{area:"game",$$slots:{default:[ii]},$$scope:{ctx:e}}}),i=new oi({props:{area:"graphics",$$slots:{default:[li]},$$scope:{ctx:e}}}),c=new oi({props:{area:"audio",$$slots:{default:[ai]},$$scope:{ctx:e}}}),h=new oi({props:{area:"code",$$slots:{default:[ci]},$$scope:{ctx:e}}});let g=globalThis.electron&&function(e){let t,s,n,r,o;return s=new oi({props:{$$slots:{default:[ui]},$$scope:{ctx:e}}}),{c(){t=w("li"),fe(s.$$.fragment),I(t,"class","last svelte-1bhpuaq")},m(i,l){v(i,t,l),ge(s,t,null),n=!0,r||(o=E(t,"click",e[0]),r=!0)},p(e,t){const n={};2&t&&(n.$$scope={dirty:t,ctx:e}),s.$set(n)},i(e){n||(oe(s.$$.fragment,e),n=!0)},o(e){ie(s.$$.fragment,e),n=!1},d(e){e&&y(t),me(s),r=!1,o()}}}(e);return{c(){t=w("ul"),s=w("li"),fe(n.$$.fragment),r=L(),o=w("li"),fe(i.$$.fragment),l=L(),a=w("li"),fe(c.$$.fragment),u=L(),p=w("li"),fe(h.$$.fragment),d=L(),g&&g.c(),I(s,"class","svelte-1bhpuaq"),I(o,"class","svelte-1bhpuaq"),I(a,"class","svelte-1bhpuaq"),I(p,"class","svelte-1bhpuaq"),I(t,"class","area svelte-1bhpuaq")},m(e,m){v(e,t,m),$(t,s),ge(n,s,null),$(t,r),$(t,o),ge(i,o,null),$(t,l),$(t,a),ge(c,a,null),$(t,u),$(t,p),ge(h,p,null),$(t,d),g&&g.m(t,null),f=!0},p(e,[t]){const s={};2&t&&(s.$$scope={dirty:t,ctx:e}),n.$set(s);const r={};2&t&&(r.$$scope={dirty:t,ctx:e}),i.$set(r);const o={};2&t&&(o.$$scope={dirty:t,ctx:e}),c.$set(o);const l={};2&t&&(l.$$scope={dirty:t,ctx:e}),h.$set(l),globalThis.electron&&g.p(e,t)},i(e){f||(oe(n.$$.fragment,e),oe(i.$$.fragment,e),oe(c.$$.fragment,e),oe(h.$$.fragment,e),oe(g),f=!0)},o(e){ie(n.$$.fragment,e),ie(i.$$.fragment,e),ie(c.$$.fragment,e),ie(h.$$.fragment,e),ie(g),f=!1},d(e){e&&y(t),me(n),me(i),me(c),me(h),g&&g.d()}}}function hi(e){return[e=>Me.execute("buildandrun_project")]}class di extends ve{constructor(e){super(),$e(this,e,hi,pi,i,{})}}function fi(t){let s,n,o,i,l,a,c;return{c(){s=w("button"),n=L(),o=w("button"),i=L(),l=w("button"),I(s,"class","minimize svelte-188xc0"),I(o,"class","maximize svelte-188xc0"),I(l,"class","close svelte-188xc0")},m(e,r){v(e,s,r),v(e,n,r),v(e,o,r),v(e,i,r),v(e,l,r),a||(c=[E(s,"click",t[1]),E(o,"click",t[2]),E(l,"click",t[3])],a=!0)},p:e,i:e,o:e,d(e){e&&y(s),e&&y(n),e&&y(o),e&&y(i),e&&y(l),a=!1,r(c)}}}function gi(e){const t=e=>Me.execute(`window_${e}`);return[t,e=>t("minimize"),e=>t("maximize"),e=>t("close")]}class mi extends ve{constructor(e){super(),$e(this,e,gi,fi,i,{})}}function $i(e){let t,s,n,r,o,i,l,a,c,u,p,h,d,f,g,m,x,b,k,E=e[0].name+"",z=e[0].saved?"":"*";return d=new si({}),g=new di({}),b=new mi({}),{c(){t=w("header"),s=w("div"),n=L(),r=w("div"),o=w("div"),i=_("["),l=w("span"),a=_(E),c=_("]"),u=_(z),p=L(),h=w("div"),fe(d.$$.fragment),f=L(),fe(g.$$.fragment),m=L(),x=w("div"),fe(b.$$.fragment),I(s,"class","drag app-region svelte-hnfzn8"),I(l,"class","no-paint svelte-hnfzn8"),I(o,"class","titlebar svelte-hnfzn8"),I(h,"id","top-navigation"),I(h,"class","svelte-hnfzn8"),I(x,"id","window-buttons"),I(x,"class","svelte-hnfzn8"),I(r,"class","inner svelte-hnfzn8"),I(t,"id","masthead"),I(t,"class","svelte-hnfzn8")},m(e,y){v(e,t,y),$(t,s),$(t,n),$(t,r),$(r,o),$(o,i),$(o,l),$(l,a),$(o,c),$(o,u),$(r,p),$(r,h),ge(d,h,null),$(h,f),ge(g,h,null),$(r,m),$(r,x),ge(b,x,null),k=!0},p(e,[t]){(!k||1&t)&&E!==(E=e[0].name+"")&&S(a,E),(!k||1&t)&&z!==(z=e[0].saved?"":"*")&&S(u,z)},i(e){k||(oe(d.$$.fragment,e),oe(g.$$.fragment,e),oe(b.$$.fragment,e),k=!0)},o(e){ie(d.$$.fragment,e),ie(g.$$.fragment,e),ie(b.$$.fragment,e),k=!1},d(e){e&&y(t),me(d),me(g),me(b)}}}function vi(e,t,s){let n;return c(e,Ie,(e=>s(0,n=e))),[n]}class yi extends ve{constructor(e){super(),$e(this,e,vi,$i,i,{})}}function xi(e,t,s){const n=e.slice();return n[4]=t[s].error,n[5]=t[s].date,n}function wi(e){let t,s,n,r,o,i,l,a,c=e[5]+"",u=e[4].message+"";return{c(){t=w("li"),s=_("["),n=_(c),r=_("] ( "),o=_(u),i=_(" )\r\n        "),l=w("div"),l.textContent="some extra hidden details",a=L(),I(l,"class","details svelte-8fmup"),I(t,"class","svelte-8fmup")},m(e,c){v(e,t,c),$(t,s),$(t,n),$(t,r),$(t,o),$(t,i),$(t,l),$(t,a)},p(e,t){2&t&&c!==(c=e[5]+"")&&S(n,c),2&t&&u!==(u=e[4].message+"")&&S(o,u)},d(e){e&&y(t)}}}function bi(e){let t,s=e[4]&&wi(e);return{c(){s&&s.c(),t=k()},m(e,n){s&&s.m(e,n),v(e,t,n)},p(e,n){e[4]?s?s.p(e,n):(s=wi(e),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},d(e){s&&s.d(e),e&&y(t)}}}function _i(t){let s,n=t[1],r=[];for(let e=0;e<n.length;e+=1)r[e]=bi(xi(t,n,e));return{c(){s=w("ul");for(let e=0;e<r.length;e+=1)r[e].c();I(s,"class","svelte-8fmup")},m(e,n){v(e,s,n);for(let e=0;e<r.length;e+=1)r[e].m(s,null);t[2](s)},p(e,[t]){if(2&t){let o;for(n=e[1],o=0;o<n.length;o+=1){const i=xi(e,n,o);r[o]?r[o].p(i,t):(r[o]=bi(i),r[o].c(),r[o].m(s,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},i:e,o:e,d(e){e&&y(s),x(r,e),t[2](null)}}}function Li(e,t,s){let n,r=[];const o=ze.subscribe((async e=>{s(1,r=[...e]),await W(),n&&n.scrollTo({top:1e9,left:0,behavior:"smooth"})}));return j((()=>{o()})),[n,r,function(e){H[e?"unshift":"push"]((()=>{n=e,s(0,n)}))}]}class ki extends ve{constructor(e){super(),$e(this,e,Li,_i,i,{})}}function Ei(t){let s,n,r;return n=new ki({}),{c(){s=w("footer"),fe(n.$$.fragment),I(s,"class","footer svelte-zj1pup")},m(e,t){v(e,s,t),ge(n,s,null),r=!0},p:e,i(e){r||(oe(n.$$.fragment,e),r=!0)},o(e){ie(n.$$.fragment,e),r=!1},d(e){e&&y(s),me(n)}}}class zi extends ve{constructor(e){super(),$e(this,e,null,Ei,i,{})}}function Ii(e,t,s){const n=e.slice();return n[2]=t[s].type,n[3]=t[s].title,n[4]=t[s].message,n[6]=s,n}function Ai(e,t){let s,n,r,o,i,l,a,c,u=t[3]+"",p=t[4]+"";return{key:e,first:null,c(){s=w("div"),n=w("h2"),r=_(u),o=L(),i=w("p"),l=_(p),a=L(),I(s,"class",c=g(t[2])+" svelte-ivu95s"),this.first=s},m(e,t){v(e,s,t),$(s,n),$(n,r),$(s,o),$(s,i),$(i,l),$(s,a)},p(e,n){t=e,1&n&&u!==(u=t[3]+"")&&S(r,u),1&n&&p!==(p=t[4]+"")&&S(l,p),1&n&&c!==(c=g(t[2])+" svelte-ivu95s")&&I(s,"class",c)},d(e){e&&y(s)}}}function Si(t){let s,n=[],r=new Map,o=t[0];const i=e=>e[6];for(let e=0;e<o.length;e+=1){let s=Ii(t,o,e),l=i(s);r.set(l,n[e]=Ai(l,s))}return{c(){s=w("div");for(let e=0;e<n.length;e+=1)n[e].c();I(s,"class","notifications svelte-ivu95s")},m(e,t){v(e,s,t);for(let e=0;e<n.length;e+=1)n[e].m(s,null)},p(e,[t]){1&t&&(o=e[0],n=ue(n,t,i,1,e,o,r,s,ae,Ai,null,Ii))},i:e,o:e,d(e){e&&y(s);for(let e=0;e<n.length;e+=1)n[e].d()}}}function Mi(e,t,s){let n;const r=Ge([],(({store:e,value:t,get:s,update:n})=>({add({type:t,title:s,message:n}){e.update((e=>[{type:t,title:s,message:n},...e]))}})));return c(e,r,(e=>s(0,n=e))),[n,r]}class Ci extends ve{constructor(e){super(),$e(this,e,Mi,Si,i,{})}}function Pi(t){let s,n,r=t[0],o=Ti(t);return{c(){o.c(),s=k()},m(e,t){o.m(e,t),v(e,s,t),n=!0},p(t,n){1&n&&i(r,r=t[0])?(ne(),ie(o,1,1,e),re(),o=Ti(t),o.c(),oe(o),o.m(s.parentNode,s)):o.p(t,n)},i(e){n||(oe(o),n=!0)},o(e){ie(o),n=!1},d(e){e&&y(s),o.d(e)}}}function Ti(e){let t,s,n,r,o,i,l,a,c;var u=e[0];return u&&(i=new u({})),{c(){t=w("section"),s=w("div"),n=w("button"),n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="white" width="24" height="24" viewBox="0 0 24 24"><path d="M23.954 21.03l-9.184-9.095 9.092-9.174-2.832-2.807-9.09 9.179-9.176-9.088-2.81 2.81 9.186 9.105-9.095 9.184 2.81 2.81 9.112-9.192 9.18 9.1z"></path></svg>',r=L(),o=w("div"),i&&fe(i.$$.fragment),I(n,"class","svelte-orqgit"),I(o,"class","content svelte-orqgit"),I(s,"class","popup svelte-orqgit"),I(t,"class","svelte-orqgit")},m(u,p){v(u,t,p),$(t,s),$(s,n),$(s,r),$(s,o),i&&ge(i,o,null),l=!0,a||(c=E(n,"click",e[1]),a=!0)},p(e,t){if(u!==(u=e[0])){if(i){ne();const e=i;ie(e.$$.fragment,1,0,(()=>{me(e,1)})),re()}u?(i=new u({}),fe(i.$$.fragment),oe(i.$$.fragment,1),ge(i,o,null)):i=null}},i(e){l||(i&&oe(i.$$.fragment,e),l=!0)},o(e){i&&ie(i.$$.fragment,e),l=!1},d(e){e&&y(t),i&&me(i),a=!1,c()}}}function Ni(e){let t,s,n=e[0]&&Pi(e);return{c(){n&&n.c(),t=k()},m(e,r){n&&n.m(e,r),v(e,t,r),s=!0},p(e,[s]){e[0]?n?(n.p(e,s),1&s&&oe(n,1)):(n=Pi(e),n.c(),oe(n,1),n.m(t.parentNode,t)):n&&(ne(),ie(n,1,1,(()=>{n=null})),re())},i(e){s||(oe(n),s=!0)},o(e){ie(n),s=!1},d(e){n&&n.d(e),e&&y(t)}}}const Ri=xe();function Di(e,t,s){let n;c(e,Ri,(e=>s(0,n=e)));return[n,e=>(e=>Ri.set(e))(void 0)]}class ji extends ve{constructor(e){super(),$e(this,e,Di,Ni,i,{})}}function Oi(t){let s,n,r,o,i,l,a,c,u,p,h,d;return n=new yi({}),i=new es({}),a=new zi({}),u=new ji({}),h=new Ci({}),{c(){s=w("div"),fe(n.$$.fragment),r=L(),o=w("main"),fe(i.$$.fragment),l=L(),fe(a.$$.fragment),c=L(),fe(u.$$.fragment),p=L(),fe(h.$$.fragment),I(o,"class","svelte-4azgf7"),I(s,"id","app")},m(e,t){v(e,s,t),ge(n,s,null),$(s,r),$(s,o),ge(i,o,null),$(s,l),ge(a,s,null),v(e,c,t),ge(u,e,t),v(e,p,t),ge(h,e,t),d=!0},p:e,i(e){d||(oe(n.$$.fragment,e),oe(i.$$.fragment,e),oe(a.$$.fragment,e),oe(u.$$.fragment,e),oe(h.$$.fragment,e),d=!0)},o(e){ie(n.$$.fragment,e),ie(i.$$.fragment,e),ie(a.$$.fragment,e),ie(u.$$.fragment,e),ie(h.$$.fragment,e),d=!1},d(e){e&&y(s),me(n),me(i),me(a),e&&y(c),me(u,e),e&&y(p),me(h,e)}}}function Bi(e){return[]}class Fi extends ve{constructor(e){super(),$e(this,e,Bi,Oi,i,{})}}const{document:Hi}=le;function qi(e){let s,n,r,o,i;Hi.title=s="["+e[0].name+(e[0].save?"":"*")+"]";const l=[e[1]];let a={};for(let e=0;e<l.length;e+=1)a=t(a,l[e]);return o=new Fi({props:a}),{c(){n=w("meta"),r=L(),fe(o.$$.fragment),I(n,"http-equiv","Content-Security-Policy"),I(n,"content","script-src 'self'")},m(e,t){$(Hi.head,n),v(e,r,t),ge(o,e,t),i=!0},p(e,[t]){(!i||1&t)&&s!==(s="["+e[0].name+(e[0].save?"":"*")+"]")&&(Hi.title=s);const n=2&t?pe(l,[he(e[1])]):{};o.$set(n)},i(e){i||(oe(o.$$.fragment,e),i=!0)},o(e){ie(o.$$.fragment,e),i=!1},d(e){y(n),e&&y(r),me(o,e)}}}function Ki(e,s,n){let r,o;return c(e,Ft,(e=>n(2,r=e))),c(e,Ie,(e=>n(0,o=e))),globalThis.electron&&(document.body.classList.add("electron"),Nt("/")),D((async()=>{await W(),je.startPage!==r&&Nt(je.startPage)})),e.$$set=e=>{n(1,s=t(t({},s),d(e)))},s=d(s),[o,s]}function Gi(t){let s;return{c(){s=w("section"),s.innerHTML='<article class="svelte-weu28o"><h3>This online version of NESBit Studio relies on ad-monetization to be able to continue to operate</h3> \n    <p>We know, we know. Intrusive ads sucks! We do our best to keep it out of your way and experience using this tool.</p></article>',I(s,"class","checkered svelte-weu28o")},m(e,t){v(e,s,t)},p:e,i:e,o:e,d(e){e&&y(s)}}}return new(window.not_adblocked?class extends ve{constructor(e){super(),$e(this,e,Ki,qi,i,{})}}:class extends ve{constructor(e){super(),$e(this,e,null,Gi,i,{})}})({target:document.querySelector("body")})}();
